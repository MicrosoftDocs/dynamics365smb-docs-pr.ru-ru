---
title: Создавайте рабочие процессы для соединения задач
description: Вы можете создавать рабочие процессы, которые объединяют задачи бизнес-процесса, выполняемые разными пользователями, и включать системные задачи, такие как автоматическая публикация, в качестве шагов рабочего процесса.
author: SorenGP
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 06/30/2021
ms.author: edupont
ms.openlocfilehash: 301856bcf246f7546992de588472459e1bbec378
ms.sourcegitcommit: f1e272485a0e675d337a694aba3e35a5daf43920
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2022
ms.locfileid: "9130096"
---
# <a name="create-workflows-to-connect-business-process-tasks"></a>Создавайте рабочие процессы для соединения задач бизнес-процессов

Можно создать потоки операций, соединяющие задачи бизнес-процессов, которые выполняются разными пользователями. Системные задачи, такие как автоматический учет, могут включаться в качестве шагов рабочего процесса, предшествующих задачам пользователя или выполняемых после них. Типичные шаги рабочего процесса – запрос и выдача разрешения на создание новых записей.  

На странице **Рабочий процесс** создайте рабочий процесс, указав в строках связанные с ним шаги. Каждый шаг состоит из события рабочего процесса, ограниченного условиями события, и отклика рабочего процесса, ограниченного параметрами отклика. Шаги рабочего процесса заполняются посредством заполнения полей в строках рабочего процесса из фиксированных списков значений события и отклика, представляющих сценарии, которые поддерживаются кодом приложения.  

[!INCLUDE[workflow](includes/workflow.md)]

При создании рабочих процессов можно скопировать шаги из существующих рабочих процессов из шаблонов рабочих процессов. Шаблоны рабочих процессов не подлежат редактированию и существуют в универсальной версии [!INCLUDE[prod_short](includes/prod_short.md)]. Коды для шаблонов процессов, добавленных Майкрософт, имеют приставку "MS-", например "MS-PIW". Дополнительные сведения см. в разделе [Создание рабочих процессов из шаблонов рабочих процессов](across-how-to-create-workflows-from-workflow-templates.md).  

> [!NOTE]  
> Все уведомления о шагах потоков операций отправляются через очередь заданий. Убедитесь, что очередь заданий соответствует потребностям вашего бизнеса. Дополнительные сведения см. в разделе [Использование очередей работ для планирования задач](admin-job-queues-schedule-tasks.md).  

:::image type="content" source="media/Workflows/workflow-example.png" alt-text="Иллюстрация примера рабочего процесса.":::

Рабочий процесс разделен на три раздела:

1. **Событие "когда"**  
   Здесь выбирается триггер.  
   Примеры триггера:
   * Запись основных данных изменена
   * Создана строка журнала
   * Входящий документ создается или выпускается
   * Запрошено утверждение документа

2. **При условии**  
   **Условия** связаны с событием и открываются для создания фильтров, когда происходит событие.
3. **Отклик "то"**  
   **Отклики** отвечают на следующие шаги в работе.

Для обоих типов событий события определены системой. Новые события должны добавляться при разработке расширения.

## <a name="to-create-a-workflow"></a>Создание потока операций

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Рабочие процессы**, а затем выберите связанную ссылку.  
2. Выберите действие **Создать**. Откроется страница **Рабочий процесс**.  
3. В поле **Код** введите не более 20 знаков для обозначения рабочего процесса.  
4. Для создания рабочего процесса из шаблона рабочего процесса на странице **Рабочий процесс** выберите действие **Создать рабочий процесс из шаблона**. Дополнительные сведения см. в разделе [Создание рабочих процессов из шаблонов рабочих процессов](across-how-to-create-workflows-from-workflow-templates.md).  
5. В поле **Описание** введите описание рабочего процесса.  
6. В поле **Категория** укажите категорию рабочего процесса.  
7. В поле **Событие "когда"** укажите событие, которое должно произойти для запуска этого шага рабочего процесса.  

    При выборе поля открывается страница **События рабочего процесса**, в котором можно выбрать любое из доступных событий рабочего процесса.  
8. В поле **При условии** укажите одно или несколько условий, которые должны быть соблюдены, чтобы произошло событие, указанное в поле **Событие "когда"**.  

    При выборе этого поля откроется страница **Условия события**, на которой можно выбрать одно из списка полей фильтра, относящихся как условия к рассматриваемому событию. Можно добавить новые поля фильтров, которые будут использоваться в качестве условий события. Фильтры условия события устанавливаются точно так же, как фильтры на страницах запросов отчетов.  

    Если событие рабочего процесса предназначено для изменения определенного поля в записи, откроется страница **Условия события** с параметрами для выбора поля и типа изменения.  

    1. Для указания изменения поля для события на странице **Условия события** в поле **Поле** выберите поле, которое изменяется.  
    2. В поле **Оператор** выберите **Уменьшено**, **Увеличено** или **Изменено**.  
9. В поле **Отклик "то"** укажите отклик, который последует при возникновении события рабочего процесса.  

     При выборе этого поля открывается страница **Отклики рабочего процесса**, на которой можно выбрать любой из доступных откликов рабочего процесса и задать параметры отклика для выбранного отклика.  
10. На экспресс-вкладке **Параметры для выбранного отклика** задайте параметры для отклика рабочего процесса, выбрав значения в различных полях следующим образом:  

    1. Чтобы указать параметры для рабочего процесса, предусматривающего отправку уведомления, заполните поля, как описано в следующей таблице.  

        |Поле|Описание|  
        |-----|-----------|  
        |**Уведомить отправителя**|Укажите, получит ли автор запроса на утверждение уведомление вместо получателя запроса. Если вы установите флажок, поле **Код пользователя получателя** будет отключено, потому что отправитель запроса получит уведомление. Имя ответа рабочего процесса изменяется соответственно на **Создать уведомление для &lt;Отправитель&gt;**. Если флажок не установлен, имя ответа рабочего процесса — **Создать уведомление для &lt;Пользователь&gt;**.
        |**Код пользователя получателя**|Укажите пользователя, которому должно отправляться уведомление. **Примечание**. Этот параметр доступен только для откликов рабочего процесса с заполнителем для определенного пользователя. Для откликов рабочих процессов без заполнителей для пользователей получатель уведомления обычно определяется путем **настройки пользователя утверждения**.|  
        |**Тип операции уведомления**|Указывает, будет ли уведомление рабочего процесса вызвано изменением записи, запросом на утверждение или переданными данными.|
        |**Связать целевую страницу**|Задайте другую страницу, чтобы открывалась ссылка в уведомлении вместо страницы по умолчанию. Страница должна иметь ту же исходную таблицу, что и соответствующая запись.|
        |**Пользовательская ссылка**|Укажите URL-адрес ссылки, которая будет добавлена в уведомление в дополнение к ссылке на страницу.|  

    2. Чтобы указать параметры для отклика рабочего процесса, предусматривающего создание запроса на утверждение, заполните поля, как описано в следующей таблице.  

        |Поле|Описание|  
        |-----|-----------|  
        |**Формула расчета срока утверждения**|Укажите срок в днях, в течение которого запрос разрешения должен быть рассмотрен после дня его отправки.|
        |**Делегировать через**|Задайте необходимость и время автоматического делегирования запроса на утверждения соответствующей замене. Можно выбрать автоматическое делегирование через один, два или пять дней после даты запроса утверждения.|
        |**Тип утверждающего**|Укажите, кто является утверждающим, в соответствии с настройкой пользователей утверждения и пользователей рабочего процесса. Когда поле задано как **Продавец/покупатель**, это означает, что пользователь, настроенный в поле **Код менеджера** на странице **Настройка пользователя для утверждений**, определяет утверждающее лицо. Затем создаются операции запросов утверждения в соответствии со значением в поле **Тип лимита утверждающего**. Дополнительные сведения см. в разделе [Настройка утверждающих пользователей](across-how-to-set-up-workflow-users.md).|
        |**Показать сообщение подтверждения**|Задайте необходимость отображение для пользователей сообщения с подтверждением после их запроса утверждения.|
        |**Тип лимита утверждающего**|Укажите, как порядок утверждающих лиц влияет на создание для них операций запроса на утверждение. Квалифицированное утверждающее лицо представляет собой утверждающее лицо, лимит утверждения которого превышает значение, указанное в запросе. Имеются следующие варианты: <ol><li>**Цепочка утверждающих** указывает, что операции запроса на утверждение создаются для всех утверждающих лиц данного запроса вплоть до первого квалифицированного утверждающего лица.</li><li>**Прямой утверждающий** указывает, что операция запроса утверждения создана только для непосредственного утверждающего лица запрашивающей стороны, независимо от лимита утверждения данного утверждающего лица.</li><li>**Первый квалифицированный утверждающий** указывает, что операция запроса на утверждение создана только для первого квалифицированного утверждающего.</li></ol>|
    3. Чтобы задать параметры для рабочего процесса, предусматривающего создание строк журнала, заполните поля, как описано в следующей таблице.  

        |Поле|Описание|  
        |-----|-----------|  
        |**Название шаблона финансового журнала**|Определите имя шаблона финансового журнала, в котором создаются указанные строки журнала.|  
        |**Название раздела финансового журнала**|Определите имя шаблона пакета финансового журнала, в котором создаются указанные строки журнала.|  

11. Выберите кнопки **Увеличить отступ** и **Уменьшить отступ** для установки отступа имени события в поле **Когда**, чтобы задать положение шага в рабочем процессе.  

    1. Укажите, что этот шаг являются следующим в последовательности рабочего процесса, задав отступ для имени события больше отступа для имени события предыдущего шага.  
    2. Укажите, что шаг является одним из нескольких альтернативных шагов, который может начаться при выполнения соответствующего условия, поместив имя события на том же уровне отступа, что и другие альтернативные шаги. Организуйте такие дополнительные шаги по приоритету, поместив самый важный шаг первым.  

    > [!NOTE]  
    >  Изменение отступа возможно только для шага, который не имеет последующего шага.  

12. Повторите шаги 7–11 для добавления других шагов рабочего процесса перед только что созданным шагом или после него.  
13. Установите значение **Включено**, чтобы указать, что рабочий процесс начнется сразу при возникновении события в первом шаге типа **Точка входа**. Дополнительные сведения см. в разделе [Использование рабочих процессов](across-use-workflows.md).  

> [!NOTE]  
> Не включайте поток операций, пока не уверены, что этот поток операций завершен и могут быть запущены соответствующие шаги потока операций.  

> [!TIP]  
> Чтобы увидеть связи между таблицами, которые используются в рабочих процессах, выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, а затем введите **Связи таблица - рабочий процесс**.  

## <a name="example-of-creating-a-new-workflow-using-existing-events"></a>Пример создания нового рабочего процесса с использованием существующих событий

В следующем примере создается новый рабочий процесс для утверждения изменений имени существующего поставщика:

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Рабочие процессы**, а затем выберите связанную ссылку.  
2. Выберите действие **Создать**. Откроется страница **Рабочий процесс**.
3. В разделе рабочих процессов заполните поля, как описано в следующей таблице.

    |Поле  |Значение  |
    |---------|---------|
    |**Код**|**VENDAPN-01**|
    |**Описание**|**Утверждение изменения имени поставщика** |
    |**Категория**|**PURCH**|

4. Чтобы создать первый шаг рабочего процесса, выполните следующие действия.

    1. В поле **Событие "когда"** укажите *Запись поставщика изменена*.  
    2. В поле **При условии** выберите слово **Всегда**, а затем на странице **Условия события** выберите ссылку **Добавить условие изменения значений полей**, а затем выберите поле *Имя*.  

      Результатом этого шага является то, что условие становится *Имя изменено*.  
    3. В поле **Отклик "то"** выберите ссылку **Выбрать ответ**, а затем на странице **Отклики рабочего процесса** в поле **Выбрать ответ** выберите отклик *Сторнировать значение поля \<Field\> в записи и сохранить изменение*, а затем в разделе **Параметры для выбранного отклика** укажите поле *Имя*.  
    4. Выберите ссылку **Добавить еще отклики**, а затем добавьте запись для *Создать запрос утверждения для записи, используя тип утверждающего <%1> и <%2>.* ответ.  
    5. В разделе **Параметры для выбранного отклика** для нового отклика измените поле **Тип утверждающего** на *Группа пользователей рабочего процесса*, а затем в поле **Группа пользователей рабочего процесса** укажите соответствующую группу пользователей.  

    Дополнительные сведения см. в разделе [Настройка утверждающих пользователей](across-how-to-set-up-approval-users.md).  
    6. Добавьте третий отклик, *Отправить запрос утверждения для записи и создать уведомление.*  
    7. Добавьте четвертый отклик, *Показать сообщение "%1"*, а затем в разделе **Параметры для выбранного отклика** в поле Сообщение укажите **Запрос утверждения отправлен**.  
    8. Нажмите кнопку **ОК** для возвращения к шагу рабочего процесса.  

5. В следующей строке добавьте новый шаг рабочего процесса для *Запрос на утверждение утвержден.* событие.  

    1. В поле **Событие "когда"** укажите *Запрос на утверждение утвержден*.  
    2. Выберите меню строки, а затем выберите **Увеличить отступ**.  
    3. В поле **При условии** выберите слово **Всегда**, а затем в поле **Ожидают утверждения** укажите *0*.  

      Результатом этого шага является то, что условие становится как *Ожидают утверждения:0*, чтобы указать, что это последний утверждающий.  
    4. В поле **Отклик "то"** выберите ссылку **Выбрать отклик**, а затем на странице **Отклики рабочего процесса** в поле **Выбрать отклик** отклик *Отправить запрос утверждения для записи и создать уведомление*.  
    5. Нажмите кнопку **ОК**.  
6. В следующей строке добавьте второй шаг рабочего процесса для события *Запрос на утверждение утвержден*.  

    1. В поле **Событие "когда"** укажите *Запрос на утверждение утвержден*.
    2. В поле **При условии** выберите слово **Всегда**, а затем в поле **Ожидают утверждения** укажите *>0*.  

      Результатом этого шага является то, что условие становится как *Ожидают утверждения:>0*, чтобы указать, что это *не* последний утверждающий.  
    3. В поле **Отклик "то"** выберите ссылку **Выбрать отклик**, а затем на странице **Отклики рабочего процесса** в поле **Выбрать отклик** отклик *Отправить запрос утверждения для записи и создать уведомление*.  
    4. Нажмите кнопку **ОК**.  
7. В следующей строке добавьте шаг рабочего процесса для события *Запрос на утверждение делегирован*.  

    1. В поле **Событие "когда"** укажите *Запрос на утверждение делегирован*.  
    2. В поле **При условии** оставьте значение как *Всегда*.  
    3. В поле **Отклик "то"** выберите ссылку **Выбрать отклик**, а затем на странице **Отклики рабочего процесса** в поле **Выбрать отклик** отклик *Отправить запрос утверждения для записи и создать уведомление*.  
    4. Нажмите кнопку **ОК**.  
8. В следующей строке добавьте второй шаг рабочего процесса для события *Запрос на утверждение отклонен*.  

    1. В поле **Событие "когда"** укажите *Запрос на утверждение отклонен*.  
    2. В поле **При условии** оставьте значение как *Всегда*.  
    3. В поле **Отклик "то"** выберите ссылку **Выбрать отклик**, а затем на странице **Отклики рабочего процесса** в поле **Выбрать отклик** выберите отклик *Отклонить новые значения.*.  
    4. Выберите ссылку **Добавить еще отклики**, а затем добавьте запись для отклика *Отклонить запрос утверждения для записи и создать уведомление.*.
    5. Нажмите кнопку **ОК**.  
9. Чтобы включить службу рабочий процесс, установите переключатель **Включено**.  

На следующем рисунке представлен обзор результата этой процедуры.  

:::image type="content" source="media/Workflows/workflow-example-2.png" alt-text="Иллюстрация рабочего процесса утверждения имени поставщика.":::

Теперь протестируйте рабочий процесс, открыв карточку существующего поставщика и изменив имя. Убедитесь, что при изменении имени поставщика отправляется запрос на утверждение.

## <a name="see-related-training-at-microsoft-learn"></a>См. соответствующее обучение на странице [Microsoft Learn](/learn/modules/create-workflows/)

## <a name="see-also"></a>См. также

[Создание рабочих процессов из шаблонов рабочих процессов](across-how-to-create-workflows-from-workflow-templates.md)  
[Настройка утверждающих пользователей](across-how-to-set-up-approval-users.md)  
[Настройка уведомлений рабочего процесса](across-setting-up-workflow-notifications.md)  
[Просмотр архивированных экземпляров шагов рабочих процессов](across-how-to-view-archived-workflow-step-instances.md)  
[Удаление рабочих процессов](across-how-to-delete-workflows.md)  
[Пошаговое руководство. Настройка и использование рабочего процесса утверждения покупки](walkthrough-setting-up-and-using-a-purchase-approval-workflow.md)  
[Настройка рабочих процессов](across-set-up-workflows.md)  
[Использование рабочих процессов](across-use-workflows.md)  
[Рабочий процесс](across-workflow.md)  


[!INCLUDE[footer-include](includes/footer-banner.md)]
