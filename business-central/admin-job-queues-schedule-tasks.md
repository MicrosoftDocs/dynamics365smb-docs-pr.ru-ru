---
title: Планирование автоматического выполнения работ
description: Запланированные задания обрабатываются очередью работ. Эти работы выполняют отчеты и модули Codeunit. В настройках можно указать однократное или периодически повторяющееся выполнение работы.
author: edupont04
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 01/12/2021
ms.author: edupont
ms.openlocfilehash: 074a110a4aac42d9b6058e377c45de0c23409bb2
ms.sourcegitcommit: cb06aa973f5c767df774b0e1e199c6fbe0e85b88
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "5470266"
---
# <a name="use-job-queues-to-schedule-tasks"></a><span data-ttu-id="6298a-105">Использование очередей работ для планирования задач</span><span class="sxs-lookup"><span data-stu-id="6298a-105">Use Job Queues to Schedule Tasks</span></span>

<span data-ttu-id="6298a-106">Очереди работ в [!INCLUDE[prod_short](includes/prod_short.md)] позволяют пользователям планировать и создавать определенные отчеты, а также запускать модули codeunit.</span><span class="sxs-lookup"><span data-stu-id="6298a-106">Job queues in [!INCLUDE[prod_short](includes/prod_short.md)] enable users to schedule and run specific reports and codeunits.</span></span> <span data-ttu-id="6298a-107">В настройках можно указать однократное или периодически повторяющееся выполнение работы.</span><span class="sxs-lookup"><span data-stu-id="6298a-107">You can set jobs to run one time, or on a recurring basis.</span></span> <span data-ttu-id="6298a-108">Например, вы можете захотеть запускать отчет **Статистика продаж \* менеджера** еженедельно, чтобы отслеживать продажи по продавцам каждую неделю, или вы можете запускать модуль codeunit **Делегировать запросы на утверждение** ежедневно, чтобы предотвратить накопление документов или блокировку рабочего иным образом.</span><span class="sxs-lookup"><span data-stu-id="6298a-108">For example, you might want to run the **Salesperson \* Sales Statistics** report weekly, to track sales by salesperson each week, or you might want to run the **Delegate Approval Requests** codeunit daily, to prevent documents from piling up or otherwise block the workflow.</span></span>

<span data-ttu-id="6298a-109">На странице **Операции очереди работ** перечисляются все существующие работы.</span><span class="sxs-lookup"><span data-stu-id="6298a-109">The **Job Queue Entries** page lists all existing jobs.</span></span> <span data-ttu-id="6298a-110">При добавлении новой записи очереди заданий, которую нужно запланировать, необходимо указать сведения о типе объекта, который должен запускаться, например отчет или кодовая единица,а также имя и код объекта, который необходимо запустить.</span><span class="sxs-lookup"><span data-stu-id="6298a-110">If you add a new job queue entry that you want to schedule, you must specify information about the type of object you want to run, such as a report or codeunit, and the name and object ID of the object that you want to run.</span></span> <span data-ttu-id="6298a-111">Можно также добавлять параметры для определения поведения операции очереди заданий.</span><span class="sxs-lookup"><span data-stu-id="6298a-111">You can also add parameters to specify the behavior of the job queue entry.</span></span> <span data-ttu-id="6298a-112">Например, можно добавить параметр, чтобы только отправить учтенные заказы на продажу.</span><span class="sxs-lookup"><span data-stu-id="6298a-112">For example, you can add a parameter to only send posted sales orders.</span></span> <span data-ttu-id="6298a-113">У вас должны быть права на запуск указанного отчета или модуля codeunit, в противном случае при выполнении очереди работ будет возвращена ошибка.</span><span class="sxs-lookup"><span data-stu-id="6298a-113">You must have permission to run the particular report or codeunit, or an error will be returned when the job queue is run.</span></span>  
> [!IMPORTANT]  
> <span data-ttu-id="6298a-114">Если используется набор прав доступа SUPER, который поставляется с [!INCLUDE[prod_short](includes/prod_short.md)], данный пользователь и другие пользователи имеют права на запуск всех объектов в пределах лицензии.</span><span class="sxs-lookup"><span data-stu-id="6298a-114">If you use the SUPER permissions set that comes with [!INCLUDE[prod_short](includes/prod_short.md)], you and your users have permissions to run all objects within the license.</span></span> <span data-ttu-id="6298a-115">Этого все еще недостаточно для делегированного администратора или пользователей с лицензией на устройство, которые не могут создавать очереди заданий.</span><span class="sxs-lookup"><span data-stu-id="6298a-115">That is still not enough for Delegated Admin or users with Device license, who cannot create job queue entires.</span></span>

<span data-ttu-id="6298a-116">Очередь заданий может состоять из большого количества операций, представляющих собой задания, которыми управляет очередь и запускает их.</span><span class="sxs-lookup"><span data-stu-id="6298a-116">A job queue can have many entries, which are the jobs that the queue manages and runs.</span></span> <span data-ttu-id="6298a-117">Информация в записи определяет, какой отчет или модуль codeunit выполняется, как часто и когда запускается запись, в какой категории запускается задача и каким образом.</span><span class="sxs-lookup"><span data-stu-id="6298a-117">Information in the entry specifies what codeunit or report is run, when and how often the entry is run, in what category the job runs, and how it runs.</span></span>  

<span data-ttu-id="6298a-118">После того как очереди заданий настроены и работают, статус может изменяться в пределах каждого повторяющегося периода, как указано ниже:</span><span class="sxs-lookup"><span data-stu-id="6298a-118">After job queues are set up and running, the status can change as follows within each recurring period:</span></span>

* <span data-ttu-id="6298a-119">**На удержании**</span><span class="sxs-lookup"><span data-stu-id="6298a-119">**On Hold**</span></span>  
* <span data-ttu-id="6298a-120">**Готово**</span><span class="sxs-lookup"><span data-stu-id="6298a-120">**Ready**</span></span>  
* <span data-ttu-id="6298a-121">**В работе**</span><span class="sxs-lookup"><span data-stu-id="6298a-121">**In Process**</span></span>  
* <span data-ttu-id="6298a-122">**Ошибка**</span><span class="sxs-lookup"><span data-stu-id="6298a-122">**Error**</span></span>  
* <span data-ttu-id="6298a-123">**Завершен**</span><span class="sxs-lookup"><span data-stu-id="6298a-123">**Finished**</span></span>  

<span data-ttu-id="6298a-124">После успешного выполнения задания оно будет удалено из списка операций очереди заданий, если только это задание не является повторяющимся.</span><span class="sxs-lookup"><span data-stu-id="6298a-124">After a job has finished successfully, it is removed from the list of job queue entries unless it is a recurring job.</span></span> <span data-ttu-id="6298a-125">Если это повторяющаяся работа, поле **Самая ранняя дата/время начала** показывает, когда ожидается следующий запуск задания.</span><span class="sxs-lookup"><span data-stu-id="6298a-125">If it is a recurring job, the **Earliest Start Time** field is adjusted to show the next time that the job is expected to run.</span></span>  

## <a name="to-view-status-or-errors-in-the-job-queue"></a><span data-ttu-id="6298a-126">Просмотр состояния или ошибок в очереди работ</span><span class="sxs-lookup"><span data-stu-id="6298a-126">To view status or errors in the job queue</span></span>

<span data-ttu-id="6298a-127">Данные, произведенные при выполнении очереди заданий, хранятся в базе данных, чтобы можно было устранить ошибки очереди работ.</span><span class="sxs-lookup"><span data-stu-id="6298a-127">Data that is generated when a job queue is run is stored in the database, so that you can troubleshoot job queue errors.</span></span>  
<span data-ttu-id="6298a-128">Для каждой записи очереди заданий вы можете просмотреть и изменить статус.</span><span class="sxs-lookup"><span data-stu-id="6298a-128">For each job queue entry, you can view and change the status.</span></span> <span data-ttu-id="6298a-129">При создании записи очереди работ она будет иметь статус **На удержании**.</span><span class="sxs-lookup"><span data-stu-id="6298a-129">When you create a job queue entry, its status is set to **On Hold**.</span></span> <span data-ttu-id="6298a-130">Можно установить состояние **Готово** и затем вернуть, например, состояние **На удержании**.</span><span class="sxs-lookup"><span data-stu-id="6298a-130">You can set the status to **Ready** and back to **On Hold**, for example.</span></span> <span data-ttu-id="6298a-131">В противном случае сведения о состоянии обновляются автоматически.</span><span class="sxs-lookup"><span data-stu-id="6298a-131">Otherwise, status information is updated automatically.</span></span>

<span data-ttu-id="6298a-132">В следующей таблице описываются значения поля **Статус**.</span><span class="sxs-lookup"><span data-stu-id="6298a-132">The following table describes the values of the **Status** field.</span></span>

| <span data-ttu-id="6298a-133">Статус</span><span class="sxs-lookup"><span data-stu-id="6298a-133">Status</span></span> | <span data-ttu-id="6298a-134">Описание</span><span class="sxs-lookup"><span data-stu-id="6298a-134">Description</span></span> |
|--|--|
| <span data-ttu-id="6298a-135">Готово</span><span class="sxs-lookup"><span data-stu-id="6298a-135">Ready</span></span> | <span data-ttu-id="6298a-136">Показывает, что операция очереди работ готова к выполнению.</span><span class="sxs-lookup"><span data-stu-id="6298a-136">Indicates that the job queue entry is ready to be run.</span></span> |
| <span data-ttu-id="6298a-137">В работе</span><span class="sxs-lookup"><span data-stu-id="6298a-137">In Process</span></span> | <span data-ttu-id="6298a-138">Показывает, что операция очереди работ не завершена.</span><span class="sxs-lookup"><span data-stu-id="6298a-138">Indicates that the job queue entry is in process.</span></span> <span data-ttu-id="6298a-139">Это поле обновляется, когда выполняется очередь работ.</span><span class="sxs-lookup"><span data-stu-id="6298a-139">This field is updated while the job queue is running.</span></span> |
| <span data-ttu-id="6298a-140">На удержании</span><span class="sxs-lookup"><span data-stu-id="6298a-140">On Hold</span></span> | <span data-ttu-id="6298a-141">По умолчанию.</span><span class="sxs-lookup"><span data-stu-id="6298a-141">Default.</span></span> <span data-ttu-id="6298a-142">Отображает статус операции очереди заданий, когда она создается.</span><span class="sxs-lookup"><span data-stu-id="6298a-142">Indicates the status of the job queue entry when it is created.</span></span> <span data-ttu-id="6298a-143">Выберите действие **Установить статус Готово** для изменения статуса на **Готово**.</span><span class="sxs-lookup"><span data-stu-id="6298a-143">Choose the **Set Status to Ready** action to change the status to **Ready**.</span></span> <span data-ttu-id="6298a-144">Выберите действие **Поставить на удержание** или **Приостановить**, чтобы вернуть статус **На удержании**.</span><span class="sxs-lookup"><span data-stu-id="6298a-144">Choose the **Set On Hold** or **Suspend** actions to change the status back to **On Hold**.</span></span> |
| <span data-ttu-id="6298a-145">Ошибка</span><span class="sxs-lookup"><span data-stu-id="6298a-145">Error</span></span> | <span data-ttu-id="6298a-146">Показывает, что произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="6298a-146">Indicates that there is an error.</span></span> <span data-ttu-id="6298a-147">Выберите **Показать ошибку** для просмотра сообщения об ошибке.</span><span class="sxs-lookup"><span data-stu-id="6298a-147">Choose **Show Error** to see the error message.</span></span> |
| <span data-ttu-id="6298a-148">Завершен</span><span class="sxs-lookup"><span data-stu-id="6298a-148">Finished</span></span> | <span data-ttu-id="6298a-149">Показывает, что операция очереди работ завершена.</span><span class="sxs-lookup"><span data-stu-id="6298a-149">Indicates that the job queue entry is complete.</span></span> |

### <a name="to-view-status-for-any-job"></a><span data-ttu-id="6298a-150">Просмотр статуса любого задания</span><span class="sxs-lookup"><span data-stu-id="6298a-150">To view status for any job</span></span>
1. <span data-ttu-id="6298a-151">Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Операции очереди работ**, затем выберите соответствующую ссылку.</span><span class="sxs-lookup"><span data-stu-id="6298a-151">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Job Queue Entries**, and then choose the related link.</span></span>
2. <span data-ttu-id="6298a-152">На странице **Операции очереди работ**, выберите запись очереди заданий, затем выберите действие **Операции журнала**.</span><span class="sxs-lookup"><span data-stu-id="6298a-152">On the **Job Queue Entries** page, select a job queue entry, and then choose the **Log Entries** action.</span></span>  

> [!TIP]
> <span data-ttu-id="6298a-153">В [!INCLUDE [prod_short](includes/prod_short.md)] Online вы также можете просмотреть статус записей очереди заданий, используя Application Insights в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6298a-153">With [!INCLUDE [prod_short](includes/prod_short.md)] online, you can also view the status of job queue entries by using Application Insights in Microsoft Azure.</span></span> <span data-ttu-id="6298a-154">Дополнительные сведения см. в разделе [Анализ телеметрии трассировки жизненного цикла очереди заданий](/dynamics365/business-central/dev-itpro/administration/telemetry-job-queue-lifecycle-trace) в справке [!INCLUDE [prod_short](includes/prod_short.md)] для разработчиков и материалах для администрирования.</span><span class="sxs-lookup"><span data-stu-id="6298a-154">For more information, see [Analyzing Job Queue Lifecycle Trace Telemetry](/dynamics365/business-central/dev-itpro/administration/telemetry-job-queue-lifecycle-trace) in the [!INCLUDE [prod_short](includes/prod_short.md)] Developer and Administration content.</span></span>

## <a name="the-my-job-queue-part"></a><span data-ttu-id="6298a-155">Часть "Моя очередь работ"</span><span class="sxs-lookup"><span data-stu-id="6298a-155">The My Job Queue Part</span></span>
<span data-ttu-id="6298a-156">Часть **Моя очередь работ** в вашем ролевом центре показывает операции очереди заданий, которые вы запустили, но они еще не завершены.</span><span class="sxs-lookup"><span data-stu-id="6298a-156">The **My Job Queue** part on your Role Center shows the job queues entries that you have started, but which are not yet finished.</span></span> <span data-ttu-id="6298a-157">По умолчанию часть не видна, поэтому ее следует добавить в ролевой центр.</span><span class="sxs-lookup"><span data-stu-id="6298a-157">By default, the part is not visible, so you have to add it to your Role Center.</span></span> <span data-ttu-id="6298a-158">Дополнительные сведения см. в разделе [Персонализация рабочей области](ui-personalization-user.md).</span><span class="sxs-lookup"><span data-stu-id="6298a-158">For more information, see [Personalize Your Workspace](ui-personalization-user.md).</span></span>  

<span data-ttu-id="6298a-159">В этой части отображается, какие документы с вашим кодом в поле **Код исполнителя** обрабатываются или помещены в очередь, включая те, которые связаны с фоновой обработкой.</span><span class="sxs-lookup"><span data-stu-id="6298a-159">The part shows which documents with your ID in the **Assigned User ID** field are being processed or are queued, including those related to background posting.</span></span> <span data-ttu-id="6298a-160">По этой части можно быстро понять, произошла ли ошибка при учете документа и есть ли ошибки в записи очереди заданий.</span><span class="sxs-lookup"><span data-stu-id="6298a-160">The part can tell you at a glance whether there has been an error in the posting of a document or if there are errors in a job queue entry.</span></span> <span data-ttu-id="6298a-161">Эта часть также позволяет отменить учет документа, если он не запущен.</span><span class="sxs-lookup"><span data-stu-id="6298a-161">The part also lets you cancel a document posting if it is not running.</span></span>

### <a name="to-view-an-error-from-the-my-job-queue-part"></a><span data-ttu-id="6298a-162">Просмотр ошибки из части "Моя очередь работ"</span><span class="sxs-lookup"><span data-stu-id="6298a-162">To view an error from the My Job Queue part</span></span>
1. <span data-ttu-id="6298a-163">Для операции со статусом **Ошибка** выберите действие **Показать ошибку**.</span><span class="sxs-lookup"><span data-stu-id="6298a-163">On an entry with the status **Error**, choose the **Show Error** action.</span></span>
2. <span data-ttu-id="6298a-164">Просмотрите сообщение об ошибке и устраните проблему.</span><span class="sxs-lookup"><span data-stu-id="6298a-164">Review the error message and fix the problem.</span></span>


## <a name="examples-of-what-can-be-scheduled-using-job-queue"></a><span data-ttu-id="6298a-165">Примеры того, что можно запланировать с помощью очереди заданий</span><span class="sxs-lookup"><span data-stu-id="6298a-165">Examples of what can be scheduled using job queue</span></span>

### <a name="schedule-reports"></a><span data-ttu-id="6298a-166">Планирование отчетов</span><span class="sxs-lookup"><span data-stu-id="6298a-166">Schedule reports</span></span>

<span data-ttu-id="6298a-167">Можно запланировать выполнение отчета или пакетного задания на заданную дату и время.</span><span class="sxs-lookup"><span data-stu-id="6298a-167">You can schedule a report or batch job to run at a specific date and time.</span></span> <span data-ttu-id="6298a-168">Запланированные отчеты и пакетные задания вводятся в очередь заданий и обрабатываются в запланированное время, как и другие задания.</span><span class="sxs-lookup"><span data-stu-id="6298a-168">Scheduled reports and batch jobs are entered in the job queue and processed at the scheduled time, similar to other jobs.</span></span> <span data-ttu-id="6298a-169">После выбора действия **Отправить** необходимо выбрать вариант **Запланировать**, а затем ввести такую информацию, как принтер, время и дата, а также повторение.</span><span class="sxs-lookup"><span data-stu-id="6298a-169">You choose the **Schedule** option after you choose the **Send to** action, and then you enter information such as printer, time and date, recurrence.</span></span>  

<span data-ttu-id="6298a-170">Дополнительные сведения см. в разделе [Планирование выполнения отчета](ui-work-report.md#ScheduleReport)</span><span class="sxs-lookup"><span data-stu-id="6298a-170">For more information, see [Scheduling a Report to Run](ui-work-report.md#ScheduleReport)</span></span>

### <a name="schedule-synchronization-between-prod_short-and-prod_short"></a><span data-ttu-id="6298a-171">Планирование синхронизации между [!INCLUDE[prod_short](includes/prod_short.md)] и [!INCLUDE[prod_short](includes/cds_long_md.md)]</span><span class="sxs-lookup"><span data-stu-id="6298a-171">Schedule synchronization between [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[prod_short](includes/cds_long_md.md)]</span></span>

<span data-ttu-id="6298a-172">Если вы интегрировали [!INCLUDE[prod_short](includes/prod_short.md)] с [!INCLUDE[prod_short](includes/cds_long_md.md)], вы можете использовать очередь заданий для планирования, если нужно синхронизировать записи, которые связаны между двумя бизнес-приложениями.</span><span class="sxs-lookup"><span data-stu-id="6298a-172">If you have integrated [!INCLUDE[prod_short](includes/prod_short.md)] with [!INCLUDE[prod_short](includes/cds_long_md.md)], you can use the job queue to schedule when you want to synchronize data for the records that you have coupled in the two business apps.</span></span> <span data-ttu-id="6298a-173">В зависимости от направления и правил, которые вы определили для интеграции, задания синхронизации могут также создавать новые записи в целевом приложении, чтобы они соответствовали записям в источнике.</span><span class="sxs-lookup"><span data-stu-id="6298a-173">Depending on the direction and rules that you have defined for the integration, the synchronization jobs can also create new records in the destination app to match those in the source.</span></span> <span data-ttu-id="6298a-174">Например, если продавец создает новый контакт в [!INCLUDE[crm_md](includes/crm_md.md)], задание синхронизации может создать этот же контакт для связанного продавца в [!INCLUDE[prod_short](includes/prod_short.md)].</span><span class="sxs-lookup"><span data-stu-id="6298a-174">For example, if a salesperson creates a new contact in [!INCLUDE[crm_md](includes/crm_md.md)], the synchronization job can create that contact for the coupled salesperson in [!INCLUDE[prod_short](includes/prod_short.md)].</span></span> <span data-ttu-id="6298a-175">Дополнительные сведения см. в разделе [Планирование синхронизации между Business Central и Dynamics 365 Sales](admin-scheduled-synchronization-using-the-synchronization-job-queue-entries.md).</span><span class="sxs-lookup"><span data-stu-id="6298a-175">For more information, see [Scheduling a Synchronization between Business Central and Dynamics 365 Sales](admin-scheduled-synchronization-using-the-synchronization-job-queue-entries.md).</span></span>

### <a name="schedule-the-posting-of-sales-and-purchase-orders"></a><span data-ttu-id="6298a-176">Планирование учета заказов на продажу и покупку</span><span class="sxs-lookup"><span data-stu-id="6298a-176">Schedule the posting of sales and purchase orders</span></span>

<span data-ttu-id="6298a-177">Очереди заданий — это эффективный инструмент для фонового планирования хода бизнес-процессов, например когда несколько пользователей пытаются выполнить учет заказов на продажу, но только один заказ может обрабатываться одновременно.</span><span class="sxs-lookup"><span data-stu-id="6298a-177">Job queues are an effective tool to schedule the running of business processes in the background, such as when multiple users are trying to post sales orders, but only one order can be processed at a time.</span></span>  

<span data-ttu-id="6298a-178">Дополнительные сведения см. в разделе [Настройка фонового учета с очередями работ](ui-batch-posting.md#to-set-up-background-posting-with-job-queues)</span><span class="sxs-lookup"><span data-stu-id="6298a-178">For more information, see [To set up background posting with job queues](ui-batch-posting.md#to-set-up-background-posting-with-job-queues)</span></span>

## <a name="see-also"></a><span data-ttu-id="6298a-179">См. также</span><span class="sxs-lookup"><span data-stu-id="6298a-179">See Also</span></span>

[<span data-ttu-id="6298a-180">Администрация</span><span class="sxs-lookup"><span data-stu-id="6298a-180">Administration</span></span>](admin-setup-and-administration.md)  
[<span data-ttu-id="6298a-181">Настройка Business Central</span><span class="sxs-lookup"><span data-stu-id="6298a-181">Setting Up Business Central</span></span>](setup.md)  
[<span data-ttu-id="6298a-182">Изменение базовых настроек</span><span class="sxs-lookup"><span data-stu-id="6298a-182">Change Basic Settings</span></span>](ui-change-basic-settings.md)  
[<span data-ttu-id="6298a-183">Анализ телеметрии трассировки жизненного цикла очереди заданий</span><span class="sxs-lookup"><span data-stu-id="6298a-183">Analyzing Job Queue Lifecycle Trace Telemetry</span></span>](/dynamics365/business-central/dev-itpro/administration/telemetry-job-queue-lifecycle-trace)  


[!INCLUDE[footer-include](includes/footer-banner.md)]