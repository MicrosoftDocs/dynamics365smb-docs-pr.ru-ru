---
title: Настройка компаний для синхронизации основных данных
description: 'Узнайте, как настроить одну или несколько компаний для синхронизации основных данных.'
author: brentholtorf
ms.author: bholtorf
ms.reviewer: bnielse
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.date: 01/25/2023
ms.custom: bap-template
ms.search.form: '7230, 7233, 5338, 7236, 672, 7234'
---

# Подготовка к синхронизации основных данных

Когда две или несколько организаций используют какую-либо часть одних и тех же основных данных, вы можете синхронизировать данные, а не добавлять их вручную в каждой организации. Например, синхронизацию данных особенно удобно использовать при создании новых дочерних организаций.

Основные данные включают в себя параметры и нетранзакционную информацию о бизнес-сущностях. Например, это могут быть клиенты, поставщики, товары и сотрудники. Данные обеспечивают контекст для бизнес-транзакций. Ниже приведены несколько примеров основных данных для клиента:

* Имя/название
* Идентификационный номер
* Адрес
* Условия оплаты
* Кредитный лимит

Синхронизация настраивается в дочерних компаниях. Используя модель извлечения, дочерние компании извлекают из исходной компании данные, необходимые им для ведения бизнеса. Вам необходимо настроить синхронизацию и синхронизировать данные в первый раз, больше ничего не требуется. Операции очереди заданий обновляют связанные записи в дочерних организациях, когда кто-либо изменяет данные в исходной организации.

## Данные синхронизируются только в одном направлении

Синхронизация в режиме извлечения данных позволяет отражать в дочерних компаниях изменения, производимые в исходной компании, но не наоборот. Дочерние компании не могут передавать данные в исходную компанию.

> [!NOTE]
> Хотя это возможно, мы не рекомендуем настраивать двунаправленную синхронизацию. То есть синхронизировать данные дочерних компаний с данными исходной компании и синхронизировать данные исходной компании с данными дочерних компаний. Синхронизация данных в обоих направлениях может приводить к конфликтам или нежелательной перезаписи данных.

## Перед началом работы

Для настройки синхронизации необходимо соблюдение следующих предварительных условий.

* Все компании должны находиться в одной и той же среде.
* Пользователь, который настраивает дочернюю организацию, должен иметь лицензию **Essential**, **Premium** или **Basic ISV**.

> [!NOTE]
> Лицензии Team Member и  Internal Administrator позволяют осуществлять доступ к записям, но не изменять их, поэтому их нельзя использовать для настройки синхронизации. Лицензия Delegated Admin не позволяет планировать фоновые задачи, поэтому вы не сможете завершить настройку.

## Указание исходной компании

Первым делом необходимо указать компанию, которая будет источником данных, и включить синхронизацию. Дочерние компании извлекают данные из исходной компании.

1. В дочерней компании нажмите значок ![Лампочка, открывающая функцию "Что вы хотите сделать?".](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Настройка управления основными данными**, а затем выберите связанную ссылку.
1. В поле **Исходная компания** укажите компанию, из которой вы будете извлекать изменения.
1. Включите переключатель **Включить синхронизацию**.
1. В диалоговом окне подтверждения нажмите **ОК**. [!INCLUDE [prod_short](includes/prod_short.md)] найдет таблицы и поля, которые можно извлечь из исходной компании.

Следующим шагом является включение синхронизации таблиц и полей.

## Включение или выключение таблиц и полей

Чтобы сэкономить ваше время, [!INCLUDE [prod_short](includes/prod_short.md)] предоставляет список таблиц, которые часто синхронизируются предприятиями. По умолчанию для этих таблиц синхронизация включена. Вы можете изменить, отключить или удалить их по своему усмотрению. Для дополнительной экономии времени в таблицах уже отключены некоторые поля, которые предположительно не имеют отношения к дочерней организации.

> [!NOTE]
> Если в исходной компании установлено одно или несколько расширений и дочерняя компания настраивает синхронизацию, страница **Таблицы синхронизации** включает таблицы из расширений, и вы можете получить доступ к их полям. Однако если исходная компания добавит расширение уже после настройки синхронизации, каждая дочерняя компания должна будет добавить таблицы вручную. Чтобы узнать больше о добавлении таблиц, перейдите в раздел [Добавление или удаление таблиц из списка таблиц синхронизации](#add-or-delete-tables-from-the-synchronization-tables-list). Чтобы узнать больше о расширении [!INCLUDE [prod_short](includes/prod_short.md)], перейдите к разделу [Разработка расширений в Visual Studio Code](/dynamics365/business-central/dev-itpro/developer/devenv-dev-overview#developing-extensions-in-visual-studio-code).

1. Выберите значок ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") введите **Настройка управления основными данными**, а затем выберите связанную ссылку.
1. Выберите действие **Таблицы синхронизации**.
1. Заполните соответствующим образом поля. [!INCLUDE [tooltip-inline-tip_md](../archive/SetupAndAdministration/includes/tooltip-inline-tip_md.md)]

> [!TIP]
> Поле **Фильтр таблиц** помогает выбрать, что именно должно синхронизироваться для таблицы. Вы можете настроить фильтры так, чтобы синхронизация производилась, только когда соблюдаются определенные условия. Например, вы можете добавить фильтры, указывающие, что должны синхронизироваться только поставщики в определенном регионе. Или клиенты, использующие определенную валюту.
>
> Если дочерняя компания уже имеет данные в своих таблицах, еще один хороший способ задать критерии для синхронизации — настроить связывание на основе совпадений. Чтобы узнать больше о связывании на основе совпадений, перейдите к разделу [Использование связывания на основе совпадений](#use-match-based-coupling).

1. Чтобы включить поля для таблицы, выберите таблицу, а затем выберите действие **Поля**.
1. Заполните соответствующим образом поля. [!INCLUDE [tooltip-inline-tip_md](../archive/SetupAndAdministration/includes/tooltip-inline-tip_md.md)]

> [!TIP]
> Быстрый способ включить или отключить несколько полей одновременно — выбрать их в списке, а затем использовать действие **Включить** или **Отключить**.

### Использование связывания на основе совпадений

Вы можете указать данные, которые должны синхронизироваться для таблицы, путем определения совпадений записей на основе критериев. На странице **Настройка управления основными данными** выберите действие **Связывание на основе совпадений**. Откроется страница **Выбор критериев связывания**. Вы можете определить следующие критерии для определения совпадения:

* Должна ли выполняться синхронизация после связывания записей.
* Должна ли создаваться новая запись в дочерней компании, если не удается найти уникальную несвязанную совпадающую запись с использованием критериев определения совпадения. Чтобы активировать эту возможность, включите действие **Создать новую, если найти совпадение не удается**.
* Какие поля должны использоваться для определения совпадения записей, и учитывается ли регистр при сопоставлении.
* Установите приоритетный порядок поиска записей, указав приоритет определения совпадения. [!INCLUDE [prod_short](includes/prod_short.md)] будет искать совпадение в порядке возрастания с учетом приоритета определения совпадения. Пустое значение эквивалентно приоритету 0, что является наивысшим приоритетом. Поля с приоритетом 0 считаются первыми.

## Синхронизация, производимая в первый раз

Когда все будет готово, на странице **Настройка управления основными данными** выберите действие **Запустить начальную синхронизацию**. На странице **Начальная синхронизация основных данных** выберите для каждой таблицы тип синхронизации, который вы хотите использовать.

* Если у вас уже есть записи как в исходной, так и в дочерней компаниях и вы хотите определить совпадение существующих записей, выберите действие **Использовать связывание на основе совпадений**. [!INCLUDE [prod_short](includes/prod_short.md)] определяет совпадения записей в дочерней организации с записями в исходной организации. Совпадения основаны на критериях совпадения, которые вам необходимо задать. Для нескольких таблиц по умолчанию в [!INCLUDE [prod_short](includes/prod_short.md)] уже определены совпадения между существующими записями по их первичному ключу, но вы можете изменить это, если хотите. Вы также можете разрешить процессу синхронизации создавать новые записи в дочерней компании, соответствующие записям в исходной компании, которых нет в дочерней компании. Чтобы узнать больше о связывании на основе совпадений, перейдите к разделу [Использование связывания на основе совпадений](#use-match-based-coupling).
* Если вы выберете **Запустить полную синхронизацию**, при синхронизации будут создаваться новые записи для всех еще не связанных записей в исходной компании. Например, использовать этот вариант удобно в следующих случаях:

    * У дочерней организации нет данных в таблице.
    * Вы хотите добавить записи из исходной организации без поиска совпадений.  

Выбрав нужный вариант синхронизации, выберите действие **Запустить все**, чтобы запустить синхронизацию.

Во время выполнения синхронизации в столбце **Статус задания** на странице **Начальная полная синхронизация основных данных** отображается статус каждой операции очереди заданий. Для обновления статуса нажмите клавишу **F5** на клавиатуре.

> [!TIP]
> Таблицы синхронизируются в заданном порядке. Если синхронизация зависнет на какой-либо таблице, выберите эту таблицу, а затем выберите действие **Перезапустить**, чтобы запустить синхронизацию снова.

Для получения сведений, таких как количество вставленных или измененных записей, выберите значение в столбце  **Статус задания**. Откроется страница **Просмотр — Задания синхронизации интеграции**. Для вставленных записей вы можете выбрать номер в столбце **Вставлено**, чтобы получить более подробную информацию о новых записях.

## Добавление или удаление таблиц из списка таблиц синхронизации

### Добавление таблицы

> [!IMPORTANT]
> Хотя в списке содержатся таблицы, содержащие транзакционные данные (например, таблицы, содержащие записи бухгалтерской книги), выбирать их не следует. Синхронизация работает только для таблиц, содержащих нетранзакционные данные.

1. Выберите значок ![Лампочка, которая открывает функцию «Что вы хотите сделать»](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Таблицы синхронизации**, а затем выберите связанную ссылку.
1. Выберите **Создать**, а затем выберите таблицу для добавления.
1. Заполните соответствующим образом поля. [!INCLUDE [tooltip-inline-tip_md](../archive/SetupAndAdministration/includes/tooltip-inline-tip_md.md)]

### Удаление таблицы

> [!NOTE]
> Если вы удалите запись в исходной компании, она не будет удалена также и в дочерней компании. Это помогает предотвратить нежелательную потерю данных. Дочерняя компания сама может удалить таблицу, если захочет.

1. Выберите значок ![Лампочка, которая открывает функцию «Что вы хотите сделать»](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Таблицы синхронизации**, а затем выберите связанную ссылку.
1. Выберите действие **Удалить**.

## Использование экспорта и импорта для обмена настройками синхронизации

Если вы настраиваете несколько дочерних организаций, для которых используются одинаковые или похожие параметры синхронизации, есть способ сэкономить время. Настройте одну дочернюю организацию, а затем экспортируйте ее параметры в XML-файл. Этот файл будет содержать все настроенные параметры, включая сопоставление таблиц и полей, а также критерии фильтрации. Затем этот файл можно импортировать в следующую дочернюю компанию. Чтобы импортировать или экспортировать настройку, на странице **Настройка управления основными данными** используйте действия **Импорт** или **Экспорт**.

## См. также

[Управление синхронизацией основных данных](admin-sync-master-data.md)