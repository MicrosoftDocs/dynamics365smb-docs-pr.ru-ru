---
title: Обновление валютных курсов
description: Отслеживание сумм в различных валютах с использованием кодов валюты, и разрешение Business Central помогать корректировать валютные курсы учтенных операций с помощью внешнего сервиса.
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.search.keywords: multiple currencies, adjust exchange rates
ms.date: 06/03/2021
ms.author: edupont
ms.openlocfilehash: 75f8f3ead0bdf0e09ca2484d1a0c91ee771cb837
ms.sourcegitcommit: 1aab52477956bf1aa7376fc7fb984644bc398c61
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "6184453"
---
# <a name="update-currency-exchange-rates"></a>Обновление валютных курсов

Поскольку сфера действия организаций включает все новые и новые страны и регионы, растет необходимость в изучении и составлении финансовых данных в нескольких валютах. Местная валюта (руб.) определяется на странице **Настройка ГК**, как описано в статье [Настройка финансов](finance-setup-finance.md). После определения местной валюты (руб.) она будет представлена как пустая валюта, поэтому, когда поле **Валюта** пустое, это означает, что валюта — руб.  

Затем вы должны установить коды валют для каждой валюты, которую вы используете, если вы покупаете или продаете в валютах, отличных от вашей местной валюты (руб.). Также банковские счета могут быть открыты с использованием валюты. Можно записывать проводки ГК в разных валютах, однако проводка ГК книги всегда будет проводиться во внутренней валюте (руб.).

> [!Important]
> Не создавайте код местной валюты одновременно на страницах **Настройка ГК** и **Валюты**. Это создаст путаницу между пустой валютой и кодом руб. в таблице валют, а банковские счета, клиенты или поставщики могут быть случайно созданы, некоторые с пустой валютой, а некоторые с кодом руб..

Главная книга настраивается на использование локальной валюты (руб.), но можно также задать использование другой валюты с назначением текущего валютного курса. В случае указания второй валюты в качестве так называемой дополнительной валюты отчетности [!INCLUDE[prod_short](includes/prod_short.md)] будет автоматически регистрировать суммы как в рублях, так и в дополнительной валюте по каждой операции в ГК и в других операциях, таких как операции НДС. Дополнительные сведения см. в разделе [Настройка дополнительной отчетной валюты](finance-how-setup-additional-currencies.md). Дополнительная валюта отчетности чаще всего используется для облегчения составления финансовой отчетности владельцам, проживающим в странах или регионах, с использованием валюты, отличной от местной валюты (руб.).

## <a name="currencies"></a>Валюты

Вы указываете коды валют в **Валюты**, включая дополнительную информацию и настройки, необходимые для каждого кода валюты.

> [!TIP]
> Создавайте валюты с международным кодом ISO в качестве кода, чтобы упростить работу с валютой в будущем.

|Поле|Описание|  
|---------------------------------|---------------------------------------|  
|**Код**|Идентификатор валюты.|
|**Описание**|Свободное текстовое описание валюты.|
|**Код ISO**|Международный трехбуквенный код валюты, определенный в ISO 4217.|
|**Цифровой код ISO**|Международный числовой код валюты, определенный в ISO 4217.|
|**Дата валютного курса**|Самая последняя дата фактического обменного курса.|
|**Валюта ЕС**|Указывает, является ли валюта валютой ЕС (Экономического и валютного союза), например евро.|
|**Счет реализованной прибыли**|Счет, на котором будет учитываться фактическая прибыль при получении платежей по дебиторской задолженности или регистрации фактического курса валюты по платежам в счет кредиторской задолженности. Для примера валютной проводки дебиторской задолженности см. пример под этой таблицей. |
|**Счет реализованного убытка**|Счет, на котором будет учитываться фактический убыток при получении платежей по дебиторской задолженности или регистрации фактического курса валюты по платежам в счет кредиторской задолженности. Для примера валютной проводки дебиторской задолженности см. пример под этой таблицей. |
|**Счет нереализованной прибыли**|Счет, на котором будет учтена теоретическая прибыль при корректировке валюты.|
|**Нереализованный убыток**|Счет, на котором будет учтен теоретический убыток при корректировке валюты.|
|**Точность округления суммы**|Некоторые валюты имеют другие форматы для сумм счетов, чем те, которые определены на странице **Настройка ГК**. Если вы измените точность округления сумм для валюты, все суммы счетов в этой валюте будут округлены с обновленной точностью.|
|**Десятичные знаки в сумме**|Некоторые валюты имеют другие форматы для сумм счетов, чем те, которые определены на странице **Настройка ГК**. Если вы измените десятичные знаки в сумме для валюты, все суммы счетов в этой валюте будут округлены с обновленным десятичными знаками.|
|**Тип округления счета**|Задает метод, который следует использовать, если суммы должны быть округлены. Варианты **Ближайшее**, **Вверх** и **Вниз**.|
|**Точность округления цены единицы**|Некоторые валюты имеют другие форматы для сумм единицы, чем те, которые определены на странице **Настройка ГК**. Если вы измените точность округления единиц для валюты, все суммы единиц в этой валюте будут округлены с обновленной точностью.|
|**Десятичные знаки в цене единицы**|Некоторые валюты имеют другие форматы для сумм единицы, чем те, которые определены на странице **Настройка ГК**. Если вы измените десятичные знаки в сумме единицы для валюты, все суммы единиц в этой валюте будут округлены с обновленным десятичными знаками.|
|**Точность округления при применении**|Определяет размер интервала, разрешенного как разница округления при взаимодействии операций в разных валютах.|
|**Округление при конвертации в руб. Дебетовый счет**|Определяет сведения о преобразовании, которые, помимо прочего, должны содержать дебетовый счет, если необходимо при помощи действия **Вставить строки округл. для конвертации в руб.** ввести в финансовые журналы строки коррекции для разниц округления.|
|**Округление при конвертации в руб. Кредитовый счет**|Определяет сведения о преобразовании, которые, помимо прочего, должны содержать кредитовый счет, если необходимо при помощи действия **Вставить строки округл. для конвертации в руб.** ввести в финансовые журналы строки коррекции для разниц округления.|
|**Дата последней коррекции**|Дата последней валютной корректировки.|
|**Дата последнего изменения**|Дата изменения настройки валюты.|
|**Отклонение в оплате %**|Максимальный % отклонения в оплате для этой валюты. Для получения дополнительной информации см. [Отклонение в оплате и отклонение от скидки оплаты](finance-payment-tolerance-and-payment-discount-tolerance.md). |
|**Макс. сумма отклонения оплаты**|Максимальная сумма отклонения в оплате для этой валюты. Для получения дополнительной информации см. [Отклонение в оплате и отклонение от скидки оплаты](finance-payment-tolerance-and-payment-discount-tolerance.md). |
|**Коэффициент курса валюты**|Задает отношение между валютой и местной валютой с помощью фактического курса валюты.|
|**Счет ГК реализ. прибыли**|Определяет счет ГК, на который будет учитываться прибыль, получаемая при корректировке валютных курсов между локальной валютой (руб.) и дополнительной отчетной валютой. Прибыли по курсовым разницам рассчитывается при запуске пакетного задания "Корректировка валютных курсов" для корректировки счетов главной книги. По умолчанию это поле может не отображаться. Его можно получить, настроив страницу.|
|**Счет ГК реализованного убытка**|Определяет счет ГК, на который будут учитываться убытки, получаемые при корректировке валютных курсов между локальной валютой (руб.) и дополнительной отчетной валютой. Прибыли по курсовым разницам рассчитывается при запуске пакетного задания "Корректировка валютных курсов" для корректировки счетов главной книги. По умолчанию это поле может не отображаться. Его можно получить, настроив страницу.|
|**Счет остаточной прибыли**|Задает счет ГК, который используется для учета сумм остаточной прибыли (разницы от округления), когда в области приложения главной книги используется дополнительная валюта отчетности. По умолчанию это поле может не отображаться. Его можно получить, настроив страницу.|
|**Счет остаточных убытков**|Задает счет ГК, который используется для учета сумм остаточного убытка (разницы от округления), когда в области приложения главной книги используется дополнительная валюта отчетности. По умолчанию это поле может не отображаться. Его можно получить, настроив страницу.|
|**Максимальная разрешенная разница НДС**|Максимально допустимая сумма разницы по НДС в этой валюте. Дополнительные сведения см. в [Ручная корректировка сумм НДС в документах продаж и покупок](finance-work-with-vat.md#correcting-vat-amounts-manually-in-sales-and-purchase-documents). По умолчанию это поле может не отображаться. Его можно получить, настроив страницу.|
|**Тип округления НДС**|Задает метод округления для корректировки сумм НДС вручную в документах купли-продажи. По умолчанию это поле может не отображаться. Его можно получить, настроив страницу.|

### <a name="example-of-a-receivable-currency-transaction"></a>Пример транзакции с валютой дебиторской задолженности

В следующем примере счет-фактура получен 1 января с валютной суммой 1000. В то время курс валюты составляет 1,123.

|Дата|Действие|Сумма в валюте|Курс документа|Сумма (руб.) документа|Курс корректировки|Сумма нереализованной прибыли|Курс оплаты|Сумма реализованного убытка|  
|-----|----------|------------|-----------|---------|-----------|-------------|---------|---------|
|1/1|**Cчет**|1000|1,123|1123|||||
|1/31|**Коррекция**|1000||1125|1,125|2|||
|2/15|**Сторнирование корректировки при оплате**|1000||||-2|||
|2/15|**Оплата**|1000||1120|||1,120|-3|

В конце месяца выполняется корректировка валюты, если курс валюты корректировки установлен на 1,125, что приводит к нереализованной прибыли в размере 2.

На момент платежа фактический курс валюты, зарегистрированный для банковской транзакции, составляет 1,120.

Здесь есть нереализованная транзакция, поэтому она будет сторнирована вместе с платежом.

Наконец, платеж регистрируется, и фактические убытки проводятся на счет реализованных убытков.

## <a name="available-currency-functions"></a>Доступные валютные функции

в следующей таблице описаны основные действия на странице **Валюты**. некоторые действия описаны в следующих разделах.  

|Меню|Действие|Описание|
|-------------|--------------|------------------------------|
|**Обработать**|**Предложить счета**|Используйте счета в других валютах. Будут вставлены наиболее часто используемые учетные записи.|
||Изменение отклонения в оплате|Изменение максимального отклонения в оплате и/или отклонения в оплате в процентах и фильтров по валюте. Для получения дополнительной информации см. [Отклонение в оплате и отклонение от скидки оплаты](finance-payment-tolerance-and-payment-discount-tolerance.md)|
||**Курсы валюты**|Просмотр обновленных валютных курсов для используемых валют.|
||**Корректировка валютных курсов**|Корректировка главной книги, а также бухгалтерских записей клиента, поставщика и банка, чтобы в них были отражены последние данные об изменении баланса, если со времени учета операций валютный курс изменился.|
||**Регистр коррекции валютных курсов**|Просмотрите результаты выполнения пакетного задания **Корректировка валютных курсов**. Строка создаётся для каждой валюты или для каждой комбинации валюты и учётной группы, которые включены в коррекцию.|
|**Служба валютных курсов**|**Службы валютных курсов**|Просмотр или изменение параметров служб, которые настроены для получения обновленных валютных курсов при выборе действия **Обновить валютные курсы**.|
||**Обновить валютные курсы**|Получение последних валютных курсов от поставщика службы.|
|**Отчеты**|**Сальдо в иностранной валюте**|Представление балансов для всех клиентов и поставщиков в иностранных и локальной валютах (в рублях). В отчете показывается два баланса в рублях. Одно значение — сальдо в иностранной валюте, преобразованное в локальную валюту путем использования валютного курса на дату транзакции. Другое значение — сальдо в иностранной валюте, преобразованное в локальную валюту путем использования валютного курса рабочей даты.|

## <a name="exchange-rates"></a>Валютные курсы

Обменные курсы — это инструмент для расчета стоимости каждой валютной операции в национальной валюте (руб.). На странице **Валютные курсы** содержатся следующие поля:

|Поле|Описание|  
|---------------------------------|---------------------------------------|  
|**Дата начала**|Дата вступления в силу курса валюты|  
|**код валюты;**|Код валюты, связанный с этим валютным курсом|  
|**Связанный код валюты**|Если эта валюта является частью расчета валюты треугольника, то здесь можно указать соответствующий код валюты.|  
|**Сумма валютного курса**|Сумма валютного курса — это курс, который будет использоваться для кода валюты, выбранного в строке. Обычно 1 или 100|  
|**Связанный курс валюты — сумма**|Сумма связанного валютного курса относится к курсу, который будет использоваться для связанного кода валюты|  
|**Корр. курс валюты**|Сумма корректировочного курса валюты — это курс, который следует использовать для кода валюты, выбранного в строке для использования пакетного задания **Корректировка валютных курсов**|  
|**Связанный корр. курс валюты — сумма**|Сумма связанного корректировочного курса валюты — это курс, который следует использовать для кода валюты, выбранного в строке для использования пакетного задания **Корректировка валютных курсов**|  
|**Фикс. курс валюты — сумма**|Указывает, можно ли изменять валютный курс в счетах и строках журнала.|  

В целом значения полей **Сумма валютного курса** и **Связанный курс валюты - сумма** используются в качестве курса валюты по умолчанию для всех новых документов дебиторской и кредиторской задолженности, которые создаются в будущем. Документу присваивается курс валюты в соответствии с текущей рабочей датой.  

> [!Note]
> Фактический курс валюты будет рассчитан по следующей формуле:
> 
> `Currency Amount = Amount / Exchange Rate Amount * Relational Exch. Rate Amount`

Сумма корректировки валютного курса или сумма относительного валютного курса корректировки будет использоваться для обновления всех открытых банковских, дебиторских или кредиторских транзакций.  

> [!Note]
> Фактический курс валюты будет рассчитан по следующей формуле:
> 
> `Currency Amount = Amount / Adjustment Exch. Rate Amount * Relational Adjmt Exch. Rate Amt`

## <a name="adjusting-exchange-rates"></a>Коррекция валютных курсов

В связи с постоянным колебанием курсов валют, возникает необходимость в периодической корректировке дополнительной валюты. Если данные корректировки не будут производиться, суммы, конвертированные из иностранных (или дополнительных) валют и разнесенные в главной книге в рублях, могут оказаться неточными. К тому же, ежедневные операции, учтенные до момента ввода в программу ежедневного курса валют, следует обновлять после ввода информации о ежедневном курсе валют.

Пакетное задание **Коррекция валютных курсов** используется для корректировки вручную курсов валют учтенных операций по клиентам, поставщикам и банковским счетам. Также может быть выполнена корректировка сумм в дополнительной отчетной валюте в операциях ГК.  

> [!TIP]
> Вы можете воспользоваться службой для автоматического обновления курсов валют в системе. Дополнительные сведения см. в разделе [Настройка служб валютных курсов](finance-how-update-currencies.md#to-set-up-a-currency-exchange-rate-service). Однако это не приводит к корректировке обменных курсов по уже разнесенным проводкам. Чтобы обновить обменные курсы в опубликованных записях, используйте пакетное задание **Корректировка валютных курсов**.

### <a name="effect-on-customers-and-vendors"></a>Влияние на клиентов и поставщиков

Для счетов клиента и поставщика пакетное задание корректирует курсовую разницу, используя обменный курс на дату учета, указанную в пакетном задании. Пакетное задание рассчитывает разницу для отдельных валютных балансов и отражает суммы на счету ГК, указанном в поле **Счет нереализованной прибыли** или в поле **Счет нереализованных убытков** на странице **Валюты**. Балансирующие операции автоматически учитываются на счетах клиентов/поставщиков в главной книге.

Пакетное задание обрабатывает все открытые операции книги клиентов и поставщиков. В случае курсовой разницы пакетное задание создает новую детальную операцию книги клиента или поставщика, которая отражает скорректированную сумму по операции книги клиента или поставщика.

#### <a name="dimensions-on-customer-and-vendor-ledger-entries"></a>Измерения в книге операции клиентов и поставщиков
Корректирующим операциям присваиваются данные из операций книги клиентов или поставщиков, а произведенные изменения отражаются по величинам измерений.

### <a name="effect-on-bank-accounts"></a>Влияние на банковские счета
Для банковских счетов пакетное задание корректирует курсовую разницу, используя обменный курс на дату учета, указанную в пакетном задании. Пакетное задание рассчитывает разницу для каждого банковского счета, имеющего код валюты, и отражает суммы на счету ГК, указанном в поле **Счет реализованной прибыли** или поле **Счет реализованных убытков** на странице **Валюты**. Балансирующие операции автоматически учитываются на банковских счетах Главной книги, указанных в учетных группах банковских счетов. Пакетное задание рассчитывает одну операцию на валюту для каждой группы счетов.

#### <a name="dimensions-on-bank-account-entries"></a>Измерения в операциях банковских счетов
Корректирующим операциям для счета главной книги банковского счета и для счета прибылей/убытков присваиваются стандартные измерения банковского счета.

### <a name="effect-on-gl-accounts"></a>Влияние на счета ГК
Если учет ведется в дополнительной отчетной валюте, можно с помощью пакетного задания создать новые операции ГК для коррекции курсов между локальной и дополнительной отчетной валютой. Пакетное задание рассчитывает разницы для каждой операции ГК и корректирует их в зависимости от содержимого поля **Коррекция валютного курса** для каждого счета ГК.

##### <a name="dimensions-on-gl-account-entries"></a>Измерения в операциях счетов ГК
Корректирующим операциям присваиваются стандартные измерения из счетов, в которых они отражаются.

> [!Important]
> Перед использованием этого пакетного задания необходимо ввести корректировки валютных курсов, которые будут использоваться для коррекции сальдо в иностранных валютах. Это делается на странице **Валютные курсы**.<br><br>  

> [!Video https://www.microsoft.com/videoplayer/embed/RE3Q24s?rel=0]

## <a name="to-set-up-a-currency-exchange-rate-service"></a>Настройка служб валютных курсов
Для обновления валютных курсов можно использовать внешнюю службу, например FloatRates.

1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Службы валютных курсов**, затем выберите соответствующую ссылку.
2. Выберите действие **Создать**.
3. На странице **Служба валютных курсов** заполните требуемые поля. [!INCLUDE[tooltip-inline-tip](includes/tooltip-inline-tip_md.md)]
4. Чтобы включить службу включите переключатель **Включено**.

> [!NOTE]
> В следующем видео показан пример подключения к службе валютного курса на примере Европейского центрального банка. В сегменте, который описывает, как настроить сопоставления полей, параметр в столбце **Источник** для **Родительский узел кода валюты** вернет только первую найденную валюту. Настройка должна быть **/gesmes:Envelope/Code/Code/Code**.

<br><br>  
  
> [!Video https://www.microsoft.com/en-us/videoplayer/embed/RE4A1jy?rel=0]

## <a name="to-update-currency-exchange-rates-through-a-service"></a>Обновление валютных курсов с использованием службы
1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Валюты**, затем выберите соответствующую ссылку.
2. Выберите действие **Обновить валютные курсы**.

Значение в поле **Валютный курс** на странице **Валюты** обновляется до самого актуального валютного курса.

## <a name="see-related-training-at-microsoft-learn"></a>См. соответствующее обучение на странице [Microsoft Learn](/learn/paths/use-multiple-currencies-dynamics-365-business-central/)

## <a name="see-also"></a>См. также
[Настройка дополнительной отчетной валюты](finance-how-setup-additional-currencies.md)  
[Закрытие года и периодов](year-close-years-periods.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)


[!INCLUDE[footer-include](includes/footer-banner.md)]
