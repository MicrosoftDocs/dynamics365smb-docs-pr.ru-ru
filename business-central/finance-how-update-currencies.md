---
title: Обновление курсов валют (содержит видео)
description: 'Если вы отслеживаете суммы в различных валютах, можно разрешить Business Central помогать корректировать валютные курсы учтенных операций с помощью внешнего сервиса.'
author: brentholtorf
ms.topic: conceptual
ms.search.keywords: 'multiple currencies, adjust exchange rates, FX rates'
ms.search.form: '5, 118'
ms.date: 03/15/2022
ms.author: bholtorf
---
# <a name="update-currency-exchange-rates"></a>Обновление валютных курсов

Вы можете определить различные валюты в [!INCLUDE [prod_short](includes/prod_short.md)], например, если вы торгуете в валюте, отличной от вашей местной валюты. Затем, чтобы помочь вам отслеживать изменения курсов обмена валют, вы можете управлять валютами вручную или настроить службу курсов обмена валют.

## <a name="currencies"></a>Валюты

> [!TIP]  
> В [!INCLUDE[prod_short](includes/prod_short.md)] если вы ищете информацию о курсах обмена иностранной валюты (FX) или исторических курсах в режиме реального времени, вы обнаружите, что это называется валютой. В дополнение к этой статье см. также [Настройка дополнительной отчетной валюты](finance-how-setup-additional-currencies.md).

[!INCLUDE [finance-currencies-def](includes/finance-currencies-def.md)]

Вы указываете коды валют в списке **Валюты**, включая дополнительную информацию и настройки, необходимые для каждого кода валюты. Дополнительные сведения см. в разделе [Валюты](finance-set-up-currencies.md#curr)

### <a name="example-of-a-receivable-currency-transaction"></a>Пример транзакции с валютой дебиторской задолженности

[!INCLUDE [finance-currencies-example](includes/finance-currencies-example.md)]

## <a name="exchange-rates"></a>Валютные курсы

Обменные курсы — это инструмент для расчета стоимости каждой валютной операции в местной валюте (МВ). На странице **Валютные курсы** содержатся следующие поля:

|Поле|Описание|  
|---------------------------------|---------------------------------------|  
|**Дата начала**|Дата вступления в силу курса валюты|  
|**код валюты;**|Код валюты, связанный с этим валютным курсом|  
|**Связанный код валюты**|Если эта валюта является частью расчета валюты треугольника, то здесь можно указать соответствующий код валюты.|  
|**Сумма валютного курса**|Сумма валютного курса — это курс, который будет использоваться для кода валюты, выбранного в строке. Обычно 1 или 100|  
|**Связанный курс валюты — сумма**|Сумма связанного валютного курса относится к курсу, который будет использоваться для связанного кода валюты|  
|**Корр. курс валюты**|Сумма корректировочного курса валюты — это курс, который следует использовать для кода валюты, выбранного в строке для использования пакетного задания **Корректировка валютных курсов**|  
|**Связанный корр. курс валюты — сумма**|Сумма связанного корректировочного курса валюты — это курс, который следует использовать для кода валюты, выбранного в строке для использования пакетного задания **Корректировка валютных курсов**|  
|**Фикс. курс валюты — сумма**|Указывает, можно ли изменять валютный курс в счетах и строках журнала.|  

В целом значения полей **Сумма валютного курса** и **Связанный курс валюты - сумма** используются в качестве курса валюты по умолчанию для всех новых документов дебиторской и кредиторской задолженности, которые создаются в будущем. Документу присваивается курс валюты в соответствии с текущей рабочей датой.  

> [!Note]
> Фактический курс валюты будет рассчитан по следующей формуле:
>
> `Currency Amount = Amount / Exchange Rate Amount * Relational Exch. Rate Amount`

Сумма корректировки валютного курса или сумма относительного валютного курса корректировки будет использоваться для обновления всех открытых банковских, дебиторских или кредиторских транзакций.  

> [!Note]
> Фактический курс валюты будет рассчитан по следующей формуле:
>
> `Currency Amount = Amount / Adjustment Exch. Rate Amount * Relational Adjmt Exch. Rate Amt`

## <a name="adjusting-exchange-rates"></a>Коррекция валютных курсов

В связи с постоянным колебанием курсов валют, возникает необходимость в периодической корректировке дополнительной валюты. Если данные корректировки не будут производиться, суммы, конвертированные из иностранных (или дополнительных) валют и разнесенные в главной книге в МВ, могут оказаться неточными. К тому же, ежедневные операции, учтенные до момента ввода в программу ежедневного курса валют, следует обновлять после ввода информации о ежедневном курсе валют.

Пакетное задание **Коррекция валютных курсов** используется для корректировки вручную курсов валют учтенных операций по клиентам, поставщикам и банковским счетам. Также может быть выполнена корректировка сумм в дополнительной отчетной валюте в операциях ГК.  

> [!TIP]
> Вы можете воспользоваться службой для автоматического обновления курсов валют в системе. Дополнительные сведения см. в разделе [Настройка служб валютных курсов](finance-how-update-currencies.md#to-set-up-a-currency-exchange-rate-service). Однако это не приводит к корректировке обменных курсов по уже разнесенным проводкам. Чтобы обновить обменные курсы в опубликованных записях, используйте пакетное задание **Корректировка валютных курсов**.

Вы можете предварительно просмотреть влияние, которое корректировка окажет на публикацию, прежде чем она будет опубликована, выбрав **Предварительный просмотр** на странице **Корректировка валютных курсов**. Кроме того, вы можете выбрать, будет ли учет в главной книге подробным (по операциям) или сводным (по валюте), выбрав **Суммировать операции**. Вы также можете указать, как обрабатывать измерения для проводок нереализованных прибылей и убытков, выбрав один из следующих параметров в поле **Перенос значений измерений**:  

- **Исходная операция**: записи ГК для нереализованных прибылей и убытков будут иметь значения измерений, перенесенные из скорректированной операции.
- **По счету ГК**: записи ГК для нереализованных прибылей и убытков будут иметь значения измерений, перенесенные из исходной операции настроек измерения нереализованных прибылей и убытков счета ГК.
- **Без передачи**: записи ГК для нереализованных прибылей и убытков не будут иметь значений измерений.

### <a name="effect-on-customers-and-vendors"></a>Влияние на клиентов и поставщиков

Для счетов клиента и поставщика пакетное задание корректирует курсовую разницу, используя обменный курс на дату учета, указанную в пакетном задании. Пакетное задание рассчитывает разницу для отдельных валютных балансов и отражает суммы на счету ГК, указанном в поле **Счет нереализованной прибыли** или в поле **Счет нереализованных убытков** на странице **Валюты**. Балансирующие операции автоматически учитываются на счетах клиентов/поставщиков в главной книге.

Пакетное задание обрабатывает все открытые операции книги клиентов и поставщиков. В случае курсовой разницы пакетное задание создает новую детальную операцию книги клиента или поставщика, которая отражает скорректированную сумму по операции книги клиента или поставщика.

#### <a name="dimensions-on-customer-and-vendor-ledger-entries"></a>Измерения в книге операции клиентов и поставщиков

Корректирующим операциям присваиваются данные из операций книги клиентов или поставщиков, а произведенные изменения отражаются по величинам измерений.

### <a name="effect-on-bank-accounts"></a>Влияние на банковские счета

Для банковских счетов пакетное задание корректирует курсовую разницу, используя обменный курс на дату учета, указанную в пакетном задании. Пакетное задание рассчитывает разницу для каждого банковского счета, имеющего код валюты, и отражает суммы на счету ГК, указанном в поле **Счет реализованной прибыли** или поле **Счет реализованных убытков** на странице **Валюты**. Балансирующие операции автоматически учитываются на банковских счетах Главной книги, указанных в учетных группах банковских счетов. Пакетное задание рассчитывает одну операцию на валюту для каждой группы счетов.

#### <a name="dimensions-on-bank-account-entries"></a>Измерения в операциях банковских счетов

Корректирующим операциям для счета главной книги банковского счета и для счета прибылей/убытков присваиваются стандартные измерения банковского счета.

### <a name="effect-on-gl-accounts"></a>Влияние на счета ГК
Если учет ведется в дополнительной отчетной валюте, можно с помощью пакетного задания создать новые операции ГК для коррекции курсов между МВ и дополнительной отчетной валютой. Пакетное задание рассчитывает разницы для каждой операции ГК и корректирует их в зависимости от содержимого поля **Коррекция валютного курса** для каждого счета ГК.

##### <a name="dimensions-on-gl-account-entries"></a>Измерения в операциях счетов ГК
Корректирующим операциям присваиваются стандартные измерения из счетов, в которых они отражаются.

> [!Important]
> Перед использованием этого пакетного задания необходимо ввести корректировки валютных курсов, которые будут использоваться для коррекции сальдо в иностранных валютах. Это делается на странице **Валютные курсы**.<br><br>  

> [!Video https://www.microsoft.com/videoplayer/embed/RE3Q24s?rel=0]

## <a name="to-set-up-a-currency-exchange-rate-service"></a>Настройка служб валютных курсов
Для обновления валютных курсов можно использовать внешнюю службу, например FloatRates. 

> [!NOTE]
> Большинство служб валютных курсов предоставляют данные, совместимые с процессом импорта в [!INCLUDE[prod_short](includes/prod_short.md)]. Однако иногда данные форматируются по-другому, и вам нужно будет настроить процесс импорта. Для этого вы можете использовать платформу обмена данными, добавив свой собственный codeunit. Для этого вам, вероятно, понадобится помощь разработчика. Дополнительные сведения см. в разделе [Настройка определений обмена данными](across-how-to-set-up-data-exchange-definitions.md).

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Службы валютных курсов**, а затем выберите соответствующую связь.
2. Выберите действие **Создать**.
3. На странице **Служба валютных курсов** заполните требуемые поля. [!INCLUDE[tooltip-inline-tip](includes/tooltip-inline-tip_md.md)]
4. Чтобы включить службу включите переключатель **Включено**.

> [!NOTE]
> В следующем видео показан пример подключения к службе валютного курса на примере Европейского центрального банка. В сегменте, который описывает, как настроить сопоставления полей, параметр в столбце **Источник** для **Родительский узел кода валюты** вернет только первую найденную валюту. Настройка должна быть `/gesmes:Envelope/Code/Code/Code`.

<br><br>  
  
> [!Video https://www.microsoft.com/en-us/videoplayer/embed/RE4A1jy?rel=0]

## <a name="to-update-currency-exchange-rates-through-a-service"></a>Обновление валютных курсов с использованием службы
1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Валюты**, а затем выберите связанную ссылку.
2. Выберите действие **Обновить валютные курсы**.

Значение в поле **Валютный курс** на странице **Валюты** обновляется до самого актуального валютного курса.

## <a name="see-also"></a>См. также

[Валюты в Business Central](finance-currencies.md)  
[Настройка валют](finance-set-up-currencies.md)  
[Настройка дополнительной отчетной валюты](finance-how-setup-additional-currencies.md)  
[Закрытие года и периодов](year-close-years-periods.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)


[!INCLUDE[footer-include](includes/footer-banner.md)]
