---
title: 'Выполнение полного планирования, MPS или MRP'
description: 'Система планирования может рассчитать Сводный производственный план (MPS) или План потребностей в материалах (MRP) (по запросу), либо оба плана одновременно.'
author: brentholtorf
ms.topic: conceptual
ms.search.form: '99000852, 99000860'
ms.date: 01/24/2024
ms.author: bholtorf
ms.reviewer: andreipa
ms.custom: bap-template
ms.service: dynamics-365-business-central
---
# <a name="run-full-planning-mps-or-mrp"></a>Выполнение полного планирования, MPS или MRP

Под терминами «запуск журнала планирования» или «выполнение MRP» понимается расчет сводного производственного плана и потребностей в материалах. Расчет основывается на фактическом и прогнозируемом спросе. Система планирования может рассчитать Сводный производственный план (MPS) или План потребностей в материалах (MRP) (по запросу), либо оба плана одновременно.  

- MPS — это расчет основного плана производства на основании фактического требования и прогноза спроса. Вычисление MPS используется для товаров со строкой прогноза или заказа на продажу. Эти товары называются "товары MPS" и определяются динамически после запуска расчета.  
- MRP — это расчет потребности в материалах на основании фактического требования компонентов и прогноза спроса на уровне компонентов. MRP рассчитывается только для товаров, не относящихся к товарам MPS. План MRP предназначен для составления формальных графиков по каждому товару, обеспечивающих поставку нужных товаров в нужное время в нужное место и в нужном количестве.  

Используемые для MPS и для MRP алгоритма планирования идентичны. В основе алгоритмов лежит зачет спроса и предложения, повторное использование существующих заказов на пополнение запасов и указания. Процесс системы планирования выявляет, что требуется или потребуется в будущем (спрос), и что есть в наличии или ожидается (предложение). Когда эти количества засчитываются друг против друга, [!INCLUDE[prod_short](includes/prod_short.md)] генерирует указания. Указания — это предложения о создании нового заказа, изменении заказа (количества или даты) или отмене заказа. Под термином "заказ" следует понимать заказы на покупку, сборочные заказы, производственные заказы и заказы на перемещение.

Связи, создаваемые механизмом планирования между спросом и предложением, можно отслеживать на странице **Трассировка заказов**. Дополнительные сведения см. в разделе [Отслеживание связей между спросом и предложением](production-how-track-demand-supply.md).

Соответствующие результаты планирования зависят от настроек в карточках товара, сборочных спецификациях и маршрутах.  

## <a name="methods-for-generating-a-plan"></a>Методы генерации плана

- **Вычислить регенеративный план** — обработка или регенерация материального плана. Этот процесс начинается с удаления всех запланированных заказов загружаются которые в текущий момент. Все товары в базе данных перепланируются.  
- **Вычислить план оборота**: обработка плана нетто-изменений. В плане нетто-изменений товары рассматриваются как результат изменений двух типов:  
   - **Изменения спроса/предложения:** эти изменения включают изменения количества в заказах на продажу, прогнозах спроса, сборочных заказах, производственных заказах и заказы на покупку. Незапланированное изменение на уровне склада также считается качественным изменением.  
   - **Изменения параметров планирования:** сюда входят изменения резервного запаса, точки повторного заказа, маршрутов, спецификаций и изменения расчета горизонта планирования или времени упреждения.  
- **Получить указания:** служит в качестве инструмента краткосрочного планирования и генерирует указания, чтобы привлечь внимание пользователя к изменениям, внесенным с момента последнего расчета регенеративного плана или плана нетто-изменений.  

Для каждого из методов планирования [!INCLUDE[prod_short](includes/prod_short.md)] генерирует операции журнала планирования исходя из бесконечных производственных мощностей. Производственные мощности рабочего центра и машинного центра при составлении планов не учитываются.  

> [!IMPORTANT]  
> Вычисление регенеративного плана — это наиболее распространенный процесс. Однако процессы вычисления плана и получения указаний могут использоваться для выполнения процесса «Вычислить план оборота».  
>
> Вы можете запускать процесс «Получить указания» между запусками процессов вычисления регенеративного плана и плана нетто-изменений для получения мгновенного представления о результате изменений в графике. Однако этот процесс не заменяет собой процессы вычисления регенеративного плана или плана нетто-изменений.  

## <a name="to-calculate-the-planning-worksheet"></a>Расчет журнала планирования
  
1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Журналы планирования**, а затем выберите связанную ссылку.  
2. Выберите действие **Вычислить регенеративный план** для открытия страницы **Вычислить план**.  
3. На экспресс-вкладке **Параметры** заполните поля, как описано в следующей таблице.  

    |Поле|Описанием|  
    |---------------------------------|---------------------------------------|  
    |**MPS**|Расчет сводного плана производства. При вычислениях учитываются товары с открытыми заказами на продажу и/или прогнозы спроса. <br/>Если существует другой спрос на эти товары, например страховой запас, точка дозаказа или открытые строки производственных компонентов, эти строки включаются в расчет MPS, чтобы гарантировать, что система планирования работает с полным профилем запасов.  |  
    |**MRP**|Расчет плана потребностей в материалах. При вычислениях учитываются товары с зависимыми потребностями. Обычно MPS и MRP выполняются одновременно. Для одновременного запуска MPS и MRP необходимо установить флажок в поле **Совместный расчет MPS/MRP** на экспресс-вкладке **Планирование** на странице **Настройка модуля «Производство»**.|  
    |**Дата начала**|Оценка наличия запасов. Если запасы товара в наличии ниже точки повторного заказа, система планирует заказ на пополнение запасов с этой даты. Если запасы товара ниже страхового запаса (на начальную дату), система выполняет обратное планирование для создания заказа на пополнение запасов с датой выполнения на заказа начала планирования.|  
    |**Дата окончания**|Дата окончания горизонта планирования. Ни спрос, ни предложение после этой даты не учитываются. Если цикл дозаказа товара превышает дату окончания, эффективный горизонт планирования для этого товара равен дата заказа плюс цикл дозаказа.<br/><br/> Горизонт планирования - это срок, на который распространяется план. Если горизонт слишком короткий, товары с более длительным временем упреждения не будут заказаны вовремя. Если горизонт слишком большой, уходит слишком много времени на просмотр и обработку информации, которая может измениться до того времени, как она потребуется. Можно задать один горизонт планирования для производства и более длительный для закупок, хотя это не обязательно. Горизонт планирования для закупок и производства должен быть таким, чтобы покрывал общее время упреждения для компонентов.|  
    |**Остановить и показать первую ошибку**|Установите этот флажок, если необходимо, чтобы планирование останавливалось при возникновении ошибки. Отобразится сообщение со сведениями об этой ошибке. Если есть ошибка, в журнале планирования будут присутствовать только правильные строки, сгенерированные до возникновения ошибки. Если это поле не выбрано, пакетное задание **Вычислить план** будет выполняться до завершения. Ошибки не приведут к прерыванию пакетного задания. При возникновении одной или нескольких ошибок по завершении отобразится сообщение о том, сколько товаров было затронуто ошибками. Откроется страница **Журнал ошибок планирования**, содержащая дополнительные сведения об ошибке и ссылки на затронутые карточки товара.|  
    |**Использовать прогноз**|Выберите прогноз, который следует включить в качестве спроса при запуске пакетного задания планирования. Прогноз по умолчанию настраивается на экспресс-вкладке **Планирование** на странице **Производство - настройка**.|  
    |**Исключить предыдущий прогноз**|Определите, какая часть выбранного прогноза включается в процедуру планирования, введя дату, ранее которой прогноз спроса не включаются.|  
    |**Учесть параметры планирования для предупреждений об исключениях**|По умолчанию это поле выбрано.<br/><br/> Поставка в строках планирования с предупреждениями обычно не изменяется в соответствии с параметрами планирования. Вместо этого, система планирования только предлагает поставку для покрытия конкретного требуемого количества. Однако можно выполнить настройку таким образом, чтобы использовались определенные параметры планирования для строк планирования с определенными предупреждениями.<br/><br/>|  

4. На экспресс-вкладке **Товар** задайте фильтры для выполнения планирования по товару, описанию товара или складу.  
5. Нажмите кнопку **ОК**. Пакетное задание запустится, и в журнал планирования будут добавлены строки планирования.  

## <a name="to-perform-action-messages"></a>Выполнение сообщений о действиях
  
1. На странице **Журнал планирования** выберите действие **Выполнить указание**.  
2. На экспресс-вкладке **Параметры** укажите, как создать запасы. Введите значения в поля, как описано в следующей таблице.  

    |Поле|Описанием|  
    |---------------------------------|---------------------------------------|  
    |**Производственный заказ**|Укажите, как должны создаваться производственные заказы. Это можно сделать непосредственно из предложений по строкам планирования. Можно создавать спланированные и подтвержденные производственные заказы.|  
    |**Заказ на сборку**|Укажите, как должны создаваться сборочные заказы. Это можно сделать непосредственно из предложений по строкам планирования.|  
    |**Заказ на покупку**|Укажите, как должны создаваться заказы на покупку. Это можно сделать непосредственно из предложений по строкам планирования.<br/><br/> Если вы решили скопировать предложения плана для заказов на покупку в заявку, выберите шаблон и имя листа.|  
    |**Заказ на перемещение**|Укажите, как должны создаваться заказы на перемещение. Это можно сделать непосредственно из предложений по строкам планирования.<br/><br/> Если вы решили скопировать предложения плана для заказов на перемещение в заявку, выберите шаблон и имя листа.|  
    |**Объединить заказы на перемещение**|Выберите, следует ли объединять заказы на перемещение.|  
    |**Остановить и показать первую ошибку**|Установите этот флажок, чтобы пакетное задание **Выполнение указаний - план.** останавливалось в случае возникновения ошибки. Отобразится сообщение со сведениями об этой ошибке. В случае ошибки только по строкам планирования, обработанным до обнаружения этой ошибки, будут созданы заказы на поставку.|  

3. На экспресс-вкладке **Строка планирования** можно устанавливать фильтры для ограничения объема указаний.  
4. Нажмите кнопку **ОК**.  

После выполнения сообщения о действии пакетное задание удаляет строки в журнале планирования. Другие строки остаются в журнале планирования до принятия в дальнейшем или удаления. Строки можно также удалять вручную.  

## <a name="action-messages"></a>Сообщения о действиях
  
Указания генерируются системой трассировки заказов, если не удается достичь баланса в рамках существующей сети заказов. Их рассматривать как предложение обработать изменения, которые восстановят равновесие между спросом и предложением.  

Создание сообщений о действиях происходит поочередно на каждом уровне с учетом низкоуровневого кода каждого товара. Это гарантирует учет всех товаров, на которые влияют изменения в спросе или поставке в прошлом или в будущем.  

Чтобы отсечь незначительные, избыточные или неважные указания, можно установить фильтры, которые пропускают указания только о тех изменениях, которые превышают заданное количество или число дней.  

Просмотрев указания и определив, следует ли принять все предлагаемые изменения или их часть, выберите поле **Принять указания**. Затем соответствующим образом обновите графики.  

> [!NOTE]  
> Указание — это предложение создать новый заказ, отменить заказ или изменить количество либо дату заказа. Заказ - это заказ на покупку, заказ на перемещение или производственный заказ.  

В ответ на любые отклонения от равновесия между спросом и предложением создаются следующие сообщения о действиях.  

|Указание|Описанием|  
|--------------------|---------------------------------------|  
|**Новый**|Если не удается удовлетворить спрос с помощью указаний **Изменение кол-ва**, **Перепланирование** или **Переплан. и измен. кол-ва** в существующих заказах, генерируется указание **Новое**, которое предлагает создать новый заказ. Указание **Новое** также генерируется, если в цикле дозаказа товара нет заказов на поставку. Этот вариант определяет количество прошлых и будущих периодов в профиле доступности при выполнении поиска заказа для перепланирования.|  
|**Изменение кол-ва**|При изменении количества для спроса, отслеживаемого в связи с заказом на поставку, генерируется указание **Изменение кол-ва**. Оно указывает на необходимость изменения соответствующих поставок в связи с изменениями в спросе. Если возникает новый спрос, [!INCLUDE[prod_short](includes/prod_short.md)] ищет ближайший действующий незарезервированный заказ на поставку в пределах цикла повторного заказа, и генерирует для данного заказа указание "Изменить".|  
|**Перепланирование**|Когда изменение даты в заказе на поставку или заказе, формирующем спрос, приводит к дисбалансу в сети заказов, генерируется указание **Перепланирование**. При наличии отношения один-к-одному между спросом и предложением генерируется указание с предложением переместить заказ на поставку. Если заказ предложения обеспечивает спрос со стороны нескольких заказов на продажу, заказ предложения перепланируется по дате первого спроса.|  
|**Перепл. и изм. кол-ва**|Если в заказе изменены и дата, и количество, необходимо изменить планы с учетом обоих обстоятельств. Система указаний объединяет оба действия в одном сообщении: **Переплан. и изм. кол-во**, чтобы обеспечить восстановление баланса сети заказов.|  
|**Отмена**|В случае удаления спроса, который удовлетворялся по принципу «заказ в заказ», генерируется указание для отмены соответствующего заказа на поставку. Если отношение отличается от «заказ в заказ», генерируется указание для внесения в заказ изменения, чтобы уменьшить предложение. Если из-за других факторов, например, коррекции запасов, заказ на поставку становится не нужным на момент генерации указаний, [!INCLUDE[prod_short](includes/prod_short.md)] предлагает в журнале указание **Отмена**.|  

## <a name="see-also"></a>См. также

[Планирование](production-planning.md)  
[Настройка производства](production-configure-production-processes.md)  
[Производство](production-manage-manufacturing.md)    
[Запасы](inventory-manage-inventory.md)  
[Покупки](purchasing-manage-purchasing.md)  
[Сведения о проектировании: планирование поставок](design-details-supply-planning.md)   
[Рекомендации по настройке. Планирование поставок](setup-best-practices-supply-planning.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)

[!INCLUDE[footer-include](includes/footer-banner.md)]
