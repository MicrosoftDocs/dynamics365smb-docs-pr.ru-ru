---
title: Сведения о проектировании — средняя себестоимость
description: Средняя себестоимость товара рассчитывается в виде периодического средневзвешенного значения.
author: brentholtorf
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: null
ms.search.form: '8645,'
ms.date: 06/06/2023
ms.author: bholtorf
---
# <a name="design-details-average-cost" />Технические подробности: средняя себестоимость

Средняя себестоимость товара рассчитывается в виде периодического средневзвешенного значения. Среднее значение основано на периоде расчета средней себестоимости, настроенном в [!INCLUDE[prod_short](includes/prod_short.md)].  

Дата оценки устанавливается автоматически.  

## <a name="setting-up-average-cost-calculation" />Настройка расчета средней себестоимости

В следующей таблице описаны два поля на странице **Запасы - настройка**, которые необходимо заполнить, чтобы сделать возможным расчет средней стоимости.  

|Поле|Описание|  
|---------------------------------|---------------------------------------|  
|**Период расчета средней себестоимости**|Указание периода, за который рассчитывается средняя себестоимость. Имеются следующие варианты:<br /><br /> - **День**<br />- **Неделя**<br />- **Месяц**<br />- **Учетный период**<br /><br /> Расходы склада, учтенные в периоде расчета средней себестоимости, получают среднюю себестоимость, рассчитанную для этого периода.|  
|**Тип расчета средней себестоимости**|Указание метода расчета средней себестоимости. Имеются следующие варианты:<br /><br /> - **«Товар»**<br />- **Товар, вариант и склад**<br /> С этим параметром средняя стоимость вычисляется для каждого товара, каждого склада и каждого варианта товара. Средняя себестоимость этого товара зависит от того, где он хранится, а также от выбранного варианта, такого как цвет.|  

> [!NOTE]  
> Можно использовать только один период средней стоимости и один тип расчета средней стоимости за финансовый год.  
>
> На странице **Учетные периоды** отображается период расчета средней себестоимости и тип расчета средней себестоимости, используемые в течение данного периода, для каждого учетного периода.  

## <a name="calculating-average-cost" />Расчет средней себестоимости

 При учете транзакции для товара, для которого используется метод средней себестоимости, создается запись в таблице **Точка ввода коррекции средней себест.**. Эта запись содержит номер товара, код варианта и код склада для транзакции. Кроме того, эта запись содержит поле **Дата оценки**,в котором указывается последняя дата периода расчета средней себестоимости, в котором транзакция была учтена.  

> [!NOTE]  
> Это поле не нужно путать с полем **Дата оценки** в таблице **Операция стоимости**, в котором отображается дата вступления значения в силу и которое используется, чтобы определить средний период стоимости, к которому относится операция стоимости.  

 Средняя стоимость транзакции вычисляется во время корректировки стоимости товара. Дополнительные сведения см. в разделе [Сведения о проектировании. Коррекция себестоимости](design-details-cost-adjustment.md). При коррекции себестоимости используются операции в таблице **Точка ввода коррекции средней себест.**, чтобы определить, для каких товаров (или товаров, складов и вариантов) рассчитывать среднюю себестоимость. Для каждой операции с себестоимостью, которая еще не была скорректирована, при коррекции себестоимости используется следующее для определения средней себестоимости:  

- Определяет себестоимость товара в начале периода расчета средней себестоимости.  
- Прибавляет сумму входящих значений себестоимости, которые были учтены в период расчета средней себестоимости. Сюда относятся покупки, возвраты продаж, положительные корректировки и выводы производства и сборки.  
- Вычитает сумму себестоимостей всех исходящих транзакций, которые были фиксировано применены к приходным накладным в течение периода расчета средней себестоимости. К ним обычно относятся возвраты покупок и отрицательные выходы.  
- Делит на общее количество запасов на конец периода расчета средней себестоимости. Исключает расходы склада, которые находятся на переоценке.  

 Затем расчетная средняя себестоимость применяется к расходам склада для товара (или товара, склада и варианта) с датами учета в пределах периода расчета средней себестоимости. Для приходов склада, которые фиксировано применены к расходам склада в течение периода расчета средней себестоимости, [!INCLUDE [prod_short](includes/prod_short.md)] переносит рассчитанную среднюю себестоимость с прихода на расход.  

### <a name="example-average-cost-period--day" />Пример. Период расчета средней себестоимости = день

В следующем примере показан результат вычисления средней себестоимости на основе периода расчета средней себестоимости продолжительностью 1 день. В поле **Тип расчета средней себестоимости** на странице **Запасы - настройка** задано значение **Товар**.  

В следующей таблице показаны операции журнала товаров для примера товара со средней стоимостью (ITEM1) до выполнения пакетной операции **Коррекция себест. запасов**.  

| **Дата учета** | **Тип операции книги товаров** | **Количество** | **Сумма себестоимости (факт.)** | **Операция Номер** |
|--|--|--|--|--|
| 01-01-23 |   Покупка | 1 | 20.00 | 1 |
| 01-01-23 |   Покупка | 1 | 40.00 | 2 |
| 01-01-23 |   Продажа | -1 | -20,00 | 3 |
| 02-01-23 |   Продажа | -1 | -40,00 | 4 |
| 02-02-23 |   Покупка | 1 | 100.00 | 5 |
| 02-03-23 |   Продажа | -1 | -100,00 | 6 |

> [!NOTE]  
> Поскольку коррекция себестоимости еще не выполнена, значения в поле **Сумма себестоимости (факт.)** расхода склада соответствуют приходу склада, к которому они применяются.  

 В следующей таблице показаны операции в таблице **Точка ввода коррекции средней себест.**, применимые к операциям стоимости, которые создаются на основе операций журнала товаров в предыдущей таблице.  

| **Код товара** | **Код варианта** | **Код Склада** | **Дата оценки** | **Себестоимость скорректирована** |
|--|--|--|--|--|
| ТОВАР1 |  | СИНИЙ | 01-01-23 |   Нет |
| ТОВАР1 |  | СИНИЙ | 02-01-23 |   Нет |
| ТОВАР1 |  | СИНИЙ | 02-02-23 |   Нет |
| ТОВАР1 |  | СИНИЙ | 02-03-23 |   Нет |

 В следующей таблице показаны те же операции книги товаров после выполнения пакетного задания **Коррекция себест. запасов**. Средняя стоимость за день вычисляется и применяется к расходам склада.  

| **Дата учета** | **Тип операции книги товаров** | **Количество** | **Сумма себестоимости (факт.)** | **Операция Номер** |
|--|--|--|--|--|--|
| 01-01-23 |   Покупка | 1 | 20.00 | 1 |
| 01-01-23 |   Покупка | 1 | 40.00 | 2 |
| 01-01-23 |   Продажа | -1 | -30,00 | 3 |
| 02-01-23 |   Продажа | -1 | -30,00 | 4 |
| 02-02-23 |   Покупка | 1 | 100.00 | 5 |
| 02-03-23 |   Продажа | -1 | -100,00 | 6 |

### <a name="example-average-cost-period--month" />Пример. Период расчета средней себестоимости = месяц

 В этом примере показан результат вычисления средней себестоимости на основе периода расчета средней себестоимости продолжительностью 1 месяц. В поле **Тип расчета средней себестоимости** на странице **Запасы - настройка** задано значение **Товар**.  

 Если период расчета средней себестоимости составляет один месяц, [!INCLUDE [prod_short](includes/prod_short.md)] создает только по одной операции для каждой комбинации номера товара, кода варианта, кода склада и даты переоценки.  

 В следующей таблице показаны операции журнала товаров для примера товара со средней стоимостью (ITEM1) до выполнения пакетной операции **Коррекция себест. запасов**.  

| **Дата учета** | **Тип операции книги товаров** | **Количество** | **Сумма себестоимости (факт.)** | **Операция Номер** |
|--|--|--|--|--|
| 01-01-23 |   Покупка | 1 | 20.00 | 1 |
| 01-01-23 |   Покупка | 1 | 40.00 | 2 |
| 01-01-23 |   Продажа | -1 | -20,00 | 3 |
| 02-01-23 |   Продажа | -1 | -40,00 | 4 |
| 02-02-23 |   Покупка | 1 | 100.00 | 5 |
| 02-03-23 |   Продажа | -1 | -100,00 | 6 |

> [!NOTE]  
> Поскольку коррекция себестоимости еще не выполнена, значения в поле **Сумма себестоимости (факт.)** расхода склада соответствуют приходу склада, к которому они применяются.  

В следующей таблице показаны операции в таблице **Точка ввода коррекции средней себест.**, применимые к операциям стоимости, которые создаются на основе операций журнала товаров в предыдущей таблице.  

| **Код товара** | **Код варианта** | **Код Склада** | **Дата оценки** | **Себестоимость скорректирована** |
|--|--|--|--|--|
| ТОВАР1 |  | СИНИЙ | 01-31-23 |   Нет |
| ТОВАР1 |  | СИНИЙ | 02-28-23 |   Нет |

> [!NOTE]  
> Дата оценки устанавливается на последний день периода средней стоимости, который в данном случае является последним днем месяца.  

В следующей таблице показаны те же операции книги товаров после выполнения пакетного задания **Коррекция себест. запасов**. Средняя стоимость за месяц вычисляется и применяется к расходам склада.  

|**Дата учета** | **Тип операции книги товаров** | **Количество** | **Сумма себестоимости (факт.)** | **Операция Номер** |
|--|--|--|--|--|
| 01-01-23 | Покупка | 1 | 20.00 | 1 |
| 01-01-23 | Покупка | 1 | 40.00 | 2 |
| 01-01-23 | Продажа | -1 | -30,00 | 3 |
| 02-01-23 | Продажа | -1 | -65,00 | 4 |
| 02-02-23 | Покупка | 1 | 100.00 | 5 |
| 02-03-23 | Продажа | -1 | -65,00 | 6 |

Средняя себестоимость операции номер 3 вычисляется в периоде расчета средней себестоимости за январь. Средняя себестоимость операций номер 4 и 6 вычисляется в периоде расчета средней себестоимости за февраль.  

Для получения средней себестоимости за февраль [!INCLUDE [prod_short](includes/prod_short.md)] прибавляет среднюю стоимость товара, полученного в запасы (100,00), к средней себестоимости на начало периода (30,00). Сумма (130,00) затем делится на общее количество в запасах (2). В результате этого расчета получается средняя себестоимость товара за период "февраль" (65,00). Средняя себестоимость назначается расходам склада в этом периоде (операции 4 и 6).  

## <a name="setting-the-valuation-date" />Настройка даты переоценки

 Поле **Дата оценки** в таблице **Операция стоимости** определяет период расчета средней себестоимости, к которому относится операция расхода склада. Этот параметр также применим к запасам НЗП.  

 В следующей таблице показаны критерии, используемые для настройки даты переоценки.  

| Сценарий | Дата учета | Оцен. кол-во | Переоценка | Дата оценки |
|--|--|--|--|--|
| 1 |  | Положит. | Нет | Дата учета операции книги товаров |
| 2 | После даты последней переоценки примененных операций стоимости | Отрицательное | Нет | Дата учета операции книги товаров |
| 3 | До даты последней переоценки примененных операций стоимости | Положительна | Нет | После даты последней переоценки примененных операций стоимости |
| 4 |  | Отрицательное | Да | Дата учета операции стоимости переоценки |

### <a name="example" />Пример

В следующей таблице операций стоимости проиллюстрированы разные сценарии.  

| Сценарий | Дата учета | Тип операции книги товаров | Дата оценки | Оцен. кол-во | Сумма себестоимости (факт.) | Номер товарной операции | Номер операции |
|--|--|--|--|--|--|--|--|
| 1 | 01-01-20 | Покупка | 01-01-20 | 2 | 20.00 | 1 | 1 |
| 2 | 01-15-20 | (Товарная издержка) | 01-01-20 | 2 | 8,00 | 1 | 2 |
| 3 | 02-01-20 | Продажа | 02-01-20 | -1 | -14,00 | 2 | 3 |
| 4 | 03-01-20 | (Переоценка) | 03-01-20 | 1 | -4,00 | 1 | 4 |
| 5 | 02-01-20 | Продажа | 03-01-20 | -1 | -10,00 | 3 | 5 |

> [!NOTE]  
> В операции номер 5 в предыдущей таблице пользователь ввел заказ на продажу с датой учета (02-01-20), которая предшествует последней дате переоценки примененных операций стоимости (03-01-20). Если бы для данной операции использовалось соответствующее значение в поле **Сумма себестоимости (факт.)** для данной даты (02-01-20), оно составило бы 14,00. В результате создается ситуация, когда количество запаса равно 0, а стоимость запасов — –4,00.  
>
> Чтобы избежать несоответствия количества и стоимости, дата оценки ставится равной последней дате оценки примененных операций стоимости (03-01-20). Значение в поле **Сумма себестоимости (факт.)** становится 10,00 (после переоценки), что означает, что количество запасов равно нулю, а стоимость запасов также равна нулю.  

> [!CAUTION]  
> Поскольку отчет **Оценка стоимости товаров** основан на дате учета, в отчете отображаются все несоответствия значений количеств в сценариях, как в приведенном выше примере. Дополнительные сведения см. в разделе [Сведения о проектировании: оценка стоимости запасов](design-details-inventory-valuation.md).  

Если количество в запасах меньше нуля после учета расхода склада, в качестве даты оценки устанавливается дата учета расхода склада. Вы можете изменить эту дату при применении прихода склада, в соответствии с правилами, описанными в примечании ранее в этом разделе,  

## <a name="recalculating-average-cost" />Перерасчет средней себестоимости

Оценка расходов склада как взвешенного среднего будет достаточно простой в нескольких сценариях:

- Счета по покупкам всегда выставляются до того, как выставляются счета по продажам.
- Учет никогда не производится задним числом.
- Вы никогда не допускаете ошибок.

Однако в действительности все обстоит иначе.  

Как показано в примерах в этой статье, дата оценки определяется как дата, с которой операция стоимости включается в расчет средней себестоимости. Этот параметр позволяет делать следующее с товарами с методом средней себестоимости:  

- Выставлять счет на продажу товара до выставления счета на его покупку.  
- Записывать учет задним числом.  
- Восстанавливать неправильный учет.  

> [!NOTE]  
> Другой причиной такой гибкости является фиксированное применение. Дополнительные сведения о фиксированном применении см. в разделе [Сведения о проектировании: применение товара](design-details-item-application.md).  

Из-за такой гибкости может потребоваться выполнить перерасчет средней себестоимости после учета. (Например, при учете прихода или расхода склада с датой оценки, предшествующей расходу склада.) Пересчет средней стоимости происходит автоматически при выполнении пакетного задания **Коррекция себест. запасов** вручную или автоматически.  

Вы можете изменить базу оценки стоимости запасов в учетном периоде путем изменения значений в полях **Период расчета средней себестоимости** и **Тип расчета средней себестоимости**. Тем не менее мы рекомендуем соблюдать осторожность и проконсультироваться со своим аудитором.  

### <a name="example-of-recalculated-average-cost" />Пример пересчитанной средней себестоимости

В этом примере показано, как [!INCLUDE [prod_short](includes/prod_short.md)] пересчитывает среднюю себестоимость, когда вы выполняете учет на дату до расхода склада. Пример основан на среднем периоде учета стоимости **День**.  

В следующей таблице показаны операции стоимости, существующие для товара до учета.  

| Дата оценки | Количество | Сумма себестоимости (факт.) | Номер операции |
|--|--|--|--|
| 01-01-20 | 1 | 10.00 | 1 |
| 01-02-20 | 1 | 20.00 | 2 |
| 02-15-20 | -1 | -15,00 | 3 |
| 02-16-20 | -1 | -15,00 | 4 |

Пользователь учитывает операции прихода склада (операция номер 5) с датой оценки (01-03-20) до расхода склада. Чтобы уравновесить запасы, необходимо пересчитать среднюю стоимость и скорректировать ее до 17,00.  

В следующей таблице показаны операции стоимости, существующие для товара после ввода операции номер 5.  

| Дата оценки | Количество | Сумма себестоимости (факт.) | Номер операции |
|--|--|--|--|
| 01-01-20 | 1 | 10.00 | 1 |
| 01-02-20 | 1 | 20.00 | 2 |
| 01-03-20 | 1 | 21.00 | 5 |
| 02-15-20 | -1 | -17,00 | 3 |
| 02-16-20 | -1 | -17,00 | 4 |

## <a name="see-also" />См. также

[Технические подробности: учет себестоимости запасов](design-details-inventory-costing.md)  
[Технические подробности: методы учета себестоимости](design-details-costing-methods.md)  
[Технические подробности: коррекция себестоимости](design-details-cost-adjustment.md)  
[Технические подробности: применение товара](design-details-item-application.md)  
[Управление себестоимостью товаров](finance-manage-inventory-costs.md)  
[Финансы](finance.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)  
[Глоссарий терминов, связанных с бизнес-процессами Dynamics 365](/dynamics365/guidance/business-processes/glossary)  
[Обзор определения расчета себестоимости продуктов и услуг](/dynamics365/guidance/business-processes/product-service-define-cost-overview)  

[!INCLUDE[footer-include](includes/footer-banner.md)]
