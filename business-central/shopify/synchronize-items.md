---
title: Синхронизируйте товары и запасы
description: Настройте и запустите синхронизацию товаров между Shopify и Business Central
ms.date: 04/28/2024
ms.topic: article
ms.search.form: '30116, 30117, 30126, 30127,'
author: brentholtorf
ms.author: bholtorf
ms.reviewer: bholtorf
ms.collection:
  - bap-ai-copilot
---

# <a name="synchronize-items-and-inventory"></a>Синхронизируйте товары и запасы

**Товары** в [!INCLUDE[prod_short](../includes/prod_short.md)] представляют собой эквивалент *продуктов* в Shopify и включают в себя физические товары, цифровые загрузки, услуги и подарочные карты, которые вы продаете. Существует основные причины синхронизировать товары:

1. Управление данными осуществляется главным образом в [!INCLUDE[prod_short](../includes/prod_short.md)]. Вам нужно экспортировать все или некоторые данные оттуда в Shopify и сделать их видимыми. Вы можете экспортировать название товара, описание, изображение, цены, наличие, варианты, информацию о поставщике и штрих-код. После экспорта вы можете просмотреть товары или сразу сделать их видимыми.
2. При импорте заказа из Shopify информация о товаре необходима для дальнейшей обработки документа в [!INCLUDE[prod_short](../includes/prod_short.md)].

Предыдущие два сценария всегда включены.

Третий сценарий заключается в управлении данными в Shopify, но пакетом импорте этих товаров в [!INCLUDE[prod_short](../includes/prod_short.md)]. Этот сценарий может быть полезен для событий переноса данных, например, когда вы хотите связать существующий интернет-магазин с новой средой [!INCLUDE[prod_short](../includes/prod_short.md)].

## <a name="define-item-synchronizations"></a>Определение синхронизации товаров

1. Выберите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") значок и введите **Магазин Shopify**. Откройте магазин, для которого вы хотите настроить синхронизацию товаров.
2. В поле **Синхронизировать товар** выберите нужный вариант.

   Параметры приведены в таблице ниже.

   |Параметр|Описание|
   |------|-----------|
   |**Пусто**| Продукция импортируется вместе с импортом заказов. Продукция экспортируется в Shopify, когда пользователь выполняет действие **Добавить элемент** со страницы **Shopify Товары**. Этот вариант является процессом по умолчанию.|
   |**На Shopify**| Выберите этот параметр, если после первоначальной синхронизации, инициированной действием **Добавить товар**, вы планируете обновлять продукцию вручную с помощью действия **Синхронизировать продукт** или с помощью очереди заданий для повторяющихся обновлений. Не забудьте активировать поле **Можно обновить продукцию Shopify**. Если он не включен, он равен параметры **Пустой** (процесс по умолчанию). Дополнительные сведения см. в разделе [Экспорт товаров в Shopify](synchronize-items.md#export-items-to-shopify).|
   |**С Shopify**| Выберите этот вариант, если вы планируете импортировать продукцию из Shopify оптом; либо вручную с помощью действия **Синхронизировать продукцию** либо с помощью очереди заданий для повторяющихся обновлений. Дополнительные сведения см. в разделе [Импорт товаров из Shopify](synchronize-items.md#import-items-from-shopify).|

   > [!NOTE]
   > Изменение направления работы функции **Синхронизировать товар** с **Из Shopify** на **в Shopify** не будет иметь эффекта, если не включить параметр **Может обновлять продукты Shopify**.

## <a name="import-items-from-shopify"></a>Импорт товаров из Shopify

Сначала импортируйте товары либо в пакетном режиме из Shopify или вместе с заказами, чтобы добавить их в таблицы **Продукт Shopify** и **Вариант Shopify**. Затем сопоставьте импортированные продукты и варианты с товарами и вариантами в [!INCLUDE[prod_short](../includes/prod_short.md)]. Управляйте процессом с помощью следующих параметров:

|Поле|Описание|
|------|-----------|
|**Автоматически создавать неизвестные товары**|Когда продукция и варианты Shopify импортируются в [!INCLUDE[prod_short](../includes/prod_short.md)], функция [!INCLUDE[prod_short](../includes/prod_short.md)] сначала пытается сначала найти соответствующую запись в списке товаров. **Сопоставление SKU** влияет на то, как выполняется сопоставление, и создает новый товар и/или вариант товара. Включите этот параметр, если вы хотите создать новый товар или если соответствующей записи не существует. Новый товар создается с использованием импортированных данных и **Кода шаблона товара**. Если этот параметр не включен, вам нужно будет создать товар вручную и использовать действие **Сопоставить продукт** на странице **Продукты Shopify**.|
|**Код шаблона товара**|Используйте это поле вместе с переключателем **Автоматически создавать неизвестные товары**.<br>Выберите шаблон, который хотите использовать для автоматически созданных товаров.|
|**Сопоставление SKU**|Выберите, как вы хотите использовать значение **SKU**, импортированное из Shopify во время сопоставления и создания товара/варианта. Подробнее см. в разделе [Влияние SKU и штрих-кодов продуктов Shopify на сопоставление и создание товаров и вариантов в Business Central](synchronize-items.md#effect-of-shopify-product-skus-and-barcodes-on-mapping-and-creating-items-and-variants-in-business-central).|
|**Разделитель полей SKU**|Используйте это поле, когда параметр **Сопоставление SKU** установлен в значение **[№ товара + код варианта](synchronize-items.md#effect-of-shopify-product-skus-and-barcodes-on-mapping-and-creating-items-and-variants-in-business-central)**.<br>Определите разделитель, который будет использоваться для разделения SKU.<br>Таким образом, если в Shopify вы создаете вариант с SKU "1000/001", вы вводите "/" в поле **Разделитель полей SKU**, чтобы создать номенклатурный номер в [!INCLUDE[prod_short](../includes/prod_short.md)] как "1000", а код варианта товара как "001". Обратите внимание, что если вы создадите вариант со SKU «1000/001/111» в Shopify, номер товара в [!INCLUDE[prod_short](../includes/prod_short.md)] будет «1000», а код варианта товара — «001». «111» игнорируется. |
|**Префикс варианта**|Используйте вместе с **Сопоставлением SKU**, установленным на параметр **Код варианта** или **№ товара + код варианта** в качестве запасной функции, когда SKU, поступающий из Shopify, пустой.<br>Если вы хотите создать вариант товара в [!INCLUDE[prod_short](../includes/prod_short.md)] автоматически, вам нужно будет ввести значение в поле **Код**. По умолчанию используется значение, указанное в поле SKU, импортированное из Shopify. Однако, если поле SKU пусто, будет сгенерирован код, начинающийся с определенного префикса варианта и «001».|
|**Shopify может обновить товар**|Выберите этот вариант, если вы хотите автоматически обновлять товары и/или варианты.|
|**ЕИ в качестве варианта**| Выберите этот вариант, если вы хотите, чтобы все единицы измерения товара экспортировались как отдельные варианты. Для добавления этого поля необходимо персонализировать страницу.. Подробнее см. в разделе [Единица измерения в качестве варианта](synchronize-items.md#unit-of-measure-as-variant).|
|**Имя варианта для ЕИ**| Используйте это поле вместе с **ЕИ в качестве варианта**, чтобы указать, под каким параметром добавлять варианты, представляющие единицы измерения. Значение по умолчанию — *Единица измерения*. Для добавления этого поля на страницу необходимо использовать персонализацию.|

## <a name="export-items-to-shopify"></a>Экспорт товаров в Shopify

Существует несколько способов экспортировать товары в Shopify:

* Использовать действие **Добавить товар в Shopify** непосредственно со страницы **Карточка товара**.
* Использовать действие  **Добавить товар**  на странице  **Продукты Shopify** .
* Запустить синхронизацию товаров — однократно или многократно с помощью автоматизации.

Независимо от способа экспорта товаров информация о конкретном товаре передается в список продуктов Shopify в зависимости от заданных вами параметров синхронизации товаров.

> [!IMPORTANT]
> Товар будет добавлен только в канал продаж **Интернет-магазин**. Вам необходимо публиковать товары в других каналах продаж, например Shopify POS, из Shopify.

Вы управляете процессом экспорта товаров с помощью следующих параметров:

|Поле|Описание|
|------|-----------|
|**Синхронизировать расширенный текст товара**|Выберите это поле, чтобы синхронизировать расширенный текст товара. Так как он будет добавлен в поле **Описание**, он может содержать HTML-код. |
|**Синхронизировать атрибуты товара**|Выберите это поле для синхронизации атрибутов товара. Атрибуты отформатированы в виде таблицы и включены в поле **Описание** в Shopify.|
|**Синхронизировать маркетинговый текст о товаре**|Выберите это поле, чтобы синхронизировать маркетинговый текст для товара. Хотя маркетинговый текст является своего рода описанием, он отличается от поля **Описание**. Поле **Описание** обычно используется в качестве краткого отображаемого имени для быстрой идентификации продукта. Маркетинговый текст имеет более развернутое описательное содержание. Он предназначен для добавления маркетингового и рекламного контента. Затем этот текст можно опубликовать вместе с товаром в Shopify. Существует два способа создания маркетингового текста: Можно использовать Copilot, который предлагает текст, сгенерированный ИИ, или начать с нуля.|
|**Код языка**|Выберите это поле, если хотите использовать переведенные версии для заголовка, атрибутов и расширенного текста.|
|**Сопоставление SKU**|Выберите, как вы хотите заполнять поле SKU в Shopify. Среди поддерживаемых вариантов:<br> - **Номер товара** — для использования номера товара как для продуктов, так и для вариантов.<br> - **Номер товара + код варианта** — для создания SKU путем объединения значений двух полей. Для товаров без вариантов используется только номер товара.<br>- **Номер поставщика товара** — используется номер поставщика товара, определенный в **Карточке товара** как для продуктов, так и для вариантов.<br> - **Штрихкод** — чтобы использовать тип штрихкода **Ссылка на товар**. Эта опция учитывает варианты.<br>Если параметр **Может обновлять продукты Shopify** включен, изменения в поле **Сопоставление единиц хранения** будут распространены на Shopify после следующей синхронизации для всех продуктов и вариантов, перечисленных на странице **Продукты Shopify** для выбранного магазина.|
|**Разделитель полей единицы хранения**|Определите разделитель для варианта **Номера товара + код варианта**.|
|**С прослеживанием запасов**| Выберите, как система должна заполнять поле **Отслеживание запасов** для продукции, экспортируемой в Shopify. Вы можете обновить информацию о доступности из [!INCLUDE[prod_short](../includes/prod_short.md)] для продукции в Shopify, для которой активировано отслеживание запасов. Подробнее см. в разделе [Запасы](synchronize-items.md#sync-inventory-to-shopify).|
|**Политика запасов по умолчанию**|Выберите *Отклонить* для предотвращения отрицательных запасов на стороне Shopify. <br>Если параметр **Может обновлять продукты Shopify** включен, изменения в поле **Политика запасов по умолчанию** будут распространены на Shopify после следующей синхронизации для всех продуктов и вариантов, перечисленных на странице **Продукты Shopify** для выбранного магазина.|
|**Может обновлять продукцию Shopify**|Определите это поле, если [!INCLUDE[prod_short](../includes/prod_short.md)] может только создавать товары, либо может также обновлять их. Выберите этот параметр, если после первоначальной синхронизации, инициированной действием **Добавить товар**, вы планируете обновлять продукцию вручную с помощью действия **Синхронизировать продукт** или с помощью очереди заданий для повторяющихся обновлений. Не забудьте выбрать **В Shopify** в поле **Синхронизация предметов**.<br>Параметр **Может обновлять продукты Shopify** не влияет на синхронизацию цен, изображений или уровней запасов, которые настраиваются с помощью независимых элементов управления.<br>Если параметр **Может обновлять продукты Shopify** включен, следующие поля на стороне Shopify будут обновляться на уровне продукта, а при необходимости и на уровне варианта: **Единица хранения**, **Штрих-код**, **Вес**. Поля **Название**, **Тип продукта**, **Поставщик**, **Описание** продукта также будут обновляться, если экспортируемые значения не пусты. Для описания это означает, что вам нужно включить какой-либо из переключателей **Синхронизировать расширенный текст товара**, **Синхронизировать маркетинговый текст о товаре** или **Синхронизировать атрибуты товара**, и атрибуты, расширенный текст или маркетинговый текст должны иметь значения. Если у продукта есть варианты, вариант будет добавлен или удален, если необходимо. <br>Если продукт в Shopify настроен для использования матрицы вариантов, объединяющей два или более параметров, соединитель Shopify не сможет создать вариант для этого продукта. В [!INCLUDE[prod_short](../includes/prod_short.md)] нет возможности определить матрицу параметров, поэтому соединитель использует **Код варианта** как единственный параметр. Однако Shopify ожидает несколько параметров и отказывается создавать вариант, если информация о втором и других параметрах отсутствует. |
|**ЕИ в качестве варианта**| Выберите этот вариант, если вы хотите, чтобы некоторые параметры экспортировались и импортировались в виде единиц измерения, а не как варианты. Для добавления этого поля необходимо персонализировать страницу.. Подробнее см. в разделе [Единица измерения в качестве варианта](synchronize-items.md#unit-of-measure-as-variant).|
|**Имя варианта для ЕИ**| Используйте это поле вместе с **ЕИ в качестве варианта**, чтобы указать, какой параметр содержит варианты, представляющие единицы измерения. Значение по умолчанию — *Единица измерения*. Для добавления этого поля необходимо персонализировать страницу..|

> [!NOTE]
> Когда вы экспортируете много товаров и вариантов, некоторые из них могут быть заблокированы. Включить заблокированные товары и варианты в расчет цен невозможно, поэтому они не экспортируются. Соединитель пропускает эти товары и варианты, поэтому фильтровать их на странице запроса **Добавить товар в Shopify** не нужно.

## <a name="advanced-details"></a>Дополнительные сведения

### <a name="effect-of-shopify-product-skus-and-barcodes-on-mapping-and-creating-items-and-variants-in-business-central"></a>Влияние SKU и штрих-кодов продуктов Shopify на сопоставление и создание товаров и вариантов в Business Central

Когда товары ввозятся из Shopify в **Товары Shopify** и таблицы **Вариантов Shopify**, [!INCLUDE[prod_short](../includes/prod_short.md)] пытается найти существующие записи.

В следующей таблице описывается разница между параметрами в поле **Сопоставление SKU**.

|Параметр|Влияние на сопоставление|Влияние на создание|
|------|-----------------|------------------|
|**Пусто**|Поле SKU не используется в процедуре сопоставления товаров.|Не влияет на создание товара.<br>Этот параметр предотвращает создание вариантов. В заказе на продажу используется только основной товар. Вариант по-прежнему можно сопоставить вручную на странице **Продукция Shopify**.|
|**Код товара**|Выберите этот вариант, если поле SKU содержит номер товара.|Не влияет на создание товара без вариантов. Для товара с вариантами каждый вариант создается как отдельный товар.<br>Таким образом, если в Shopify есть продукт с двумя вариантами, а их единицы хранения – "1000" и "2000", то [!INCLUDE[prod_short](../includes/prod_short.md)] создаст два товара с номерами "1000" и "2000".|
|**Код варианта**|Поле SKU не используется в процедуре сопоставления товаров.|Не влияет на создание товара. При создании варианта товара в качестве кода используется значение поля SKU. Если поле SKU пусто, код генерируется из данных в поле **Префикс варианта**.|
|**№ товара + код варианта**|Выберите этот вариант, если поле SKU содержит номер товара, и код варианта товара разделен значением, определенным в поле **Разделитель полей SKU**.|При создании товара первая часть значения поля SKU назначается как **Номер**. Если поле SKU пусто, то номер товара генерируется с использованием числового ряда, определенного в поле **Код шаблона элемента** или **Номера товаров** на странице **Настройка запасов**.<br>При создании товара функция варианта использует вторую часть значения поля SKU как **Код**. Если поле SKU пусто, код генерируется из данных в поле **Префикс варианта**.|
|**№ товара поставщика**|Выберите этот вариант, если поле SKU содержит номер товара поставщика. В этом случае **Код поставщика товара** не используется на странице **Карточка товара**; скорее используется **№ товара поставщика** из **Каталог поставщиков товара**. Если найденная запись из *Каталога поставщиков товаров* содержит код варианта, этот код используется для сопоставления вариантов Shopify.|Если соответствующий поставщик существует в [!INCLUDE[prod_short](../includes/prod_short.md)], значение SKU будет использоваться как **Номер поставщика товара** на странице **Карточка товара** и как **Ссылка на товар** типа *поставщика*. <br>Запрещает создавать варианты. Это полезно, когда вы хотите использовать только основной товар в заказе на продажу. Вы по-прежнему сможете сопоставить вариант вручную со страницы **Продукция Shopify**.|
|**Штрихкод**|Выберите этот вариант, если поле SKU содержит штрихкод. Поиск осуществляется среди **Ссылок на товары** типа *штрих-кода*. Если найденная запись ссылок на товары содержит код варианта, этот код варианта используется для сопоставления варианта Shopify.|Не влияет на создание товара. <br>Запрещает создавать варианты. Это имеет смысл, когда вы хотите использовать только основной товар в заказе на продажу. Вы по-прежнему сможете сопоставить вариант вручную со страницы **Продукция Shopify**.|

В следующей таблице показано влияние поля **Штрихкод**.

|Влияние на сопоставление|Влияние на создание|
|-----------------|------------------|
|Поиск осуществляется на **Ссылки на товары**, содержащие тип штрих-кода для значения в поле **Штрих-код** в Shopify. Если найденная запись ссылок на товары содержит код варианта, этот код варианта используется для сопоставления варианта Shopify.|Штрих-код сохраняется как **Ссылка на товар** для товара и варианта товара.|

> [!NOTE]  
> Вы можете инициировать сопоставление выбранных продуктов/вариантов, выбрав **Попробовать найти сопоставление продуктов**, или всех импортированных несопоставленных продуктов, выбрав **Попробовать найти сопоставления**.

### <a name="fields-mapping-overview"></a>Обзор сопоставления полей

|Shopify|Источник при экспорте из [!INCLUDE[prod_short](../includes/prod_short.md)]|Цель при импорте в [!INCLUDE[prod_short](../includes/prod_short.md)]|
|------|-----------------|-----------------|
|Состояние|Согласно полю **Статусу созданных продуктов** в **Карточке магазина Shopify**. Узнайте больше в разделе [Ad-Hock обновления продуктов Shopify](synchronize-items.md#ad-hoc-updates-of-shopify-products).|Не используется.|
|Должность | **Описание**. Если код языка определен и существует соответствующий перевод товара, вместо описания будет использоваться перевод.|**Описание**|
|Название варианта | **Код варианта**.|**Описание** варианта|
|Описание|Сочетает в себе расширенные тексты, маркетинговый текст и атрибуты, если соответствующие переключатели активированы на карточке магазина Shopify. Учитывается код языка.|Не используется.|
|Заголовок страницы директора|Фиксированное значение: пустое. Узнайте больше в разделе [Ad-Hock обновления продуктов Shopify](synchronize-items.md#ad-hoc-updates-of-shopify-products).|Не используется.|
|Описание мета-данных директора|Фиксированное значение: пустое. Узнайте больше в разделе [Ad-Hock обновления продуктов Shopify](synchronize-items.md#ad-hoc-updates-of-shopify-products).|Не используется.|
|Мультимедиа|**Изображение**. Узнайте больше в разделе [Синхронизация изображения товаров](synchronize-items.md#sync-item-images)|**Изображение**|
|Цена|Расчет цены для конечного покупателя включает в себя цену единицы товара, ценовую группу клиента, скидочную группу клиента и код валюты. Узнайте больше в разделе [Синхронизация цен](synchronize-items.md#sync-prices-with-shopify)|**Цена единицы**. Цена импортируется только во вновь созданные товары, однако при дальнейших синхронизациях не обновляется.|
|Сравнительная цена|Расчет цены без скидки. Если значение меньше или равно значению поля **Цена**, соединитель отправляет 0 (NULL) вместо фактического значения.|Не используется.|
|Стоимость единицы товара|**Себестоимость единицы**|**Себестоимость единицы**. Себестоимость единицы импортируется только во вновь созданные товары и при дальнейших синхронизациях не обновляется.|
|Единица хранения|Узнайте об единицах хранения SKU в пункте **Сопоставление SKU** в разделе [Экспорт товаров в Shopify](synchronize-items.md#export-items-to-shopify).|Узнайте об единицах хранения SKU в разделе [Влияние SKU и штрих-кодов продуктов Shopify на сопоставление и создание товаров и вариантов в Business Central](synchronize-items.md#effect-of-shopify-product-skus-and-barcodes-on-mapping-and-creating-items-and-variants-in-business-central).|
|Штрихкод|**Ссылки на товары** типа штрихкода.|**Ссылки на товары** типа штрихкода.|
|Где будут храниться запасы| Зависит от складов (магазинов) Shopify. Если напротив **Службы выполнения Business Central** установлен флажок**Местонахождение продукта по умолчанию**, запасы хранятся в **Службах выполнения Business Central** и оттуда же отгружаются. В противном случае используется основной склад Shopify или несколько складов. Подробнее см. в разделе [Два подхода к управлению выполнением заказов](synchronize-items.md#two-approaches-to-manage-fulfillments)| Не используется.|
|Проследить количество|Согласно полю **Отслеживанию запасов** на странице **Карточка магазина Shopify**. Подробнее см. в разделе [Запасы](synchronize-items.md#sync-inventory-to-shopify). Используется только при первом экспорте продукта.|Не используется.|
|Продолжайте продавать, когда товара нет в наличии|Согласно **Стандартной политике запасов** в **Карточке магазина Shopify**.|Не используется.|
|Тип|**Описание** из **Код категории товара**. Если тип не указан в Shopify, он добавляется как пользовательский тип.|**Код категории товара**. Сопоставление по описанию.|
|Поставщик|**Имя** поставщика из поля **Номер поставщика**|**Номер поставщика** – сопоставление по имени.|
|Вес|**Вес брутто**.|Не используется.|
|Облагается налогом|Фиксированное значение: включено.|Не используется.|
|Коды налогов|**Код налоговой группы**. Актуально только для налогов с продаж. Подробнее см. в разделе [Настройка налогов](setup-taxes.md).|Не используется.|

### <a name="tags"></a>Теги

Просмотрите импортированные теги на информационной панели **Теги** на странице **Продукция Shopify**. На этой же странице для редактирования тегов выберите действие **Теги**.

Если в поле **Синхронизировать товар** выбран вариант **В Shopify**, назначенные теги экспортируются в Shopify при следующей синхронизации.

### <a name="unit-of-measure-as-variant"></a>Единица измерения в качестве варианта

Shopify не поддерживает использование нескольких единиц измерения. Если вы хотите продавать один и тот же продукт, например, поштучно и в наборе и использовать разные цены или скидки, вам необходимо создавать единицы измерения в качестве вариантов продукта.
Соединитель Shopify можно настроить для экспорта единиц измерения как вариантов или импорта вариантов как единиц измерения.

Чтобы включить эту возможность, используйте поля **ЕИ в качестве варианта** и **Имя варианта** в **карточке магазина Shopify**. Эти поля по умолчанию скрыты, поэтому используйте персонализацию, чтобы добавить их на страницу.

**Примечания к единице измерения в качестве варианта**

* Когда продукт импортируется в [!INCLUDE[prod_short](../includes/prod_short.md)], соединитель создает единицы измерения. Вам потребуется обновить **Кол-во в единице измерения**.
* При работе с матрицей вариантов, например цветом и единицей измерения, если вы хотите импортировать продукты, вам следует установить *№ товара + код варианта* в поле **Сопоставление SKU** и убедиться, что поле **SKU** в Shopify имеет одинаковое значение для всех единиц измерения и включает в себя и номер товара, и код варианта.
* В [!INCLUDE[prod_short](../includes/prod_short.md)] доступность рассчитывается по товару/варианту товара, а не по единице измерения. Это означает, что каждому варианту, представляющему единицу измерения, будет присвоено одинаковое наличие (относительно **количества на единицу измерения**), что может привести к случаям, когда доступное количество в Shopify будет неточным. Пример: товар продается в штуках и в коробках по 6 штук. Запасы в [!INCLUDE[prod_short](../includes/prod_short.md)] составляют 6 шт. Товар экспортируется в Shopify как продукт с двумя вариантами. После выполнения синхронизации запасов уровень запасов в Shopify будет равен 6 для варианта «штука» и 1 для варианта «коробка». Изучая ассортимент магазина, покупатель может увидеть, что товар доступен в обоих вариантах, и разместить заказ на одну коробку. Следующий покупатель увидит, что коробки нет в наличии, однако в наличии есть 6 штук. Это будет исправлено после следующей синхронизации запасов.

### <a name="url-and-preview-url"></a>URL-адрес и URL-адрес предварительного просмотра

У товара, добавленного в Shopify или импортированного из Shopify, может быть заполнено поле **URL-адрес** или **URL-адрес предварительного просмотра**. Поле **URL-адрес** будет пустым, если товар не опубликован в интернет-магазине, например потому что его статус — черновик. Поле **URL-адрес** будет пустым, если магазин защищен паролем, например потому, что это магазин для разработки. В большинстве случаев вы можете использовать **URL-адрес предварительного просмотра**, чтобы проверить, как продукт будет выглядеть после публикации.

## <a name="run-item-synchronization"></a>Запуск синхронизации товаров

Полная или частичная синхронизация товаров может выполняться разными способами.

### <a name="initial-sync-of-items-from-business-central-to-shopify"></a>Первоначальная синхронизация товаров из Business Central в Shopify

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") введите **Продукты Shopify** и выберите соответствующую ссылку.
2. Выберите действие **Добавить товары**.
3. В поле **Код магазина** укажите код. Если вы откроете окно **Продукция Shopify** со страницы **Карточка магазина**, код магазина будет заполнен автоматически.
4. Если вы настроили синхронизацию изображений и запасов, вы можете включить их в один и тот же процесс. Включать их в один и тот же процесс удобно для демонстрационных сценариев или при работе с небольшими объемами данных.
5. При необходимости определите фильтры для товаров. Например, вы можете фильтровать данные по номеру товара или коду категории товара.
6. Выберите **ОК**.

Полученные товары автоматически создаются в Shopify с ценами. В зависимости от сделанного вами выбора могут быть включены изображения и уровни ресурсов. Операция может занять некоторое время, если добавляется большое количество товаров.

Также вы можете синхронизировать один товар, выбрав действие **Добавить в Shopify** действие на странице **Карточка товара**.  

> [!NOTE]  
> При первоначальной синхронизации товаров из [!INCLUDE[prod_short](../includes/prod_short.md)] в Shopify значения параметров **Синхронизировать товар** и **Может обновлять продукты Shopify** не учитываются. 

### <a name="sync-products-from-shopify-to-business-central"></a>Синхронизировать продукты из Shopify в Business Central

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **магазин Shopify** и выберите связанную ссылку.
2. Выберите магазин, для которого вы хотите синхронизировать товары, чтобы открыть страницу **Карточка магазина Shopify**.
3. Выберите действие **Синхронизировать продукцию**.

В качестве альтернативы вы можете использовать действие **Синхронизировать продукты** на странице **Продукты Shopify** или найти пакетное задание **Синхронизировать продукты**.

Вы можете запланировать задачу для автоматического выполнения. Дополнительные сведения см. а разделе [Планирование повторяющихся задач](background.md#to-schedule-recurring-tasks).

### <a name="ad-hoc-updates-of-shopify-products"></a>Ad-Hock обновления продукции Shopify

При обновлении записей в таблице **Продукция Shopify** следующие изменения синхронизируются с Shopify.

Обновить:

* **Статус** — вы можете выбрать между активным, заархивированным или черновиком.
* **Должность директора**
* **Описание директора**

Удаление:

На основании значения в поле **Действия для удаленной продукции** на странице **Карточка магазина Shopify** продукция обновляется в Shopify при удалении записи со страницы **Продукция Shopify**.

* **Пусто** — ничего не происходит. При необходимости вам необходимо выполнить требуемое действие со страницы **Администрирование Shopify**.
* **Сделать черновиком** — статус продукта в Shopify меняется на *Черновик*.
* **Сделать архивным** — продукт архивируется в Shopify.

## <a name="sync-item-images"></a>Синхронизировать изображения товара

Синхронизацию изображений можно настроить для синхронизированных товаров. Выберите один из перечисленных ниже параметров.

* **Отключено** — синхронизация изображений отключена.
* **В Shopify** — изображения товаров экспортируются в Shopify.
* **Из Shopify** — изображения из Shopify импортируются в [!INCLUDE[prod_short](../includes/prod_short.md)].

Синхронизация изображений может быть инициализирована двумя способами, описанными ниже.

### <a name="sync-product-images-from-the-shopify-shop-page"></a>Синхронизация изображений продукции со страницы магазина Shopify

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") введите **Магазины Shopify** и выберите соответствующую ссылку.
2. Выберите магазин, для которого вы хотите синхронизировать изображения, чтобы открыть страницу **Карточка магазина Shopify**.
3. Выберите действие **Синхронизировать изображения продукции**.

### <a name="sync-product-images-from-the-shopify-products-page"></a>Синхронизация изображений продукции со страницы продукции Shopify

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") введите **Продукты Shopify** и выберите соответствующую ссылку.
2. Выберите действие **Синхронизировать изображения продуктов**.

### <a name="image-synchronization-remarks"></a>Замечания по синхронизации изображений

* Когда вы экспортируете изображения из [!INCLUDE[prod_short](../includes/prod_short.md)] в Shopify, изображения заменяют собой ранее экспортированные. Более ранние изображения перестают быть доступны.
* Если вы удалите изображение в [!INCLUDE[prod_short](../includes/prod_short.md)], изображение в Shopify удалено не будет. Вам потребуется вручную удалить старые изображения на **портале администрирования Shopify**.
* Изображения, которые вы экспортируете в Shopify, должны соответствовать требованиям Shopify. В противном случае вы не сможете их импортировать. Подробнее о требованиях к мультимедиа см. в статье о [типах мультимедиа для продуктов на help.shopify.com](https://help.shopify.com/en/manual/products/product-media/product-media-types#images).

## <a name="sync-prices-with-shopify"></a>Синхронизировать цены с Shopify

Вы можете управлять процессом экспорта цен с помощью следующих параметров:

|Поле|Описание|
|------|-----------|
|**Ценовая группа клиентов**|Определите цену товара в Shopify. Берется продажная цена этой ценовой группы клиентов. Если группа не указана, используется цена в карточке товара.|
|**Скидочная группа клиентов**|Определите скидку, которая будет использоваться при расчете цены товара в Shopify. Цены со скидкой сохраняются в поле **Цена**, а полная цена хранится в поле **Сравнить по цене**.|
|**Разрешить скидку по строке**|Определяет, разрешаете ли вы скидку по строке при расчете цен для Shopify. Этот параметр применяется только к ценам на товар. Цены для ценовой группы клиента имеют собственный переключатель в строках.|
|**Цены с учетом НДС**|Указывает, будет ли при расчете цен для Shopify включаться НДС. Подробнее см. в разделе [Настройка налогов](setup-taxes.md).|
|**НДС Бизнес Группа**|Определяет, какая учетная бизнес-группа НДС используется для расчета цен в Shopify. Это должна быть группа, которую вы используете для внутренних клиентов. Подробнее см. в разделе [Настройка налогов](setup-taxes.md).|
|**код валюты;**|Вводить код валюты нужно только в случае, если в вашем интернет-магазине используется валюта, отличная от локальной валюты (МВ). Для указанной валюты должен быть настроен обменный курс. Если ваш интернет-магазин использует ту же валюту, что и [!INCLUDE[prod_short](../includes/prod_short.md)], оставьте поле пустым.|

Вы можете экспортировать цены для синхронизированных товаров двумя описанными ниже способами.

### <a name="sync-prices-from-the-shopify-products-page"></a>Синхронизация цен со страницы продукции Shopify

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") введите **Продукты Shopify** и выберите соответствующую ссылку.
2. Выберите действие **Синхронизировать цены с Shopify**.

### <a name="price-calculation-remarks"></a>Замечания по расчету цены

* При определении цены [!INCLUDE[prod_short](../includes/prod_short.md)] использует логику "самая низкая цена". Однако логика самой низкой цены игнорирует цену за единицу, указанную в карточке товара, если определена цена в ценовой группе. Это справедливо даже в том случае, если цена за единицу в карточке товара ниже.
* Для расчета цен соединитель создает временное предложение по продаже для товара с количеством 1 и использует стандартную логику расчета цены. Используются только цены и скидки, применимые к количеству 1. Вы не можете экспортировать разные цены или скидки в зависимости от количества.
* Соединитель отправляет запрос на обновление цен в Shopify, если цена в [!INCLUDE[prod_short](../includes/prod_short.md)] изменилась. Например, если вы синхронизировали продукты и цены, а затем изменили какую-либо цену в Shopify, выбор действия **Синхронизировать цены в Shopify** не окажет никакого влияния на эту цену в Shopify, поскольку новая цена, рассчитанная соединителем, совпадает с ценой, хранящейся в варианте Shopify из предыдущей синхронизации. Значение поля **Цена до скидки** обновляется только в случае обновления основной цены.

## <a name="sync-inventory-to-shopify"></a>Синхронизировать запасы с Shopify

Синхронизацию запасов можно настроить для уже синхронизированных товаров. Есть два условия, которые должны быть соблюдены:

1. Отслеживание запасов должно быть включено для продукции в Shopify. Если товары экспортируются в Shopify, попробуйте активировать переключатель **Отслеживание запасов** на странице **Карточка магазина Shopify**. Дополнительные сведения см. в разделе [Экспорт товаров в Shopify](synchronize-items.md#export-items-to-shopify).
2. Синхронизация запасов должна быть включена для **Места Shopify**.

### <a name="to-enable-inventory-sync"></a>Чтобы включить синхронизацию инвентаря

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") введите **магазин Shopify** и выберите соответствующую ссылку.
2. Выберите магазин, для которого вы хотите синхронизировать запасы, чтобы открыть страницу **Карточка магазина Shopify**.
3. Выберите действие **Места**, чтобы открыть **Адреса магазинов Shopify**.
4. Выберите действие **Получить места Shopify** для импорта всех местоположений, определенных в Shopify. Вы можете найти их в меню [**Места**](https://www.shopify.com/admin/settings/locations) настроек вашей страницы **Администрирование Shopify**.
5. В поле **Фильтр мест** добавьте места, если вы хотите включить запасы только из определенных мест. Таким образом, вы можете ввести *ВОСТОК|ЗАПАД*, чтобы сделать запасы только из этих двух мест доступными для продажи через интернет-магазин.
6. Выберите метод расчета запаса, который будет использоваться для выбранных складов Shopify.
7. Включите **Местонахождение продукта по умолчанию**, если вы хотите, чтобы склад использовался для создания записей запасов и участвовал в синхронизации запасов.

Синхронизация запасов может быть запущена двумя способами, описанными ниже.

### <a name="sync-inventory-from-the-shopify-shop-page"></a>Синхронизация запасов со страницы магазина Shopify

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") введите **Магазины Shopify** и выберите соответствующую ссылку.
2. Выберите магазин, для которого вы хотите синхронизировать запасы, чтобы открыть страницу **Карточка магазина Shopify**.
3. Выберите действие **Синхронизация запасов**.

### <a name="sync-inventory-from-the-shopify-products-page"></a>Синхронизация запасов со страницы продукции Shopify

1. Введите в поиске ![Лампочка, которая открывает функцию "Что вы хотите сделать".](../media/ui-search/search_small.png "Что вы хотите сделать") введите **Продукты Shopify** и выберите соответствующую ссылку.
2. Выберите действие **Синхронизация запасов**.

### <a name="inventory-remarks"></a>Замечания по запасам

* Существует два стандартных метода расчета запасов: **Прогнозируемое наличие на дату** и **Свободные запасы (не зарезервированные)**. Благодаря возможности расширения вы можете добавить другие опции. Чтобы узнать больше о возможностях расширения, перейдите к [примерам](/dynamics365/business-central/dev-itpro/developer/devenv-extending-shopify#stock-calculation). 
* Вы можете просмотреть информацию об акциях, полученную от Shopify на странице **Информационная панель запасов Shopify**. На этой информационной панели вы получите обзор на функцию запасов Shopify и последний рассчитанный запас в [!INCLUDE[prod_short](../includes/prod_short.md)]. Имеется одна запись на место.
* Если информация о запасах в Shopify отличается от **Прогнозируемого доступного баланса** в [!INCLUDE[prod_short](../includes/prod_short.md)], тогда запас будет обновлен в Shopify.
* Когда вы добавляете новый склад в Shopify, вы также должны добавить для него записи инвентаризации. Shopify не делает этого автоматически для существующих продуктов и их вариантов, и соединитель не будет синхронизировать уровни запасов для таких товаров на новом складе. Чтобы узнать больше, перейдите к разделу [Назначение запасов складам](https://help.shopify.com/manual/locations/assigning-inventory-to-locations).
* И **Службы выполнения Business Central**, и обычные склады поддерживаются и могут использоваться для отгрузки и хранения запасов.

#### <a name="example-of-calculation-of-projected-available-balance"></a>Пример расчета прогнозируемого доступного баланса

Имеется 10 единиц товара А в наличии и два невыполненных заказа на продажу. Один на понедельник с количеством *Один* и один на четверг с количеством *Два*. В зависимости от того, когда вы синхронизируете запасы, система будет менять уровень запасов в Shopify на разные количества:

|Когда выполняется синхронизация запасов|Значение, используемое для обновления уровня запасов|Комментарий|
|------|-----------------|-----------------|
|Вторник|9|Запасы 10 минус заказ на продажу должны быть отправлен в понедельник|
|Пятница|7|Запасы 10 минус оба заказа на продажу|

### <a name="two-approaches-to-manage-fulfillments"></a>Два подхода к управлению выполнением заказов

Существует два способа организовать выполнение заказов в Shopify:

* «Встроенное» выполнение заказов и отслеживание запасов Shopify
* Стороннее выполнение заказов и отслеживание запасов

Хранение запасов каждого продукта в Shopify может осуществляться либо Shopify, либо сторонней логистической организацией (3PL).

Если вы используете выполнение заказов Shopify, вы также можете определить несколько складов в Shopify. После создания заказа Shopify выбирает заказ исходя из наличия и приоритета. Вы также можете указать, на каких складах вы планируете отслеживать конкретный продукт; например, никогда не продавать со склада *Шоу-рум*.

Если вы используете 3PL, физической обработкой заказов занимается провайдер 3PL, поэтому склады не требуются. В случае с 3PL поле SKU становится обязательным.

Когда вы решаете, на каком складе отслеживать товар, Shopify создает записи в таблице **Уровни запасов**, которую можно обновлять вручную в зависимости от наличия запасов.

Соединитель поддерживает оба режима. Он может отправлять запасы на несколько складов Shopify или работать как служба выполнения заказов.

С точки зрения [!INCLUDE[prod_short](../includes/prod_short.md)], когда вы создаете товар и хотите отправить его в Shopify, вам также нужно:

* использовать переключатель **Местоположение продукта по умолчанию** переключатель, чтобы указать, будут ли заказы этого товара выполняться Shopify или 3PL. Всегда есть **Служба выполнения Business Central**, но если установлено больше приложений, таких служб выполнения может быть больше. Вы можете включить **Местоположение продукта по умолчанию** только в одной записи, если хотите использовать службу выполнения. 
* использовать переключатель **Местоположение продукта по умолчанию**, чтобы указать, какие склады вы хотите использовать для отслеживания запасов. Вы можете включить **Местоположение продукта по умолчанию** для нескольких складов, где **Служба выполнения** отключена. Обратите внимание, что запасы всегда отслеживаются для основного местоположения.

#### <a name="whats-the-difference"></a>В чем разница?

Выполнение заказов Shopify удобно использовать при использовании POS-терминала Shopify и наличии нескольких физических магазинов. Сотрудники в физическом магазине должны иметь представление о своих текущих запасах. В этом случае вам нужно создать несколько складов в Shopify, несколько складов в [!INCLUDE[prod_short](../includes/prod_short.md)] и активировать **Местоположение продукта по умолчанию** для всех этих складов.  

Если логистика обрабатывается в [!INCLUDE[prod_short](../includes/prod_short.md)], где у вас может быть любое количество складов, представляющих распределительные центры, вы не создаете склады в Shopify; соединитель автоматически создает службы выполнения Business Central, и вы можете привязывать запасы (с помощью фильтров складов) с нескольких складов к одной записи служб выполнения. В результате в Shopify нет информации о том, откуда отправляются товары — есть только информация для отслеживания, тогда как в [!INCLUDE[prod_short](../includes/prod_short.md)] можно выбирать товары по наличию и близости к пункту назначения.

#### <a name="example-of-using-default-product-location-toggle"></a>Пример использования переключателя «Местоположение продукта по умолчанию»

Выбрав действие **Получить склады Shopify** на странице **Склады Shopify**, вы увидите следующие склады:

|Имя/название|Является службой выполнения|Является основным|
|------|-----------------|-----------------|
|Главный| |**Да**|
|Секунда| | |
|Служба выполнения Business Central|**Да**| |

Давайте рассмотрим, что дает включение переключателя «Местоположение продукта по умолчанию»:

|Название складов, где включен переключатель «Местоположение продукта по умолчанию»|Влияние на то, как создается продукт в Shopify|
|------|-----------------|
|Главный| Запасы будет храниться на нескольких складах; выбранные склады: главный (основной) |
|Главный и второй| Запасы будет храниться на нескольких складах; выбранные склады: главный и второй |
|Служба выполнения Business Central|Запасы будут храниться в Службе выполнения заказов Business Central; выбранные склады: (приложение) Служба выполнения заказов Business Central|
|Служба выполнения Business Central и главный| Ошибка: стандартные склады Shopify нельзя использовать в сочетании со складами служб выполнения|

## <a name="see-also"></a>См. также

[Начало работы с соединителем для Shopify](get-started.md)  
