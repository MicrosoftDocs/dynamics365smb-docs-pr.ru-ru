---
title: Создание счетов на предоплату
description: 'Обработка ситуаций, в которых вы или ваш поставщик требует предоплату. Используйте процентные значения по умолчанию для каждой строки продажи или покупки или скорректируйте сумму по мере необходимости.'
author: brentholtorf
ms.author: bholtorf
ms.reviewer: bholtorf
ms.topic: how-to
ms.date: 10/04/2023
ms.custom: bap-template
ms.search.form: '42, 50, 9305, 9307'
ms.service: dynamics-365-business-central
---
# Создание счетов на предоплату

Если вы требуете, чтобы клиенты платили до того, как вы отправите им заказ, вы можете использовать функции предоплаты. То же самое применимо, если ваш поставщик требует, чтобы вы произвели оплату до того, как он отправит вам заказ.  

При создании заказа продажи или покупки можно начать процесс предоплаты. Процент предоплаты по умолчанию для товара в заказе или для клиента или поставщика, будет включен в счет на предоплату. Вы также можете указать процент предоплаты для всего документа.

После создания заказов продажи или покупки можно создать счет на предоплату для него. Используйте процентные значения по умолчанию для каждой строки продажи или покупки или скорректируйте сумму. Например, можно указать общую сумму для всего заказа.  

В следующей процедуре описывается, как выставлять счета на предоплату для заказов на продажу. Действия для заказов на покупку аналогичны.  

## Процедура создания счета на предоплату

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок введите **Заказы на продажу**, а затем выберите связанную ссылку.  
2. Создать новый заказ на продажу для соответствующего клиента. Дополнительные сведения см. в разделе [Продажа продукции](sales-how-sell-products.md).  

    На Экспресс-вкладка **Предоплата**, в поле **Предоплата (%)** указывается процент, используемый для расчета суммы предоплаты. Поле заполняется автоматически, если в карточке клиента указан процент предоплаты по умолчанию. Процент может быть изменено. <!--This percentage is applied to lines where the item on that line does not already specify a prepayment percentage. The prepayment percentage is only copied from the header to lines that do not copy the default prepayment percentage from the item.-->  

    Выбрать поле **Сжать предоплату**, если вы хотите создать в счете на предоплату строки, объединяющие строки из заказа на продажу, если:  

    - Они имеют один и тот же счет главной книги для учета предоплаты, что определяется общей настройкой учета.  
    - Они имеют одинаковые измерения.  

    Не выбирайте поле **Сжать предоплату**, если требуется определить счет на предоплату с отдельным строками для каждой строки заказа продажи, которая имеет процент предоплаты.  

    Срок оплаты предоплаты рассчитывается автоматически на основе значения **Код условий предоплаты**.

    > [!NOTE]
    > Если в некоторых строках счета требуется 100% предоплата, а в других нет, а на счете предоплаты есть НДС, округленная сумма может вызвать ошибку при создании счета на предоплату. Ошибка возникает из-за того, что сумма счета на предоплату превышает суммы в строках документа. Чтобы устранить проблему, измените суммы в одной или во всех строках, требующих 100% предоплаты. Это изменение приведет к пересчету округления суммы НДС и использованию накопленной величины округления в последней измененной строке.
    >
    > Еще два способа решить проблему:
    >
    > * Создайте отдельную учетную группу товаров с НДС и настройку учета НДС с отдельным идентификатором НДС и используйте ее для товаров или строк, требующих 100% предоплаты. Округление выполняется для каждого идентификатора НДС, поэтому отдельное округление будет выполняться для товаров, присвоенных группе учета товаров с НДС.
    > * Используйте отдельный счет для товаров или строк, которые требуют и не требуют 100% предоплаты.

3. Заполните строки продажи.  

    Если вы указали процент предоплаты по умолчанию для клиента или на экспресс-вкладке **Предоплата** для этого документа, это значение копируется в каждую строку. Можно изменить содержимое поля **Предоплата (%)** в строке.  

    > [!TIP]
    > Если вы не видите поле **Предоплата %**, вы можете добавить его с помощью персонализации.  Дополнительные сведения см. в разделе [Персонализация рабочей области](ui-personalization-user.md).

4. Для просмотра общей суммы предоплаты выберите действие **Статистика**.

    Если необходимо скорректировать сумму предоплаты для данного заказа, можно изменить содержимое поля **Сумма предоплаты** на странице **Статистика заказов на продажу**.  

    Если выбрано поле **Цены с учетом НДС**, а поле **Сумма предоплаты включая НДС** доступно для редактирования.  

    При изменении значения поля **Сумма предоплаты** данная сумма будет пропорционально распределяться между всеми строками, за исключением тех строк, у которых значение поля **Предоплата (%)** равно **0**.  

5. Чтобы напечатать тестовый отчет перед учетом счета на предоплату, выберите действие **Предоплата**, затем выберите действие **Тестовый отчет о предоплате**.  
6. Чтобы учесть счет на предоплату, выберите действие **Предоплата**, затем выберите действие **Учет счета на предоплату**.  

    Чтобы учесть и распечатать счет на предоплату, выберите действие **Учет и печать счета на предоплату**.  

Для данного заказа можно создать другие счета на предоплату. Чтобы выпустить другой счет, увеличьте сумму предоплаты в одной или нескольких строках, скорректируйте дату в случае необходимости и учтите счет на предоплату. Новый счет будет создан на сумму разницы между суммами предоплаты, уже включенными в счет, и новой суммой предоплаты.  

> [!NOTE]  
> Если вы расположены в Северной Америке, вы не можете изменить процент предоплаты после учета счета на предоплату. Это запрещено в североамериканской версии [!INCLUDE[prod_short](includes/prod_short.md)], поскольку в противном случае расчет налога будет неверным.  

 Когда все готово для учета остатка по счету, его учет выполняется так же, как и учет любого счета, а сумма предоплаты автоматически вычитается из причитающейся суммы.  

## Автоматическое обновление статуса предоплаченных заказов и счетов

Вы можете ускорить обработку заказов и счетов, настроив записи очереди заданий, которые автоматически обновляют статус этих документов. Когда счет на предоплату оплачен, записи очереди заданий могут автоматически изменить статус документа с **В ожидании предоплаты** на **Выпущен**. Когда вы настраиваете записи очереди заданий, вам нужно будет использовать модули codeunit **384 Обновить ожидающие продажи с предоплатой** и **384 Обновить ожидающие покупки с предоплатой**. Мы рекомендуем запланировать частый запуск записей, например, каждую минуту. Дополнительные сведения см. в разделе [Использование очередей работ для планирования задач](admin-job-queues-schedule-tasks.md).

## См. также

[Выставление счетов на предоплату](finance-invoice-prepayments.md)  
[Пошаговое руководство. Настройка и выставление счетов на продажу](walkthrough-setting-up-and-invoicing-sales-prepayments.md)  
[Финансы](finance.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)  
[Персонализация рабочей области](ui-personalization-user.md)  


[!INCLUDE[footer-include](includes/footer-banner.md)]
