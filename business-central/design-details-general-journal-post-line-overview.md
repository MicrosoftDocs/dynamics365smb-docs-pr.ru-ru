---
title: Обзор строки учета финансового журнала | Документация Майкрософт
description: В этом разделе рассматриваются изменения модуля codeunit 12 **Фин. журнал - строка учета** — это основной объект приложения для учета главной книги и единственное место для вставки операций главной книги, НДС, книги поставщиков и клиентов.
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: design, general ledger, post
ms.date: 04/01/2021
ms.author: edupont
ms.openlocfilehash: 6866e852899df3de3de2c4560c26ad981e46fda5
ms.sourcegitcommit: 766e2840fd16efb901d211d7fa64d96766ac99d9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "5777852"
---
# <a name="general-journal-post-line-overview"></a>Обзор строки учета финансового журнала
Модуль codeunit 12 **Фин. журнал - строка учета** — это основной объект приложения для учета главной книги и единственное место для вставки операций главной книги, НДС, книги поставщиков и клиентов. Этот модуль codeunit также используется для всех операций применения, отмены применения и сторнирования.  
  
Хотя модуль codeunit улучшался в каждом выпуске за последние десять лет, его архитектура оставалась по большей части неизменной. Модуль codeunit стал очень большим и содержит приблизительно 7600 строк кода. В этом выпуске [!INCLUDE[prod_short](includes/prod_short.md)] архитектура изменена и модуль codeunit стало проще использовать и поддерживать. Эта документация включает изменения и содержит сведения, необходимые для обновления.  
  
## <a name="old-architecture"></a>Старая архитектура  
Старая архитектура имела следующие функции:  
  
* Глобальные переменные использовались слишком часто, что увеличивало возможность скрытых ошибок из-за неправильного использования переменных.  
* Существовало множество длинных процедур (содержащих более 100 строк кода) с высоким уровнем цикломатической сложности (т.е. частое использование вложенных операторов CASE, REPEAT и IF), из-за чего код было сложно считывать и поддерживать.  
* Несколько процедур, которые использовались только локально и предназначались только для локального использования, не были отмечены как локальные.  
* В большинстве процедур отсутствовали параметры и использовались глобальные переменные. В некоторых процедурах использовались параметры и были переопределены глобальные переменные локальными значениями.  
* Шаблоны кода для поиска счетов главной книги и создания операций НДС и главной книги не были стандартизированы и различаются в зависимости от места использования. Кроме того, часто возникает дублирование кода и нарушается симметрия между кодом клиента и поставщика.  
* Большая часть кода в модуле codeunit 12, т.е. приблизительно 30 процентов, связана с расчетами скидки оплаты и отклонения в оплате, хотя эти функции не требуются в большинстве стран или регионов.  
* Функции "Учет", "Применить", "Отменить применение", "Сторнировать", "Скидка оплаты", "Отклонение в оплате" и "Коррекция валютного курса" были объединены в модуль codeunit 12 с помощью длинного списка глобальных переменных.  
  
### <a name="new-architecture"></a>Новая архитектура  
В [!INCLUDE[prod_short](includes/prod_short.md)] модуль codeunit 12 усовершенствован следующим образом:  
  
* Модуль codeunit 12 был реорганизован на более мелкие процедуры (все содержат менее 100 строк кода).  
* Стандартизированные шаблоны для поиска счетов главной книги реализованы с помощью вспомогательных функций из таблицы "Учетная группа".  
* Платформа механизма учета была реализована для управления началом и окончанием транзакций и для изолирования создания в главной книге и операциях НДС, коллекции коррекции НДС и расчета дополнительных сумм валюты.  
* Дублирование кода устранено.  
* Множество вспомогательных функций перемещены в соответствующие таблицы и книги клиентов и поставщиков.  
* Использование глобальных переменных сведено к минимуму, чтобы в каждой процедуре использовались параметры и инкапсулировалась собственная логика применения.  
  
## <a name="see-also"></a>См. также  
[Сведения о проектировании: структура интерфейса учета](design-details-posting-interface-structure.md)   
[Сведения о проектировании: структура механизма учета](design-details-posting-engine-structure.md)


[!INCLUDE[footer-include](includes/footer-banner.md)]