---
title: 'Таблица записей о резервировании — функции, обновляющие таблицу записей о резервировании | Microsoft Docs'
description: Это руководство поможет вам понять и устранить проблемы несоответствия данных в таблице «Запись резервирования».
author: brentholtorf
ms.topic: conceptual
ms.devlang: al
ms.search.keywords: null
ms.date: 06/26/2024
ms.author: bholtorf
ms.service: dynamics-365-business-central
ms.reviewer: bholtorf
---

# <a name="reservation-entry-table---introduction"></a>Таблица ввода данных бронирования - Введение

В этом техническом документе содержатся рекомендации, которые помогут вам понять и устранить проблемы несоответствия данных в таблице *Reservation Entry*  (таблица 337) в [!INCLUDE[prod_short](includes/prod_short.md)]. Первая часть представляет собой введение в функции, которые генерируют или изменяют данные в этой таблице. Он также охватывает несколько полей в таблице *Запись бронирования*, которые стоит отметить в связи с этими функциями. Во второй части на примерах демонстрируется, как создаются, удаляются или изменяются записи в таблице *Reservation Entry*  при обработке заказов на перемещение или выполнении функций планирования.

Таблица *Запись бронирования* используется для обработки и хранения информации, касающейся бронирования, отслеживания позиций и отслеживания заказов.

При отслеживании позиций с частичной публикацией таблица работает совместно с таблицей *Спецификации отслеживания*  (таблица 336). Данные, введенные пользователем на странице **Строки отслеживания позиций**, создаются во временной версии таблицы 336 и сохраняются в таблице 337 и таблице спецификаций отслеживания при закрытии страницы.

В целом данные, сгенерированные в таблице *Reservation Entry*, зависят от того, какие функции вы используете и какие параметры вы выбрали для элемента карточка. К ним относятся:

- Политика отслеживания заказов
- Политика бронирования
- Планирование функций выполнено
- Политика повторного заказа и производства
- Параметры планирования по товару или единице складского учета карточка
- Код трассировки товара

## <a name="features-that-update-the-reservation-entry-table"></a>Функции, обновляющие таблицу записей о бронировании

### <a name="order-tracking-policy"></a>Политика отслеживания заказов

Если поле  **Политика отслеживания заказов** для элемента установлено на None, [!INCLUDE[prod_short](includes/prod_short.md)] никогда не будет создавать записи о резервировании в таблице *Запись о резервировании*, если только не будет выполнен план чистого изменения или регенеративный план, резервирование или отслеживание элемента. Кроме того, если отслеживание заказов не включено, вы можете иметь записи о резервировании при использовании политик «Производство на заказ» или «Сборка на заказ».

Вы можете рассмотреть возможность установки  **Политики отслеживания заказов**  на значение None, если вам не требуется оперативно отслеживать спрос относительно предложения или наоборот. Отслеживание поставок по отношению к спросу осуществляется с помощью функции отслеживания заказов или модуля планирования. Мы не рекомендуем использовать отслеживание заказов вместе с функцией планирования.

Если вы установите для поля **Политика отслеживания заказов** значение Только отслеживание, [!INCLUDE[prod_short](includes/prod_short.md)] всегда будут создаваться записи в таблице 337 при каждом создании заказа для товара, но **Статус резервирования** в таблице 337 не всегда строго установлен на Отслеживание. Рассмотрим следующий сценарий:

> [!NOTE]  
> Для всех примеров рабочая дата установлена как 23.01.2014 (ММ/ДД/ГГГГ). 
  
1. Создайте элемент, в поле **Политика отслеживания заказов** установлено значение Только отслеживание.  
1. Создайте заказ покупки. [!INCLUDE[prod_short](includes/prod_short.md)] создаст запись о резервировании со **статусом резервирования** «Излишки», поскольку заказ на закупку еще не распределен по требованию.
1. Создайте заказ на продажу. [!INCLUDE[prod_short](includes/prod_short.md)] теперь создаст еще одну запись бронирования со **статусом бронирования** Отслеживание.

 **Статус бронирования**, созданный в шаг 2, будет обновлен до «Отслеживание»; это выполняется [!INCLUDE[prod_short](includes/prod_short.md)] автоматически. Эта концепция называется динамическим отслеживанием.
Установив для поля  **Политика отслеживания заказов**  для товара значение Только отслеживание, конечный пользователь может использовать функцию отслеживания заказов, чтобы получить обзор того, к какому поставке относится спрос и наоборот.

> [!NOTE]  
> Функция отслеживания не заменяет функцию планирования, которая учитывает все товары, требования и поставки в совокупности, чтобы предоставить оптимальные предложения по планированию для оптимизации уровней обслуживания клиентов и балансировки уровней запасов.

### <a name="reservation-policy"></a>Политика бронирования

Бронирование состоит из пары записей в таблице *Reservation Entry*  со **Reservation Status** резервирования, которые имеют тот же номер записи. В одной записи включено поле «Положительный», и она указывает на источник. В другой записи поле **Positive** неактивно и указывает на спрос. Поля **Тип источника**, **Справочный номер источника** и **Идентификатор источника** выделяют связь резервирования между спросом и предложением.

Информация в поле **Тип источника**  — это таблица, к которой относится поле **Номер записи**  бронирования. Например, если это запись спроса (отрицательная), то это может быть таблица *Заказ на продажу* (таблица 37) или *Компонент планирования* (таблица 99000829).

Поле **Идентификатор источника**  содержит идентификатор документа в таблице, на который ссылается тип источника.

 **Исходный номер ссылки.** поле содержит номер ссылки на строку, на которую сделана бронь **Номер записи**  связано с. Если запись относится к строке продажи или покупки, строке журнала или строке заявки, информация в этом поле копируется из **Номер строки** . Если это связано с записью в *Запись в книге учета товаров*  таблица (таблица 32), информация в этом поле копируется из **Номер записи**  поле *Запись в книге учета товаров*  стол.

При использовании опции политики резервирования Always в сочетании с отслеживанием заказов обычно оба синхронизированы. Однако, когда резервирование удаляется или дата получения поставки переносится вперед после даты платежа по требованию, отслеживание заказа будет удалено. Вы также можете столкнуться с сообщением об ошибке, в котором [!INCLUDE[prod_short](includes/prod_short.md)] спрашивается, что делать с существующими бронированиями. Этот сценарий проиллюстрирован в следующем примере:

1. Создайте новый элемент под названием COMP. Задайте следующие поля:
  - **Система пополнения**: Покупка
  - **Политика отслеживания заказов**: только отслеживание
  - **Резерв**: Всегда
2. Создайте второй элемент под названием FG. Задайте следующие поля:
  - **Система пополнения**: Заказ товара
  - **Политика отслеживания заказов**: только отслеживание
  - **Резерв**: Всегда
3. Создайте второй элемент под названием FG. Задайте следующие поля:
  - **Элемент**: КОМП
  - **Количество на**: 1
4. Подтвердите производственную спецификацию № BOM FG и назначьте ее напротив позиции FG.
5. Создайте заказ покупки. Задайте следующие поля:
  - **Элемент**: КОМП
  - **Количество**: 10
  - **Код местоположения**: СИНИЙ
  - **Ожидаемая дата получения**: 24.01.2014
6. Создайте заказ на продажу. Задайте следующие поля:
  - **Дата отправки**: 14.02.2014
  - **Код местоположения**: СИНИЙ
  - **Элемент**: КОМП
  - **Количество**: 10

> [!NOTE]  
> Между заказом на покупку и заказом на продажу выполнено автоматическое резервирование. Кроме того, создано отслеживание заказов между заказами на покупку и продажу.

7. Создайте вручную выпущенный производственный заказ. Задайте следующие поля:
  - **Товар**: 14.02.2014
  - **Количество**: 10
  - **Расположение**: СИНИЙ
  - **Срок выполнения**: 02/01/2014
8. На вкладке **Главная**  в группе Процесс выберите **Обновить производственный заказ**.
9. Откройте список компонентов и найдите элемент COMP.

> [!NOTE]  
> Никакого бронирования или отслеживания заказов не создается [!INCLUDE[prod_short](includes/prod_short.md)]. Причина в том, что для заказа на продажу, созданного в шаг 6, уже существует резервирование.

Предположим, что по деловым причинам товар необходим более срочно по выпущенному производственному заказу, созданному в шаг 7. Итак, далее, на следующих шагах мы отменим резервирование из заказа на продажу, который был создан в шаг 6, и обратим внимание на то, как обрабатывается отслеживание заказа.

10. Найдите заказ на продажу товара COMP из шаг 6 и отмените бронирование.
11. Откройте заказ на закупку из шаг 5 и обратите внимание, что отслеживание заказа теперь создано между заказом на закупку и компонентом, необходимым из выпущенного производственного заказа.
12. Воссоздайте резервирование между компонентом, необходимым из выпущенного производственного заказа, и поставкой из заказа на закупку в шаг 5.

> [!NOTE]  
> Бронирование не создается заново, это необходимо сделать вручную.

13. Измените поле **Ожидаемая дата получения** в заголовке заказа на покупку в шаг 5 с 24.01.2014 на 05.02.2014.

[!INCLUDE[prod_short](includes/prod_short.md)] отобразится следующее предупреждающее сообщение:

   Для этого заказа существуют оговорки. Эти бронирования будут отменены, если это изменение вызовет конфликт данных. Продолжить?

14. Выберите «Да». Найдите записи о бронировании и отслеживании заказа в заказе на покупку.

> [!NOTE]  
> Существующее бронирование отменено и его необходимо создать заново вручную. Однако заказ является динамическим и был воссоздан [!INCLUDE[prod_short](includes/prod_short.md)] для существования между заказом на покупку и заказом на продажу. Причина в том, что спрос на выпущенный производственный заказ (01.02.2014) предшествует ожидаемой дате получения поставки.

На этом демонстрация взаимодействия между использованием автоматического бронирования и отслеживания заказов завершена. В примерах также показано, что происходит при изменении сроков выполнения, а также сообщение об ошибке, которое появляется при возникновении конфликта резервирований.

### <a name="planning-calculated"></a>Планирование рассчитано

Планирование, выполненное с использованием планирования заказов, рабочего листа заявок или рабочего листа планирования, создаст записи в таблице *Запись резервирования*, в поле **Статус резервирования**  будет установлено значение Отслеживание, Резервирование или Избыток. Всегда должна быть совпадающая пара с одинаковым номером записи положительного и отрицательного значения в поле **Количество (база)**, если статус — «Отслеживание» или «Резервирование». Поле **Тип источника**  будет типом спроса, то есть таблица 37 для отрицательного количества и таблица планирования, например, таблица 246, для положительного количества. Поле **Идентификатор источника** будет иметь значение ПЛАНИРОВАНИЕ.

В случае нераспределенного предложения или спроса [!INCLUDE[prod_short](includes/prod_short.md)] установит поле **Статус резервирования**  на Избыток. Например, вы можете иметь статус резервирования «Излишки», когда существующий запас ниже количества резервного запаса или спрос привязан к прогнозу.

Таблица *Неотслеживаемые элементы планирования*  (таблица 99000855) содержит информацию о неотслеживаемых количествах, отображаемую, когда пользователь выполняет поиск на странице отслеживания заказов, чтобы увидеть неотслеживаемые количества, или выбирает значок предупреждения на листе планирования. Таблица содержит записи, учитывающие неотслеживаемое избыточное количество в сети отслеживания заказов.

Эти записи создаются в ходе планирования и поясняют, откуда появилось нетрассированное избыточное количество в строке трассировки заказов. Этот нетрассированный излишек может появляться из следующих источников:

- «Прогноз производства»;
- «Общие заказы»;
- «Кол-во страхового запаса»;
- «Точка повтора заказа»;
- «Максимальный запас»;
- «Кол-во для повторного заказа»;
- «Максимальное кол-во заказа»;
- «Минимальное кол-во заказа»;
- «Заказать несколько»;
- «Демпфер (% от размера партии)».

В таблице *Запись резервирования*, как и в заказах на закупку, передачу и производство, есть поле **Гибкость планирования** . Это поле параметра определяет, учитывается ли поставка, представленная этими заказами на поставку, системой планирования при расчете сообщений о действиях. Если поле содержит опцию «Неограниченно», то система планирования включает строку при расчете Сообщений о действиях. Если поле содержит опцию «Нет», то линия является фиксированной и неизменяемой, и система планирования не включает ее в расчет сообщений о действиях. Функция управляется в *Бронирование Вход*  таблицу по полю с таким же именем.

### <a name="reordering-and-manufacturing-policy"></a>Политика повторного заказа и производства

Если функция планирования выполняется для набора позиций с политикой повторного заказа, установленной на «Заказ», [!INCLUDE[prod_short](includes/prod_short.md)] будет создавать записи в таблице *Запись резервирования*  со статусом резервирования типа «Резервирование» вместо «Отслеживание».

Поля **Тип источника** и **Идентификатор источника** будут обрабатываться так же, как и другие политики переупорядочивания. Однако в поле **Привязка** в таблице *Запись бронирования* будет [!INCLUDE[prod_short](includes/prod_short.md)] введено Order-to-Order.

Поле **Привязка** заполняется для управления заказами на поставку, привязанными к определенному спросу, например, производственными заказами, которые создаются непосредственно из заказа на продажу. Поле отображает «Заказ-на-заказ», когда запись привязана конкретно к спросу или предложению (автоматическое резервирование). Спрос может быть связан с продажами или потребностью в компонентах.

### <a name="item-tracking-and-prospect-reservation-entry"></a>Отслеживание товара и запись резервирования потенциального клиента

Статус резервирования потенциального клиента можно создать [!INCLUDE[prod_short](includes/prod_short.md)] в таблице *Запись резервирования*, когда вы не используете какие-либо сущности сети заказов, то есть отслеживание заказов. Например, в строке журнала потребления вы назначаете компоненту отслеживание позиций. Однако, если заказ на товар уже отслеживается, [!INCLUDE[prod_short](includes/prod_short.md)] может быть создано больше записей о резервировании потенциальных клиентов. Это продемонстрировано в ПРИМЕРЕ 2, связанном с заказами на перевод во второй части настоящего документа.

При просмотре или изменении страницы **Строки отслеживания товара** совместное содержимое таблицы *Спецификация отслеживания* (таблица 336) и таблицы *Запись о резервировании* представляется во временной версии таблицы 336. Это обеспечивает доступ к данным за прошлые периоды и активным данным трассировки товаров как к единому целому.

Резервирование делится на две категории: неконкретное резервирование, когда номера партий и серийные номера не указываются на момент резервирования, и конкретное резервирование, когда вы резервируете конкретные номера партий или серийные номера из инвентаря.

При неспецифическом бронировании поле **Номер лота** или **Серийный номер** пустое в **Номер записи** таблицы 337, указывающей на спрос (например, продажу). Из-за структуры логики резервирования в [!INCLUDE[prod_short](includes/prod_short.md)], когда вы размещаете неспецифическое резервирование для отслеживаемого элемента в инвентаре, [!INCLUDE[prod_short](includes/prod_short.md)] тем не менее необходимо выбрать конкретные записи в регистре элементов для резервирования.

Поскольку записи в регистре товаров содержат информацию об отслеживании товаров, резервирование косвенно резервирует конкретные номера партий или серийные номера, даже если пользователь этого не подразумевал. Однако при позднем связывании [!INCLUDE[prod_short](includes/prod_short.md)] все равно резервируются определенные записи, но затем используется механизм перетасовки при [!INCLUDE[prod_short](includes/prod_short.md)] публикации.

Для получения дополнительной информации ознакомьтесь с [!INCLUDE[prod_short](includes/prod_short.md)] техническими документами, указанными в разделе «Дополнительные ресурсы» в конце этого документа.

### <a name="source-subtype-suppressed-action-msg-action-message-adjustment-and-disallow-cancellation-fields"></a>Поля «Подтип источника», «Подавленное сообщение о действии», «Корректировка сообщения о действии» и «Запретить отмену»

В этом разделе описаны поля **Исходный подтип**, **Подавленное сообщение о действии**, **Корректировка сообщения о действии** и **Запретить отмену**  в таблице *Запись о резервировании* . Приведены сценарии, демонстрирующие использование полей **Подавленное сообщение о действии**, **Корректировка сообщения о действии** и **Запретить отмену** . Поле **Корректировка сообщения о действии** используется для функции политики отслеживания заказов «Отслеживание и сообщение о действии». Поле **Запретить отмену** используется для функции «Сборка на заказ» в [!INCLUDE[prod_short](includes/prod_short.md)] 2013 году.

#### <a name="source-subtype"></a>Подтип источника

Поле **Исходный подтип**  указывает, к какому исходному подтипу относится запись о резервировании. Если запись относится к строке покупки или продажи, поле копируется из поля **Тип документа**  в строке. Если оно связано со строкой журнала, поле копируется из поля  **Тип записи**  в строке журнала.

#### <a name="suppressed-action-msg"></a>Сжатое указание

Поле **Подавленное сообщение о действии**  регистрирует, когда существующая поставка уже частично обработана, например, когда заказ на закупку уже частично получен или по производственному заказу проведено потребление.

При выполнении планирования [!INCLUDE[prod_short](includes/prod_short.md)] отмечает это поле и устанавливает поле **Статус записи резервирования**  на *Surplus8. В качестве иллюстрации можно привести следующий пример:

1. Открыть позицию 80001. Задайте следующие поля:
  - **Политика повторного заказа**: Лот за лотом
  - **Резерв**: Необязательно
  - **Политика отслеживания заказов**: нет
2. Создайте заказ на продажу. Задайте следующие поля:
  - **Товар**: 80001
  - **Расположение**: Пусто/Нет
  - **Количество**: 10
  - **Дата отправки**: 15.02.2014
3. Откройте **Рабочие листы заявок** и запустите пакетное задание **Расчет плана** для элемента 80001.
  - **Дата начала**: 23.01.2014
  - **Дата окончания**: 03/01/2014
4. Дано предложение по планированию пополнить количество в 10 единиц новым заказом на закупку и **сроком выполнения** 15.02.2014.
5. На вкладке **Действия**  в группе Функции выберите **Выполнить действие** Сообщение, чтобы создать заказ на покупку с **Ожидаемой датой получения** 15.02.2014.
6. Откройте заказ на покупку из шаг 5 и установите **Кол-во для получения** на 2 и разместите только получение.
7. Откройте заказ на продажу из шаг 2 и измените **дату отгрузки** на 02/10/2014.
8. Откройте **Рабочие листы заявок** и запустите **Рассчитать план** для элемента 80001
  - **Дата начала**: 23.01.2014
  - **Дата окончания**: 03/01/2014
9. Дано предложение по планированию пополнить количество в 8 единиц новым заказом на закупку и **сроком выполнения** 02/10/2014.

Информация о состоянии в таблице 337 показана на следующем рисунке.

Запись № 28 в таблице 337 имеет статус резервирования «Отслеживание» для соответствия существующему запасу, записанному в записи книги учета товаров 318 для 2 единиц и неудовлетворенному спросу в таблице «Заказы на продажу» 37. Последующая запись № 29 также имеет статус резервирования «Отслеживание» и связывает оставшееся количество в 8 единиц между спросом в таблице «Заказ на продажу» 37 и предлагаемым предложением в таблице «Строка заявки» 246.

Запись № 30 — это существующий заказ на закупку, который был частично получен в количестве 2. В результате поле **Статус резервирования**  имеет значение Избыток, а [!INCLUDE[prod_short](includes/prod_short.md)] поле **Количество (база)** устанавливается на *8* (оставшийся остаток), а поле **Скрытое сообщение о действии** активируется.

#### <a name="action-message-adjustment"></a>Коррекция указания

Поле **Корректировка сообщения о действии**  отображает изменение в части поставки отслеживания заказа, которое возникает при принятии вами соответствующих сообщений о действии. Значение здесь отображается только в том случае, если активны функции отслеживания заказов и сообщений о действиях (политика отслеживания заказов установлена на Отслеживание и сообщения о действиях). Значение рассчитывается на основе данных в таблице *Запись сообщения о действии* (таблица 99000849). В качестве иллюстрации можно привести следующий пример:
1. Откройте позицию 80002. Установите следующее поле:
 - **Политика отслеживания заказов**: сообщение об отслеживании и действии.
2. Создайте заказ на продажу. Задайте следующие поля:
  - **Товар**: 80002
  - **Расположение**: СИНИЙ
  - **Количество**: 100
3. Откройте страницу **Планирование заказов**  и запустите пакетное задание **Расчет плана** .
4. Выберите заказ на продажу из шаг 2 и запустите пакетное задание **Создать заказы** .
5. В заказе на продажу из шаг 2 измените поле **Количество**  со 100 на 105.
Информация о состоянии в таблице 337 показана на следующем рисунке.
6. В записи № 34 поле **Корректировка сообщения о действии** в таблице 337 включено для 5 единиц со статусом резервирования «Излишки». Поскольку заказ на продажу был увеличен до шаг 5, [!INCLUDE[prod_short](includes/prod_short.md)] создал это резервирование, поскольку требуется больше поставок.
7. Откройте страницу **Planning Worksheets**  и на вкладке **Home**  в группе **Process** выберите **Get Action Messages**. [!INCLUDE[prod_short](includes/prod_short.md)] предложит увеличить количество заказов на закупку со 100 до 105.

#### <a name="disallow-cancellation"></a>Не разрешать отмену

Поле **Запретить отмену**  указывает, что запись о резервировании представляет собой связь между строкой заказа на продажу и заказом на сборку. Вы не можете удалить это бронирование, поскольку оно необходимо для поддержания синхронизации, которая происходит при сборке товара по заказу. В качестве иллюстрации можно привести следующий пример:

1. Создайте заказ покупки. Задайте следующие поля:
  - **Базовая единица измерения**: PCS
  - Любые группы постов по умолчанию
  - **Система пополнения**: Сборка
  - **Политика сборки**: Сборка на заказ
  - **Политика отслеживания заказов**: только отслеживание
2. Создайте новый элемент под названием «Собрать КОМП». Задайте следующие поля:
  - **Базовая единица измерения**: PCS
  - Любые группы постов по умолчанию
  - **Система пополнения**: Покупка
  - **Политика отслеживания заказов**: только отслеживание
3. Откройте элемент Сборка FG и на вкладке **Навигация** в группе **Сборка/Производство** выберите **Сборка**, а затем выберите **Спецификация сборки**. В спецификации сборки задайте следующие поля:
  - **Тип**: Элемент
  - **№**: Собрать COMP
  - **Количество на**: 1 Нажмите кнопку **ОК** .
4. Откройте журнал предметов и увеличьте инвентарь «Сборка КОМП» до количества 10 напротив местоположения СИНИЙ и разместите строку журнала.
5. Создайте заказ на продажу. Задайте следующие поля:
  - **Элемент**: Собрать FG
  - **Расположение**: СИНИЙ
  - **Количество**: 1 Информация о состоянии в таблице 337 показана на следующем рисунке.

Запись № 82 имеет статус резервирования «Избыток», так как на складе имеется 9 единиц сборочного комплекта, и на нее нет спроса. Запись № 84 отслеживает записи резервирования между спросом на *сборочной линии* таблице 901 и ее поставкой на записи 346 в регистре товаров.

Запись № 86 имеет обязательный заказ-к-заказу со статусом бронирования «Бронирование». Кроме того, поле **Запретить отмену** активно, поскольку политика сборки установлена как Сборка на заказ для элемента Сборка FG. Наконец, поле **Гибкость планирования** устанавливается на значение None, поскольку [!INCLUDE[prod_short](includes/prod_short.md)] не позволяет логике планирования удалить бронирование.

#### <a name="quantity-available-to-pick-and-reservations"></a>Количество, доступное для выбора и бронирования

Поле **Зарезервированное количество для подбора и отправки**  в таблице 337, которое существовало в версиях до [!INCLUDE[prod_short](includes/prod_short.md)] 2013, контролирует доступность товаров на управляемом складе. В любой установке [!INCLUDE[prod_short](includes/prod_short.md)] управления складом количество товаров существует как в виде складских записей, так и в виде записей в регистре товаров. Эти два типа записей содержат различную информацию о том, где находятся элементы и доступны ли они. Складские операции определяют доступность товара по ячейкам и типу ячеек, что называется содержимым ячейки. Операции книги товаров определяют наличие товара по его резервированиям в исходящих документах. В алгоритме подбора предусмотрена специальная функциональность для расчета количества товара, доступного для подбора, когда содержимое контейнера связано с резервированием. Алгоритм подбора вычитает количества, зарезервированные для других исходящих документов, количества в существующих документах подбора и количества, которые были отобраны, но еще не отправлены или не потреблены. Результат отображается в поле **Доступное количество для подбора** на странице **Лист подбора**, где поле рассчитывается динамически. Значение также рассчитывается, когда пользователь создает складские отборы непосредственно из исходящих документов, таких как заказы на продажу, производственное потребление или исходящие переводы.

*Количество, доступное для подбора = количество в ячейках подбора - количество при подборе и перемещении - (зарезервированное количество в ячейках подбора + зарезервированное количество при подборе и перемещении).*

Следующий пример иллюстрирует, как рассчитывается значение количества, доступного для подбора, в [!INCLUDE[prod_short](includes/prod_short.md)]:

1. Создайте новый элемент под названием «Элемент склада». Задайте следующие поля:
  - **Базовая единица измерения**: PCS
  - Любые группы постов по умолчанию
  - **Система пополнения**: Покупка
  - **Политика резервирования**: Всегда
  - **Политика отслеживания заказов**: только отслеживание
2. Создайте заказ на закупку у поставщика 60000. Задайте следующие поля:
  - **Товар**: Товар на складе
  - **Расположение**: БЕЛЫЙ
  - **Количество**: 100
3. Оформите заказ на закупку и создайте складскую квитанцию.
4. Оформите складскую квитанцию и зарегистрируйте складское размещение на количество 100.
5. Создайте второй заказ на закупку у поставщика 60000. Задайте следующие поля:
  - **Товар**: Товар на складе
  - **Расположение**: БЕЛЫЙ
  - **Количество**: 10
6. Оформите заказ на закупку и создайте складскую квитанцию.
7. Отправьте ТОЛЬКО складскую квитанцию. Не регистрируйте складское размещение.
8. Создайте заказ на продажу. Задайте следующие поля:
  - **Товар**: Товар на складе
  - **Расположение**: БЕЛЫЙ
  - **Количество**: 10 Зарезервировано Количество автоматически устанавливается равным 10, поскольку политика резервирования установлена на значение Всегда.
9. Создайте заказ на продажу. Задайте следующие поля:
  - **Товар**: Товар на складе
  - **Расположение**: БЕЛЫЙ
  - **Количество**: 100 Зарезервированное количество автоматически устанавливается равным 100, поскольку политика резервирования установлена на значение Всегда.
10. Выпустите первый заказ на продажу из шаг 8 и создайте складскую отгрузку.
11. Выпустите складскую отгрузку и на вкладке **Действия** выберите **Создать подбор**.
Отображается следующее сообщение об ошибке: *Нечего обрабатывать.*
  Причина в том, что доступное для выбора количество равно нулю. Это рассчитывается следующим образом: Количество на складе = 110 Количество, доступное для выбора = 100

> [!NOTE]  
> Количество товара, находящегося на складе или в приемном контейнере, недоступно для отбора.
   
   Всего зарезервировано по заказам на продажу 110. Количество, доступное для подбора = 100 – 110 = ноль.

Когда складское размещение зарегистрировано в шаг 7, это позволяет создать складской подбор в шаг 11. В версиях до [!INCLUDE[prod_short](includes/prod_short.md)] 2013 г. поле Reserved **Pick & Ship Qty.**  в таблице 337 заполнялось резервированием для количества 10.

Следующая иллюстрация взята из [!INCLUDE[prod_short](includes/prod_short.md)] 2009 R2.

## <a name="illustrations-using-transfer-orders-and-planning"></a>Иллюстрации с использованием заказов на перемещение и планирования

### <a name="transfer-orders"></a>Заказы на перемещение

При использовании заказов на передачу, когда товар отправлен, но не получен полностью, в таблице *Запись о резервировании*  вы получите статус резервирования «Излишек». Код местоположения будет соответствовать местоположению перевода.

 **Исходный номер ссылки.** Поле рассчитывается по последнему номеру строки + номеру строки товара в отправленной транспортной поставке.

Если отслеживание заказов активировано и спроса нет (заказ на продажу или потребление), [!INCLUDE[prod_short](includes/prod_short.md)] создает две записи в таблице 337 со статусом резервирования «Излишки». Один из них находится напротив таблицы *Строка передачи* 5741, а другой — напротив таблицы 32 «Запись в книге учета товаров».

Это продемонстрировано в первом примере.

#### <a name="example-1"></a>Пример 1

1. Откройте элементы 80003 и 80004 и установите для поля **Политика отслеживания** значение *Только отслеживание*. Остальные поля оставьте по умолчанию.
2. Откройте журнал предметов и увеличьте количество этих предметов до 10 штук в каждой ячейке, обозначенной КРАСНЫМ цветом, и разместите строки журнала.
3. Создайте заказ на перемещение из КРАСНОГО местоположения в СИНИЙ для следующих двух товаров: товар 80003 в строке заказа на перемещение 10000 и товар 80004 во второй строке 20000, оба по 10 единиц.
4. Размещайте только часть заказа на перевозку, касающуюся отгрузки, без каких-либо складских характеристик.
Опубликованная трансферная партия показана на следующем рисунке.
Информация о состоянии в таблице 337 показана на следующем рисунке.
5. Сравните результаты по отправленной трансфертной партии с записями в таблице 337.

В следующей таблице описывается, что происходит в определенных полях записи бронирования 40.

|Поле|Описанием|  
|---------------------------------|---------------------------------------|  
|**Статус бронирования**|Излишки как товар 80003 настроены с отслеживанием заказа, но спроса нет.|  
|**Код Склада**|Код перевода в местоположение СИНИЙ.|  
|**Тип источника**|Таблица линии передачи 5741.|  
|**Идентификатор источника**|Номер документа передаточного распоряжения 1011.|
|**Источник Ссылка №**|Общее количество строк 20000 + Номер строки 10000 против пункта 80003 = 30000.|

Ниже приведено объяснение для следующих полей в записи о резервировании 43.

|Поле|Описанием|  
|---------------------------------|---------------------------------------|  
|**Статус бронирования**|Излишки как товар 80003 настроены с отслеживанием заказа, но спроса нет.|  
|**Код Склада**|Местонахождение в пути СОБСТВЕННЫЙ ЖУРНАЛ — это место, в котором находится товар.|  
|**Тип источника**|Таблица записей в бухгалтерской книге 32.|  
|**Источник Ссылка №**|Открытая запись в книге учета товаров под номером 322.|

#### <a name="example-2"></a>Пример 2

Следующий пример иллюстрирует, что происходит, когда компонент перемещается между локациями, но в то же время отслеживается между спросом и имеющимся предложением. Компоненты будут перемещены из локации КРАСНАЯ в СИНЮЮ, где они будут использованы в рамках выпущенного производственного заказа. Компонент использует отслеживание заказов, планирование заказов и отслеживание позиций.

В примере показан обнаруженный поток в таблице 337 по отношению к полям **Статус бронирования**, **Код местоположения**, **Тип источника**, **Идентификатор источника**, **Источник Ссылка №**, и тип **Связывание**.

1. В **Организация производства**  страница, установить поле **Компоненты на месте**  установлен на КРАСНЫЙ.
2. Создайте новый компонент элемента. Задайте следующие поля:
  - **Базовая единица измерения**: PCS
  - Любые группы постов по умолчанию
  - **Система пополнения** : Покупка
  - **Производственная политика** : Изготовление на склад
  - **Политика отслеживания заказов**: только отслеживание
  - **Код отслеживания товара** : МНОГО
3. Используя Журнал предметов, увеличьте запас Компонентов предметов в локации RED до 100 единиц. Установите следующие номера лотов:
  - Номер лота Лот А, Количество 30
  - Номер лота Лот B, Количество 70
4. Создать новый элемент Произведено. Задайте следующие поля:
  - **Базовая единица измерения**: PCS
  - Любые группы постов по умолчанию
  - **Система пополнения** : Производство
  - **Производственная политика** : Изготовление на склад
  - **Политика отслеживания заказов**: только отслеживание
5. Создавать **Спецификация производства**  с 1 количеством на каждый компонент товара.
6. Назначьте производственную спецификацию произведенному товару.
7. Создайте заказ на продажу. Задайте следующие поля:
  - **Элемент** : Произведено
  - **Расположение** : СИНИЙ
  - **Количество** : 100
8. На **Действия**  вкладка заказа на продажу, в **План**  группа, выбрать **Планирование**  для создания связанного выпущенного производственного заказа с заказом на продажу.
9. Откройте выпущенный производственный заказ/потребность в компоненте и обратите внимание, что местоположение отмечено как КРАСНОЕ.
Причина в том, что **Компоненты на месте**  КРАСНЫЙ на **Организация производства**  карточка.
Произведенный предмет получит выход в локации СИНИЙ.

Информация о состоянии в таблице 337 показана на следующем рисунке.

##### <a name="reservation-entries-with-numbers-55-and-56"></a>Записи о бронировании с номерами 55 и 56

Для потребности в компонентах для партии A и партии B соответственно создаются ссылки отслеживания заказов от спроса в таблице 5407, Компонент заказа на продукцию, к поставке в таблице 32, Запись в регистре товаров. The **Статус бронирования**  поле содержит Отслеживание для всех четырех записей, чтобы указать, что эти динамические ссылки отслеживания заказов находятся между поставки и спрос.

Спрос в таблице 5407, компонент заказа на производство, связан с идентификатором источника запущенного заказа на производство 101006. Поставка в таблице 32 «Запись в регистре товаров» связана с номером ссылки источника. это номера записей в регистре товаров 325 и 326, под которыми существуют единицы.

> [!NOTE]  
> Поле **Номер партии** пусто в строках требования, так как номера партий не определены в строках компонентов запущенного производственного заказа.

##### <a name="reservation-entry-with-number-57"></a>Резервирование записи под номером 57

Из спроса на продажу в таблице 37, Строка продаж, создается ссылка отслеживания заказа на поставку в таблице 5406, Строка заказа на продукцию. The **Статус бронирования**  поле содержит Резервирование, а **Связывание**  поле содержит Order-to-Order. Это связано с тем, что выпущенный производственный заказ был сформирован специально для заказа на продажу и должен оставаться связанным, в отличие от ссылок отслеживания заказов со статусом резервирования «Отслеживание», которые создаются и изменяются динамически.

> [!NOTE]  
> The **Связывание**  поле может также содержать *Заказ-на-заказ*  при использовании «Изготовления на заказ» в качестве производственной политики и/или «Заказа» в качестве политики повторного заказа.

10. На этом этапе сценария 100 единиц компонента перемещаются из КРАСНОГО местоположения в СИНИЙ местоположение с помощью заказа на перемещение.

Выберите лот A и лот B для отправки.

Укажите общее количество товара, подлежащего доставке, как ТОЛЬКО отправленное.

> [!NOTE]  
> Компоненты могут быть потреблены в локации RED, но для примера, иллюстрирующего поток записей о резервировании, единицы вручную переносятся в локацию BLUE.

Информация о состоянии в таблице 337 показана на следующем рисунке.

##### <a name="reservation-entries-with-number-55-and-56"></a>Записи о бронировании с номерами 55 и 56

Записи отслеживания заказов для двух партий компонента, отражающих спрос в таблице 5407, изменены со статуса резервирования «Отслеживание» на «Излишки». Причина в том, что поставки, с которыми они были связаны ранее, в таблице 32, были использованы отгрузкой заказа на перемещение. Настоящий излишек, как в этом случае, отражает излишнюю поставку или спрос, который остается нетрассированным. Это признак дисбаланса в сети заказов, который приведет к формированию системой планирования сообщения о необходимости действия, если проблема не будет устранена динамически.

##### <a name="reservation-entry-numbers-59-to-63"></a>Номера записей о бронировании с 59 по 63

Поскольку две партии компонента указаны в заказе на передачу как отгруженные, но не полученные, все соответствующие положительные записи отслеживания заказа имеют тип резервирования «Излишки», что указывает на то, что они не распределены ни по одному требованию. Для каждого номера партии одна запись относится к таблице 5741, «Строка передачи», а другая запись относится к записи в регистре товаров в месте транзита, где в настоящее время находятся товары.

Таблица 5741, **Линия передачи**, — это тип источника. **Идентификатор источника**  Номер документа о передаче имущества 1012 и **Источник Ссылка №** составляет 20000 = 10000 + 10000, как подробно описано в Примере 1. Местоположение отмечено СИНИМ цветом в качестве кода местоположения перевода.

Оставшиеся две записи со статусом **Резервирование** Излишки имеют таблицу 32, **Запись в книге учета товаров**, в качестве Типа источника и **Исходного номера источника.** 328 и 330, включая номера их партий, которые в настоящее время находятся в ЖУРНАЛЕ транзитного хранения.

11. Опубликуйте невыполненное поручение на перевод как полученное.

Информация о состоянии в таблице 337 показана на следующем рисунке.

Записи отслеживания заказа теперь аналогичны первому пункту сценария, до того как заказ на перемещение был опубликован как только отправленный, за исключением того, что записи для компонента теперь имеют статус резервирования «Излишки» вместо «Отслеживание». Это связано с тем, что необходимый компонент по-прежнему находится в КРАСНОМ местоположении, что отражает тот факт, что поле  **Код местоположения**  в строке компонента производственного заказа содержит КРАСНЫЙ, как установлено в поле настройки **Компоненты в местоположении** .

Поставка, которая ранее была выделена для этого спроса, была переведена в СИНЮЮ ячейку и теперь не может быть полностью отслежена, если только потребность в компоненте в строке производственного заказа не будет изменена на СИНЮЮ ячейку. Это зафиксировано в последних двух записях о резервировании с заполненными номерами партий, поле  **Тип источника** соответствует Таблице 32, а поле  **Исходный номер источника.** поле, представляющее собой записи в регистре товаров 333 и 334.

12. В списке компонентов, назначенных для выпущенного производственного заказа, измените местоположение компонента на СИНИЙ.

12. Откройте **Журнал потребления** и запустите пакетное задание **Расчет потребления** .
Назначьте количество Лота А 30 и количество Лота В 70.

Закройте форму отслеживания товара.

Информация о состоянии в таблице 337 показана на следующем рисунке.

##### <a name="reservation-entries-with-numbers-68-and-69"></a>Записи о бронировании с номерами 68 и 69

Поскольку потребность в компоненте была изменена на СИНИЙ склад, а поставка доступна в виде записей в регистре товаров в СИНЕМ складе, все записи отслеживания заказов для двух номеров партий теперь полностью отслеживаются, на что указывает статус резервирования «Отслеживание». Номера партий не заполняются в поле **Номер партии**  в соответствии со спросом в таблице 5406, **Строка заказа на продукцию**, поскольку мы не указали номера партий для компонента в выпущенном заказе на продукцию.

##### <a name="reservation-entries-with-numbers-70-and-71"></a>Записи о бронировании с номерами 70 и 71

Записи со статусом резервирования «Потенциал» формируются в таблице 337. Причина в том, что оба номера партий назначены компоненту в журнале расхода, но журнал не был проведен.

На этом завершается раздел о том, как создаются, изменяются и удаляются записи отслеживания заказов в таблице **Запись резервирования**  при использовании нескольких функций в сочетании с заказами на перемещение.

### <a name="planning-calculated-1"></a>Планирование рассчитано

При использовании функций планирования, то есть  **Рабочий лист заявки**,  **Рабочий лист планирования** или  **Планирование заказов**, записи резервирования в **Запись резервирования** таблице 337 могут быть изменены или добавлены в зависимости от предложения по планированию, заданного логикой в [!INCLUDE[prod_short](includes/prod_short.md)]. В примере 3 будет использоваться **Политика повторного заказа** Заказ с **Политикой производства** Изготовление на заказ для произведенного товара. Компонент будет использовать **Политику повторного заказа** Фиксированное количество повторного заказа.

#### <a name="example-3"></a>Пример 3

1. В **Настройке производства** карточка **Компонент в расположении**  имеет КРАСНЫЙ цвет из предыдущего примера.
2. Создайте новый элемент родительский элемент 70061. Задайте следующие поля:
  - **Базовая единица измерения**: PCS
  - Любые группы постов по умолчанию
  - **Система пополнения**: Заказ товара
  - **Производственная политика**: Изготовление на заказ
  - **Политика повторного заказа**: Заказ
  - **Политика резервирования**: Необязательно
  - **Отслеживание заказа**: Нет
3. Создайте новый компонент Элемент 70062. Задайте следующие поля:
  - **Базовая единица измерения**: PCS
  - Любые группы постов по умолчанию
  - **Система пополнения**: Покупка
  - **Политика повторного заказа**: фиксированное количество повторного заказа
  - **Политика резервирования**: Необязательно
  - **Политика отслеживания заказов**: нет
  - **Количество запасов**: 10
  - **Точка повторного заказа**: 25
  - **Количество для повторного заказа**: 50
4. Создайте новую производственную спецификацию и укажите позицию компонента 70062 с количеством за 1 шт.
Назначьте производственную спецификацию элементу родительский элемент 70061.
5. Создайте заказ на продажу. Задайте следующие поля:
  - **Товар**: Фиксированное количество для повторного заказа
  - **Местоположение**: КРАСНЫЙ
  - **Количество**: 40
  - **Дата отправки**: 15.02.2014
6. Откройте страницу **Рабочие листы планирования** и запустите пакетное задание **Расчет регенеративного плана** .
  - **MPS/MRP**: включено
  - **Дата начала**: 23.01.2014
  - **Дата окончания**: 03/01/2014
  - Фильтр по пунктам 70061 и 70062
  - Нет прогноза

Даны следующие предложения по планированию.

Первое предложение по планированию — создать новый запланированный производственный заказ для покрытия неудовлетворенного спроса по заказу на продажу в количестве 40 единиц товара родительский элемент 70061. Просмотрите отслеживание заказов и [!INCLUDE[prod_short](includes/prod_short.md)] покажите невыполненный заказ на продажу. Отслеживание заказов активируется по мере их создания системой планирования.

Вторая линия — поднять уровень запасов выше точки повторного заказа (25). Таким образом, принимая во внимание объем повторного заказа (50), логика планирования предполагает количество в 50 единиц. Третья строка — доведение запасов до уровня страхового запаса (10).

Четвертая строка — пополнение запасов при отгрузке заказа на продажу. В это время уровень запасов составляет 20, что ниже точки повторного заказа. В результате система планирования предлагает закупить 50 дополнительных компонентов с учетом объема повторного заказа. Это неотслеживаемое количество, поэтому в таблице *Запись о резервировании* 337 оно будет отмечено статусом резервирования «Излишки».

Информация о состоянии в таблице 337 показана на следующем рисунке.

Поле **Статус бронирования**  имеет значение «Резервирование», и создается привязка «заказ-заказ». Причина в том, что политика производства изделий установлена на уровне «Изготовление на заказ», а политика повторного заказа установлена на уровне «Заказ». Если один из двух вариантов установлен на «Заказ», то статус бронирования будет «Резервирование» вместо «Отслеживание», а привязка будет установлена на «Заказ-к-заказу».

Спрос в размере 40 единиц по полю **Идентификатор источника**  — это номер заказа на продажу 1005, а тип источника — это *Строка продаж* таблица 37. Запись о бронировании соответствует планировочному предложению, номер источника. 10000, идентификатор источника — PLANNING, а тип источника —  *Строка заявки* таблица 246. Таким образом, существует баланс между спросом, указанным в заказе на продажу, и предложением, предложенным системой планирования.

##### <a name="reservation-entry-numbers-73-and-74"></a>Номера записей о бронировании 73 и 74

При запуске пакетного задания «Рассчитать план» следующие четыре записи генерируются со статусом резервирования «Отслеживание» из-за настройки политики повторного заказа «Фиксированное количество повторного заказа» для компонента. Требуемый запас для компонента № 70062 пополняется в соответствии с данными предложениями по планированию, номер ссылки источника. 20000 и 30000, с идентификатором источника, установленным на PLANNING, и типом источника из *Строка заявки* таблицы 246. Потребность в компоненте создается для удовлетворения спроса по позиции родительский элемент 70061 для общего количества (базы) 40. В результате этого спроса поле **Исходная строка заказа на продукцию** равно 10000, а исходный тип — таблице *Потребность в компоненте*  99000829.

Статус резервирования не «Излишки», поскольку отслеживание заказа осуществляется между спросом на товар родительский элемент 70061 и поставкой компонента 70062.

##### <a name="reservation-entry-numbers-75-and-76"></a>Бронирование номеров 75 и 76

Последние две записи имеют статус резервирования «Излишки», поскольку это неотслеживаемые количества, сформированные на листе планирования, связанные с параметрами повторного заказа «Точка повторного заказа» и «Количество повторного заказа».

## <a name="see-also"></a>См. также
[Технические подробности: архитектура трассировки товаров](design-details-item-tracking-design.md)  
[Технические подробности: балансировка спроса и поставок](design-details-balancing-demand-and-supply.md)  
[Сведения о проектировании: резервирование, трассировка заказов и отправка сообщений о действиях](design-details-reservation-order-tracking-and-action-messaging.md)   
[Сведения о проектировании: планирование поставок](design-details-supply-planning.md)  


[!INCLUDE[footer-include](includes/footer-banner.md)]
