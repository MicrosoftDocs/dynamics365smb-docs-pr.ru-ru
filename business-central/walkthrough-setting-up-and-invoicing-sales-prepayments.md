---
title: Настройка и выставление счетов на оплату
description: 'Предоплата — это платежи, для которых выставление счетов и учет в заказах на предоплату при продажах или покупках осуществляется до окончательного выставления счетов.'
author: SorenGP
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: null
ms.date: 12/03/2021
ms.author: edupont
---
# <a name="walkthrough-setting-up-and-invoicing-sales-prepayments" />Пошаговое руководство. Настройка и выставление счетов на продажу

В этом пошаговом руководстве вы узнаете, как настроить и использовать предоплату в [!INCLUDE [prod_short](includes/prod_short.md)]. [!INCLUDE [prepayment_def](includes/prepayment_def.md)]

[!INCLUDE [prepayment_req](includes/prepayment_req.md)]

Например, можно также отправить больше счетов на предоплату, если в заказ было добавлено больше товаров.  

## <a name="about-this-walkthrough" />Об этом пошаговом руководстве

В этом пошаговом руководстве описана поэтапная реализация следующих сценариев:  

- настройка предоплаты;  
- создание заказа, требующего предоплаты;  
- создание счета на предоплату;  
- исправление требований по предоплате для заказа;  
- применение предоплаты к заказу;  
- выставление счета на окончательную сумму по заказу с предоплатой.  

### <a name="roles" />Роли

В этом пошаговом руководстве описываются задачи для следующих ролей:  

- главный бухгалтер (Фаина);  
- обработчик заказов (Светлана);  
- администратор дебиторской задолженности (Артем).  

## <a name="story" />Сюжет

 Фаина — главный бухгалтер, она принимает решения относительно того, кто из клиентов должен платить задаток перед началом производства или отгрузки товара. Фаина настраивает [!INCLUDE[prod_short](includes/prod_short.md)] для автоматического вычисления предоплаты.  

 Светлана обработчик заказов на продажу. Когда клиент обращается, чтобы сделать заказ, Фаина вводит заказ в систему в процессе разговора с клиентом по телефону. Таким образом, Фаина может сразу же согласовать с клиентом цены и условия оплаты, внося изменения в заказ во время переговоров с клиентом.  

 Артем работает в отделе дебиторской задолженности и отвечает за учет счетов-фактур и платежей.  

 В этом сценарии Фаина настраивает требования по предоплате для клиента «Нефтегаз», исходя из его кредитной истории. Фаина дает Светлане указания относительно обработки его заказов.  

 Когда звонит клиент, Светлана обсуждает с ним условия, пока не будет достигнута договоренность, после чего Светлана рассчитывает предоплату одним из нескольких возможных способов.  

 После того как Светлана отправляет счет на предоплату, клиент заказывает дополнительный товар. Светлана обновляет заказ и создает второй счет на предоплату.  

 Артем регистрирует платеж клиента и применяет его к счетам, а затем отправляет окончательный счет.  

## <a name="set-up-prepayments" />Настройка предоплаты

Фаина настраивает систему для обработки предоплаты для клиентов.  

- Фаина решает, что для предоплаты будет использоваться та же серия номеров, что и для выставления счетов продажи.  
- Фаина указывает, что приложение должно проверять обязательность предоплаты перед выставлением окончательного счета по заказу.  
- Фаина задает значения по умолчанию для обязательного процента предоплаты для определенных товаров и клиентов.  

В следующих процедурах описано выполнение задач Фаины:  

### <a name="to-set-up-number-series-for-prepayments" />Процедура настройки серии номеров для предоплаты

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок введите **Настройка модуля "Продажи и дебиторская задолженность"**, а затем выберите связанную ссылку.  
2. На странице **Настройка модуля продаж** раскройте экспресс-вкладку **Серии номеров**.  
3. Убедитесь, что серия номеров для учтенных счетов на предоплату в поле **Серия номеров учт. счетов предопл.** совпадает с серией номеров для учтенных счетов продажи (**Серия номеров учт. счетов**), а серия номеров учтенных кредит-нот предоплаты (**Серия номеров учт. кр.-нот предопл.**) совпадает с серией номеров для учтенных кредит-нот (**Серия номеров учт. кредит-нот**).  

### <a name="to-block-shipments-for-unpaid-prepayment" />Блокировка отгрузок при отсутствии предоплаты

1. На странице **Настройка модуля продаж** на экспресс-вкладке **Общее** установите флажок **Проверять предоплату при учете**.

Теперь отгрузка заказа или выставление счета по нему невозможны, если сумма предоплаты по заказу не оплачена.  

Фаина требует, чтобы клиенту 20000 по умолчанию счета выставлялись при 30%-ом первом взносе по всем заказам. Поэтому Фаина введет процент предоплаты по умолчанию в карточке клиента.  

Фаина требует, чтобы всем клиентам при покупке товара 1896-S выставлялся счет на предоплату в размере 20%. У клиента 20000 плохая история платежей, поэтому для этого клиента Фаина требует 40 % предоплаты по товару 1896-S. В следующей процедуре демонстрируется настройка процентов предоплаты по умолчанию.  

### <a name="to-assign-default-prepayment-percentages-to-customers-and-items" />Процедура назначения процента предоплаты по умолчанию клиентам и товарам

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Клиенты**, а затем выберите связанную ссылку.  
2. Откройте карточку для клиента 20000 (Trey Research).
3. На экспресс-вкладке **Предоплата** в поле **Предоплата (%)** введите **30**.  
4. Выберите действие **Связанный**, выберите пункт меню **Продажи**, а затем выберите пункт меню **Проценты предоплаты**.  
5. Заполните две строки на странице **Проценты предоплаты при продаже**, как указано ниже.  

    |**Тип продажи**|**Код продажи**|**Код товара**|**Предоплата (%)**|  
    |--------------------|--------------------|------------------|----------------------|  
    |**Клиент**|**20000**|**1896-S**|**40**|
    |**Клиент**|**20000**|**1900-S**|**30**|  
    
    > [!TIP]
    > В зависимости от страны/региона, необходимо также указать код налоговой группы на экспресс-вкладке **Затраты и учет** для товара 1896-S. При использовании демонстрационной организации это поле уже заполнено.

6. Закройте все страницы.  

### <a name="to-specify-an-account-for-sales-prepayments-in-general-posting-setup" />Определение счета для авансов при общей настройке учета

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Общая настройка учета**, а затем выберите связанную ссылку.  
2. Выберите строку, для которой в поле **Общая бизнес-группа** установлено значение **ВНУТР.**, а в поле **Общая товарная группа** установлено значение **РОЗНИЦА**.  
3. В поле **Счет предоплат при продаже** укажите соответствующую учетную запись. Ваш выбор автоматически сохраняется.  

> [!TIP]
> Если вы не можете видеть поле на странице **Общая настройка учета**, используйте горизонтальную полосу прокрутки внизу страницы, чтобы прокрутить вправо.  

## <a name="create-an-order-that-requires-a-prepayment" />Создание заказа, требующего предоплаты

 В следующем сценарии Светлана, обработчик заказов, создает заказ во время разговора с клиентом. Товары, которые клиент заказывает, требуют предоплаты. Кроме того, клиент сделал несколько просроченных платежей в прошлом. Светлана получила указание требовать фиксированную сумму в размере **800** в качестве предоплаты по заказу.  

Клиент просит разрешить оплатить 35 %, на что Светлана дает добро и изменяет заказ.  

Светлана создает счет на предоплату и отправляет его клиенту.  

### <a name="to-create-a-sales-order-with-a-prepayment" />Процедура создания заказа на продажу с предоплатой

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок введите **Заказы на продажу**, а затем выберите связанную ссылку.  
2. Выберите действие **Создать**.  
3. В поле **Имя клиента** выберите **Trey Research**.  
4. Закройте отобразившееся предупреждение о просроченной задолженности.  
5. Заполните две строки продаж следующими сведениями.  

    |**Тип**|**Номер**|**количество;**|  
    |--------------|-------------|------------------|  
    |**Товар**|**1896-S**|**1**|  
    |**Товар**|**1900-S**|**1**|

    По умолчанию поле предоплаты в строке продаж скрыто. Для отображения полей необходимо персонализировать страницу. Дополнительные сведения прочитайте в разделе [Чтобы начать персонализацию страницы с помощью баннера персонализации](ui-personalization-user.md#to-start-personalizing-a-page-through-the-personalizing-banner).

6. Убедитесь, что поле **Предоплата (%)** в строке с товаром **1900-S** содержит значение **30**. Это значение по умолчанию было взято из заголовка продажи, который был заполнен на основе карточки клиента.  

    Поле **Предоплата (%)** в строке с товаром **1896-S** содержит значение **40**. 40 — это процент, введенный на странице **Проценты предоплаты при продаже** для товара **1896-S** и клиента **20000**.  

    Дополнительные сведения см. в разделе [Настройка предоплат](finance-set-up-prepayments.md).  
7. В действии **Заказ**, выберите **Статистика**.  
8. На экспресс-вкладке **Предоплата** поле **Сумма в строке предоплаты без НДС** имеет значение **458,16**. При создании счета на предоплату для немедленного заказа в счете отображается сумма 458,16.  

    В этом сценарии Светлана получила указание предложить общую предоплату по заказу в размере **800**.  

    > [!IMPORTANT]  
    >  В зависимости от страны/региона, следующий шаг может не применяться.  
9. Измените сумму в поле **Сумма предоплаты без налога** на **800** и закройте страницу.  
10. Проверьте поле **Предоплата (%)** в строках продажи. Значение этого поля было пересчитано и теперь оно равно **67,02438** и **67,02282**.  

     Пересчет выполняется для всех строк, у которых процент предоплаты больше 0.  

     Теперь клиент спрашивает, нельзя ли установить процент предоплаты на уровне 35 %. Контролер Светланы утверждает изменение.
11. На странице **Заказ на продажу** на экспресс-вкладке **Предоплата** в поле **Предоплата (%)** введите **35**.  
12. В отобразившемся окне предупреждения нажмите кнопку **Да**. Будет применена ставка 35% в качестве процента оплаты для всего заказа.  
13. Удостоверьтесь, что строки обновлены правильно.  

## <a name="create-a-prepayment-invoice" />Создание счета на предоплату

После ввода правильных значений для предоплаты по заказу Светлана создает счет на предоплату и отправляет его клиенту.  

### <a name="to-create-a-prepayment-invoice" />Процедура создания счета на предоплату

1. На странице **Заказ на продажу** выберите **Действия**, затем **Учет**, **Предоплата**, а затем выберите **Учет и печать счета на предоплату**
2. Нажмите кнопку **Да** для учета счета.  

> [!NOTE]  
> Теперь Светлана отправляет счет клиенту.  

## <a name="create-an-additional-prepayment-invoice" />Создание дополнительного счета на предоплату

На следующий день клиент звонит Светлане и вносит изменения в заказ. Он хотел бы получить две единицы товара 1896-S. Светлана открывает заказ повторно, обновляет в нем данные, а затем создает второй счет на предоплату по заказу и отправляет его клиенту.  

### <a name="to-create-an-additional-prepayment-invoice" />Процедура создания дополнительного счета на предоплату

1. На странице **Заказ на продажу** выберите действие **Выпуск**, затем **Открыть повторно**.  
2. В строке для товара **1896-S** введите в поле **Кол-во** значение **2**.  

    В действии **Заказ**, выберите **Статистика**. Теперь поле **Сумма предоплаты без НДС** содержит **768,04**, а поле **Сумм. предопл. для выст. счета без НДС** содержит **417,76**. Эти значения показывают, что есть дополнительная сумма предоплаты, которая еще не была включена в счет.  
3. Чтобы учесть счет на дополнительную сумму предоплаты, выберите **Действия**, затем **Учет**, **Предоплата**, а затем выберите **Учет и печать счета на предоплату**
4. Нажмите кнопку **Да** для учета счета.  

## <a name="apply-the-prepayments" />Применение предоплаты

Клиент вносит сумму предоплаты. Артем из бухгалтерии регистрирует платеж и применяет его к счетам на предоплату.  

### <a name="to-apply-a-payment-to-the-prepayment-invoices" />Процедура применения платежа к счетам на предоплату

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Журналы приходных кассовых ордеров**, а затем выберите связанную ссылку.  
2. Заполните строку журнала продаж следующими сведениями.  

    |Имя поля|Введите|  
    |----------------|-----------|  
    |**Тип документа**|**Оплата**|  
    |**Тип счета**|**Клиент**|  
    |**Номер счета**|**20000**|  
3. Выберите действие **Обработать**, а затем **Применить операции**.  
4. На странице **Применение операций клиента** выберите первый счет на предоплату, после чего выберите действие **Обработать**, затем выберите действие **Установить код применения**.  
5. Повторите предыдущий шаг для второй предоплаты.  
6. Нажмите кнопку **ОК**.  

    Теперь в полях **Сумма** подставлено значение, равное общей сумме двух счетов на предоплату.  

7. Чтобы опубликовать журнал, выберите действие **Опубликовать/распечатать**, затем выберите **Учет**.
8. Нажмите кнопку **Да**.

## <a name="invoice-the-remaining-amount" />Выставления счета на сумму остатка

Артему сообщили, что заказанные товары отгружены и заказ готов для выставления счета. Теперь ему нужно создать счет для заказа.  

### <a name="to-invoice-the-remaining-amount" />Процедура выставления счета на сумму остатка

1. Откройте заказ на продажу.
2. Выбрать действие **Учет**, затем **Публикация**.
3. Выберите **Отгрузить и выставить счет**, а затем нажмите кнопку **ОК**.
4. Если необходимо предварительно просмотреть счет, то нажмите кнопку **Да**.

    > [!NOTE]  
    > Обычно отгрузку учитывает отдел отгрузки продукции.  

    Артем может просмотреть историю, чтобы подтвердить, что счет продажи был создан как запланировано.

5. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок введите **Учтенные счета продажи**, а затем выберите связанную ссылку.  

## <a name="update-the-status-of-prepaid-orders-and-invoices-automatically" />Автоматическое обновление статуса предоплаченных заказов и счетов

Вы можете ускорить обработку заказов и счетов, настроив записи очереди заданий, которые автоматически обновляют статус этих документов. Когда счет на предоплату оплачен, записи очереди заданий могут автоматически изменить статус документа с **В ожидании предоплаты** на **Выпущен**. Когда вы настраиваете записи очереди заданий, вам нужно будет использовать модули codeunit **383 Обновить ожидающие продажи с предоплатой** и **383 Обновить ожидающие покупки с предоплатой**. Мы рекомендуем запланировать частый запуск записей, например, каждую минуту. Дополнительные сведения см. в разделе [Использование очередей работ для планирования задач](admin-job-queues-schedule-tasks.md).

## <a name="next-steps" />Дальнейшие шаги

В этом пошаговом руководстве описаны шаги по настройке [!INCLUDE[prod_short](includes/prod_short.md)] для обработки предоплаты. 

- Настройте проценты предоплаты по умолчанию для клиентов и товаров.
- Используйте разные методы расчета предоплаты по заказу.  
- Рассчитайте сумму предоплаты в процентах от общей суммы заказа.
- Назначьте одну общую сумму предоплаты по заказу.  

Был размещен счет на предоплату, создан второй счет на предоплату при изменении заказа и размещен окончательный счет на оставшуюся сумму.  

Возможности предоплаты упрощают настройку и применение правил предоплаты для клиентов и товаров. Они также позволяют вам учитывать платеж по счету-фактуре.  

## <a name="see-related-microsoft-trainingtrainingmodulesprepayment-invoices-dynamics--business-central" />См. соответствующее [обучение Microsoft](/training/modules/prepayment-invoices-dynamics-365-business-central/)

## <a name="see-also" />См. также

[Выставление счетов на предоплату](finance-invoice-prepayments.md)  
[Финансы](finance.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)  
[Пошаговые описания бизнес-процессов](walkthrough-business-process-walkthroughs.md)


[!INCLUDE[footer-include](includes/footer-banner.md)]
