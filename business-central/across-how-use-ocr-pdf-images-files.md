---
title: Использование OCR для преобразования PDF в электронные счета| Документация Майкрософт
description: Описывает процедуру использования службы OCR для преобразования входящих PDF или графических файлов в электронные документы.
documentationcenter: ''
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: electronic document, e-invoice, incoming document, OCR, ecommerce, document exchange, import invoice
ms.date: 10/01/2020
ms.author: edupont
ms.openlocfilehash: aa24a1530d9e1d74e688f2ec9b44e1d615919c7a
ms.sourcegitcommit: ddbb5cede750df1baba4b3eab8fbed6744b5b9d6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/01/2020
ms.locfileid: "3924782"
---
# <a name="use-ocr-to-turn-pdf-and-image-files-into-electronic-documents"></a>Использование OCR для преобразования PDF-файлов и файлов изображений в электронные документы
Из PDF-файлов или файлов изображений, получаемых от торговых партнеров, с помощью внешнего сервиса OCR (оптическое распознавание символов) можно создавать электронные документы, подходящие для преобразования в записи документов в [!INCLUDE[d365fin](includes/d365fin_md.md)]. Например, при получении от поставщика счета в формате PDF можно отправить его в службу OCR на странице **Входящие документы**. Это описано в первой процедуре.

В качестве альтернативы для отправки файла со страницы **Входящие документы** можно отправить файл в службу OCR по электронной почте. Затем, когда вы получите документ обратно, автоматически создается соответствующая запись входящего документа. Это описано во второй процедуре.

Спустя несколько секунд файл будет возвращен из службы OCR в виде электронного счета, который может быть преобразован в счет покупки для этого поставщика. Это описано в третьей процедуре.

Поскольку процесс сканирования основан на оптическом распознавании, существует вероятность, что служба сканирования интерпретирует символы в ваших PDF-файлах или файлах изображений неправильно, например, при первой обработке документов от определенного поставщика. Он может не распознать логотип компании как наименование поставщика, или неправильно интерпретировать итоговую сумму в квитанции из-за ее расположения. Чтобы избежать подобных ошибок в дальнейшем, можно исправить данные, в отдельной версии страницы **Входящие документы**. После этого корректировки отправляются обратно в службу OCR, чтобы ошибки были правильно распознаны в следующий раз при обработке PDF-файла или файла изображения от этого поставщика. Дополнительные сведения см. в разделе [Обучение службы OCR для предотвращения ошибок](across-how-use-ocr-pdf-images-files.md#to-train-the-ocr-service-to-avoid-errors).

Перемещение файлов в службу OCR и обратно обрабатывается специальной операцией очереди заданий, которые создаются автоматически при включении соединения со связанной службой. Дополнительные сведения см. в разделе [Настройка входящих документов](across-how-setup-income-documents.md).

## <a name="to-send-a-pdf-or-image-file-to-the-ocr-service-from-the-incoming-documents-page"></a>Отправка PDF-файла или файла изображения в службу OCR со страницы **Входящие документы**
1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Входящие документы**, затем выберите соответствующую ссылку.
2. Создайте новую запись входящего документа и прикрепите файл. Дополнительные сведения см. в разделе [Создание записей входящих документов](across-how-create-income-document-records.md).  
3. На странице **Входящие документы** выберите одну или несколько строк, а затем выберите действие **Отправить в очередь работ**.

    Значение в поле **Статус OCR** будет изменено на **Готово**. Прикрепленный PDF-файл или файл изображения отправляется в службу OCR очередью заданий по расписанию при условии отсутствия ошибок.
4. В качестве альтернативы на странице **Входящие документы** выберите одну или несколько строк, а затем выберите действие **Отправить в службу сканирования**.

Значение в поле **Статус OCR** изменяется на **Отправлено** при условии отсутствия ошибок.

## <a name="to-send-a-pdf-or-image-file-to-the-ocr-service-by-email"></a>Отправка PDF-файла или файла изображения в службу OCR по электронной почте
Из приложения электронной почты вы можете отправить сообщение электронной почты поставщику службы OCR с прикрепленным PDF-файлом или файлом изображения. Дополнительные сведения об адресе электронной почты получателя см. на веб-сайте поставщика службы OCR.

Поскольку запись входящего документа для файла отсутствует, при получении готового электронного документа из службы OCR на странице **Входящие документы** автоматически будет создана новая запись. Дополнительные сведения см. в разделе [Создание записей входящих документов](across-how-create-income-document-records.md).

> [!NOTE]  
>   Если вы используете планшет или телефон, вы можете отправить файл в службу OCR сразу после создания фотографии документа или создать входящий документ напрямую. Дополнительные сведения см. в разделе [Создание записи входящего документа по фотографии](across-how-create-income-document-records.md#to-create-an-incoming-document-record-by-taking-a-photo).

## <a name="to-receive-the-resulting-electronic-document-from-the-ocr-service"></a>Чтобы получить созданный электронный документ из службы OCR.
Электронный документ, созданный службой OCR из файла PDF или изображения, автоматически получается а странице **Входящие документы** с помощью записи очереди работ, которая была настроена при включении службы OCR.

Если очередь заданий не используются или если необходимо получить готовый документ OCR быстрее, чем запланировано в расписании очереди заданий, можно нажать кнопку **Получить из службы OCR**. Будут получены все документы, уже обработанные службой OCR.

> [!NOTE]  
>   Если в службе OCR настроено требование ручной проверки обработанных документов, поле **Статус OCR** будет содержать значение **Ожидает проверки**. В этом случае выполните следующие действия, чтобы выполнить вход на веб-сайт службы OCR для проверки OCR-документа вручную.

1. В поле **Статус OCR** выберите гиперссылку **Ожидает проверки**.
2. На веб-сайте службы OCR выполните вход с помощью учетных данных вашей учетной записи службы OCR. Это те учетные данные, которые использовались при настройке этой службы. Дополнительные сведения см. в разделе [Настройка службы распознавания](across-how-setup-income-documents.md#to-set-up-an-ocr-service).

    Отображается информация для документа OCR, которая показывает как исходное содержимое PDF-файла или графического файла, так и итоговые значения поля OCR.
3. Просмотрите различные значения полей и вручную измените или введите значения в полях, которые служба OCR пометила, как распознанные неуверенно.
4. Нажмите кнопку **ОК**. Процесс OCR завершается, и итоговый электронный документ отправляется на страницу **Входящие документы** в [!INCLUDE[d365fin](includes/d365fin_md.md)] в соответствии с расписанием очереди работ.
5. Повторите шаг 4 для любого документа OCR, который требуется проверить.

Теперь можно переходить к созданию записей документов для полученных электронных документов в [!INCLUDE[d365fin](includes/d365fin_md.md)] вручную или автоматически. Дополнительные сведения см. в следующей процедуре. Также можно связать новую запись входящего документа с существующим учтенным или неучтенным документом, чтобы обеспечить простой доступ к исходному файлу из [!INCLUDE[d365fin](includes/d365fin_md.md)]. Дополнительные сведения см. в разделе [Обработка входящих документов](across-process-income-documents.md).

## <a name="to-create-a-purchase-invoice-from-an-electronic-document-received-from-the-ocr-service"></a>Создание счета покупки из электронного документа, полученного из службы OCR
В следующей процедуре описывается создание записи счета покупки на основе счета поставщика, полученного как электронный документ из службы OCR. Такая же процедура используется при создании, например, строки финансового журнала из расходной квитанции или возврата продажи из клиента.

> [!NOTE]  
>   Поля **Описание** и **№** в созданных строках документа будут заполняться только в том случае, если предварительно текст, найденный в документе OCR, был сопоставлен этим двум полям в [!INCLUDE[d365fin](includes/d365fin_md.md)]. Это сопоставление может представлять собой перекрестные ссылки на товары для строк документа с типом "Товар". Дополнительные сведения см. в разделе [Использование перекрестных ссылок по товару](inventory-how-use-item-cross-refs.md). Можно также использовать функцию "Сопоставление текста со счетами". Дополнительные сведения см. в разделе [Сопоставление текста во входящем документе с конкретным счетом поставщика, счетом ГК или банковским счетом](across-how-use-ocr-pdf-images-files.md#to-map-text-on-an-incoming-document-to-a-specific-vendor-account).

1. Выберите строку для входящего документа, а затем выберите действие **Создать документ**.

Счет покупки будет создан [!INCLUDE[d365fin](includes/d365fin_md.md)] на основе информации в электронном документе поставщика, полученном из сервиса OCR. Информация будет вставлена в новый счет покупки на основании сопоставления, которое вы определили в виде перекрестной ссылки или сопоставления текста со счетом.

Любые ошибки проверки, обычно связанные с некорректностью или отсутствием данных в [!INCLUDE[d365fin](includes/d365fin_md.md)], будут представлены на экспресс-вкладке **Ошибки и предупреждения**. Дополнительные сведения см. в разделе [Обработка ошибок при получении электронных документов](across-how-use-ocr-pdf-images-files.md#to-handle-errors-when-receiving-electronic-documents).

### <a name="to-map-text-on-an-incoming-document-to-a-specific-vendor-account"></a>Сопоставление текста во входящем документе с конкретным счетом поставщика
Для входящих документов обычно используется действие **Определить соответствие текста счетам** для задания, что определенный текст в счете поставщика, полученного из службы OCR, сопоставляется определенному счету поставщика. После этого любая часть описания входящего документа, которая существует в качестве сопоставления текста, означает, что поле **№** в получающемся документе или строках журнала типа "Счет ГК", заполняются данными соответствующего поставщика.

В дополнение к сопоставлению со счетом поставщика или другими счетами ГК, также возможно сопоставление с банковским счетом. Это удобно, например, для электронных документов для расходов, которые уже оплачены при создании строки финансового журнала, которая готова к учету на банковском счете.

1. Выберите соответствующую строку входящего документа, а затем выберите действие **Определить соответствие текста счетам**. Откроется страница **Сопоставление текста со счетами**.
3. В поле **Текст сопоставления** введите текст, который присутствует на счетах поставщика, для которых вы хотите создавать документы покупки или строки журнала. Можно ввести до 50-ти символов.
4. В поле **Номер поставщика** введите поставщика, для которого будет создаваться документ покупки или строка журнала.
5. В поле **Номер дебетового счета** введите дебетовый счет ГК, который будет вставляться в создаваемый документ покупки или строку журнала типа "Счет ГК".
6. В поле **Номер кредитового счета** введите кредитовый счет ГК, который будет вставляться в создаваемый документ покупки или строку журнала типа "Счет ГК".

    > [!NOTE]
    > Поля **Тип источника сальдо** и **Номер источника сальдо** в связи с входящими документами не используются. Они используются только для автоматической выверки платежей. Дополнительные сведения см. в разделе [Сопоставление текста на типовых платежах со счетами для автоматической выверки](receivables-how-map-text-recurring-payments-accounts-auto-reconcilliation.md).

7. Повторите шаги 2–5 для всего текста во входящих документах, для которых вы хотите автоматически создавать документы.

## <a name="to-handle-errors-when-receiving-electronic-documents"></a>Обработка ошибок при получении электронных документов
1. На странице **Входящие документы** выберите строку, для электронного документа, полученного из службы OCR с ошибками. Это отображается значением "Ошибка" в поле **Статус OCR**.
2. Выберите действие **Правка**, чтобы открыть страницу **Входящие документы**.
3. На экспресс-вкладке **Ошибки и предупреждения** выберите сообщение, затем выберите действие **Открыть связанную запись**.
4. Откроется страница, содержащая неверные или отсутствующие данные — например, карточка клиента с отсутствующим значением поля.
5. Исправьте ошибку или ошибки, как описано в каждом сообщении об ошибке.
6. Продолжите обработку входящего электронного документа, повторно выбрав действие **Создать вручную**.
7. Повторите шаги 5 и 6 для всех оставшихся ошибок, пока электронный документ не будет получен успешно.

## <a name="to-train-the-ocr-service-to-avoid-errors"></a>Обучение службы OCR для предотвращения ошибок
Поскольку процесс сканирования основан на оптическом распознавании, существует вероятность, что служба сканирования интерпретирует символы в ваших PDF-файлах или файлах изображений неправильно, например, при первой обработке документов от определенного поставщика. Он может не распознать логотип компании как наименование поставщика, или неправильно интерпретировать итоговую сумму в расходной квитанции из-за ее расположения. Чтобы избежать подобных ошибок в дальнейшем, можно исправить данные, полученные от службы распознавания, и отправить обратную связь в службу.

Страница **Корректировка данных OCR**, которое можно открыть со страницы **Входящий документ**, показывает поля экспресс-вкладки **Финансовая информация** в двух столбцах: один содержит редактируемые данные сканирования, а другой — данные сканирования, доступные только для чтения. При нажатии кнопки **Отправить отзыв OCR** содержимое страницы **Корректировка данных OCR** отправляется в службу сканирования. При следующей обработке службой PDF-файлов или файлов изображений, содержащих такие же данные, ваши исправления будут учтены, чтобы избежать повторения ошибок.

1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Входящие документы**, затем выберите соответствующую ссылку.
2. Откройте запись входящего документа, содержащую данные, полученные от службы OCR, которые необходимо исправить.
3. На странице **Входящий документ** выберите действие **Исправить данные OCR**.
4. На странице **Корректировка данных OCR** перезапишите данные в доступном для редактирования столбце для каждого поля с неправильным значением.
5. Чтобы отменить внесенных с момента открытия страницы **Корректировка данных OCR** исправления, выберите действие **Сбросить данные OCR**.
6. Для отправки исправлений в службу OCR выберите действие **Отправить отзыв OCR**.
7. Для сохранения исправлений закройте страницу **Корректировка данных OCR**.

Поля на экспресс-вкладке **Финансовые сведения** на странице **Входящий документ** будут обновлены с внесением новых значений, введенных на шаге 4.

## <a name="see-also"></a>См. также
[Обработка входящих документов](across-process-income-documents.md)  
[Входящие документы](across-income-documents.md)  
[Покупки](purchasing-manage-purchasing.md)  
[Работа с [!INCLUDE[d365fin](includes/d365fin_md.md)]](ui-work-product.md)
