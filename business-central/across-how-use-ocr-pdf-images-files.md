---
title: Использование OCR для преобразования PDF в электронные счета
description: Описывает процедуру использования службы OCR для преобразования входящих PDF или графических файлов в электронные документы.
documentationcenter: ''
author: SorenGP
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 'electronic document, e-invoice, incoming document, OCR, ecommerce, document exchange, import invoice'
ms.date: 06/14/2022
ms.author: edupont
---
# <a name="use-ocr-to-turn-pdf-and-image-files-into-electronic-documents" />Использование OCR для преобразования PDF-файлов и файлов изображений в электронные документы

Из PDF-файлов или файлов изображений, получаемых от торговых партнеров, с помощью внешнего сервиса OCR (оптическое распознавание символов) можно создавать электронные документы, подходящие для преобразования в записи документов в [!INCLUDE[prod_short](includes/prod_short.md)]. Например, при получении от поставщика счета в формате PDF можно [отправить его в службу OCR на странице **Входящие документы**](#to-send-a-pdf-or-image-file-to-the-ocr-service-from-the-incoming-documents-page).

В качестве альтернативы для отправки файла со страницы **Входящие документы**, служба OCR может предложить возможность [обработки файлов, пересланных на специальный адрес электронной почты](#to-send-a-pdf-or-image-file-to-the-ocr-service-by-email). Затем, когда вы получите документ обратно, автоматически создается соответствующая запись входящего документа в [!INCLUDE[prod_short](includes/prod_short.md)].

Через несколько секунд служба OCR отправит обработанный файл на страницу **Входящие документы** как запись электронного документа, которую можно [преобразовать в счет-фактуру на покупку для поставщика](#to-receive-the-resulting-electronic-document-from-the-ocr-service), счет-фактуру, кредит-ноту или запись в журнале.

Поскольку процесс сканирования основан на оптическом распознавании, существует вероятность, что служба сканирования интерпретирует символы в ваших PDF-файлах или файлах изображений неправильно, например, при первой обработке документов от определенного поставщика. Он может не распознать логотип компании как наименование поставщика, или неправильно интерпретировать итоговую сумму в квитанции из-за ее расположения. Чтобы избежать подобных ошибок в дальнейшем, можно исправить данные, в отдельной версии страницы **Входящие документы**. После этого корректировки отправляются обратно в службу OCR, чтобы определенные символы и поля были правильно распознаны в следующий раз при обработке PDF-файла или файла изображения от этого поставщика. Дополнительные сведения см. в разделе [Обучение службы OCR для предотвращения ошибок](across-how-use-ocr-pdf-images-files.md#to-train-the-ocr-service-to-avoid-errors).

Трафик файлов в службу OCR и из нее обрабатывается специальной записью в очереди заданий. Эта очередь заданий создается автоматически при включении подключения к внешней службе OCR. Дополнительные сведения см. в разделе [Настройка входящих документов](across-how-setup-income-documents.md).

> [!NOTE]
> Функция OCR предоставляется внешними поставщиками. Выберите пакет услуг, подходящий для вашей организации и/или страны/региона. Найдите сервисы, совместимые с [!INCLUDE[prod_short](includes/prod_short.md)], и подробности о доступных функциях на сайте [AppSource.microsoft.com](https://go.microsoft.com/fwlink/?linkid=2081646).

## <a name="to-send-a-pdf-or-image-file-to-the-ocr-service-from-the-incoming-documents-page" />Отправка PDF-файла или файла изображения в службу OCR со страницы "Входящие документы"

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Входящие документы**, а затем выберите связанную ссылку.
2. Создайте новую запись входящего документа и прикрепите файл. Дополнительные сведения см. в разделе [Создание записей входящих документов](across-how-create-income-document-records.md).  
3. На странице **Входящие документы** выберите одну или несколько строк, а затем выберите действие **Отправить в очередь работ**.

   Значение в поле **Статус OCR** будет изменено на **Готово**. Прикрепленный PDF-файл или файл изображения отправляется в службу OCR очередью заданий по расписанию при условии отсутствия ошибок.
4. В качестве альтернативы на странице **Входящие документы** выберите одну или несколько строк, а затем выберите действие **Отправить в службу сканирования**, чтобы сразу отправить файлы на обработку.

   Значение в поле **Статус OCR** изменяется на **Отправлено** при условии отсутствия ошибок.

## <a name="to-send-a-pdf-or-image-file-to-the-ocr-service-by-email" />Отправка PDF-файла или файла изображения в службу OCR по электронной почте

Из приложения электронной почты вы можете переслать сообщение электронной почты поставщику службы OCR с прикрепленным PDF-файлом или файлом изображения. Дополнительные сведения об адресе электронной почты получателя см. на веб-сайте поставщика службы OCR.

Поскольку запись входящего документа для файла отсутствует, при отправке службой OCR готового электронного документа на странице **Входящие документы** автоматически будет создана новая запись. Дополнительные сведения см. в разделе [Создание записей входящих документов](across-how-create-income-document-records.md).

> [!NOTE]  
> Если вы используете планшет или телефон, вы можете отправить файл в службу OCR сразу после создания фотографии документа или создать входящий документ напрямую. Дополнительные сведения см. в разделе [Создание записи входящего документа по фотографии](across-how-create-income-document-records.md#create-an-incoming-document-record-by-taking-a-photo).

## <a name="to-receive-the-resulting-electronic-document-from-the-ocr-service" />Чтобы получить созданный электронный документ из службы OCR

Электронный документ, созданный службой OCR из файла PDF или изображения, автоматически получается а странице **Входящие документы** с помощью записи очереди работ, которая была настроена при включении службы OCR.

Если очередь заданий не используются или если необходимо получить готовый документ OCR быстрее, чем запланировано в расписании очереди заданий, можно выбрать действие **Получить из службы OCR**. В этом варианте будут получены все документы, уже обработанные службой OCR.

> [!NOTE]  
> Если в службе OCR настроено требование ручной проверки обработанных документов, поле **Статус OCR** будет содержать значение **Ожидает проверки**. В этом случае выполните следующие действия, чтобы выполнить вход на веб-сайт службы OCR для проверки OCR-документа вручную.

1. В поле **Статус OCR** выберите гиперссылку **Ожидает проверки**.
2. На веб-сайте службы OCR выполните вход с помощью учетных данных вашей учетной записи службы OCR. Дополнительные сведения см. в разделе [Настройка службы распознавания](across-how-setup-income-documents.md#to-set-up-an-ocr-service).

   Отображается информация для документа OCR, которая показывает как исходное содержимое PDF-файла или графического файла, так и итоговые значения поля OCR.
3. Просмотрите значения полей и вручную измените или введите значения в полях, которые служба OCR пометила, как распознанные неуверенно.
4. Нажмите кнопку **ОК**. Процесс OCR завершается, и итоговый электронный документ отправляется на страницу **Входящие документы** в [!INCLUDE[prod_short](includes/prod_short.md)] в соответствии с расписанием очереди работ.
5. Повторите шаги со 2 по 4 для любого документа OCR, который требуется проверить.

Теперь можно переходить к созданию записей документов для полученных электронных документов в [!INCLUDE[prod_short](includes/prod_short.md)] вручную или автоматически. Дополнительные сведения см. в следующей процедуре. Также можно [связать новую запись входящего документа с существующим учтенными или неучтенными документами](across-how-connect-disconnect-income-document-records.md), чтобы обеспечить простой доступ к исходному файлу из [!INCLUDE[prod_short](includes/prod_short.md)].

## <a name="to-create-a-purchase-invoice-from-an-electronic-document-received-from-the-ocr-service" />Создание счета покупки из электронного документа, полученного из службы OCR

В следующей процедуре описывается создание записи счета покупки на основе счета поставщика, полученного как электронный документ из службы OCR. Такая же процедура используется при создании, например, строки финансового журнала из расходной квитанции или возврата продажи из клиента.

> [!NOTE]  
> Поля **Описание** и **№** в созданных строках документа будут заполняться только в том случае, если предварительно текст, найденный в документе OCR, был сопоставлен этим двум полям в [!INCLUDE[prod_short](includes/prod_short.md)]. Это сопоставление может представлять собой ссылки на товары для строк документа с типом "Товар". Дополнительные сведения см. в разделе [Использование ссылок по товару](inventory-how-use-item-cross-refs.md). Можно также использовать функцию **Сопоставление текста со счетами**. Дополнительные сведения см. в разделе [Сопоставление текста во входящем документе с конкретным счетом поставщика, счетом ГК или банковским счетом](across-how-use-ocr-pdf-images-files.md#to-map-text-on-an-incoming-document-to-a-specific-vendor-account).

1. Выберите строку для входящего документа, а затем выберите действие **Создать документ**.

Счет покупки будет создан [!INCLUDE[prod_short](includes/prod_short.md)] на основе информации в электронном документе поставщика, полученном из сервиса OCR. Информация будет вставлена в новый счет покупки на основании сопоставления, которое вы определили в виде ссылки или сопоставления текста со счетом.

Любые ошибки проверки, обычно связанные с некорректностью или отсутствием данных в [!INCLUDE[prod_short](includes/prod_short.md)], будут представлены на экспресс-вкладке **Ошибки и предупреждения**. Дополнительные сведения см. в разделе [Обработка ошибок при получении электронных документов](across-how-use-ocr-pdf-images-files.md#to-handle-errors-when-receiving-electronic-documents).

### <a name="to-map-text-on-an-incoming-document-to-a-specific-vendor-account" />Сопоставление текста во входящем документе с конкретным счетом поставщика

Для входящих документов обычно используется действие **Определить соответствие текста счетам** для задания, что определенный текст в счете поставщика, полученного из службы OCR, сопоставляется определенному счету поставщика. В дальнейшем любая часть описания входящего документа, существующая в виде текста сопоставления, означает, что поле **Поставщик №** результирующего документа или строки журнала типа *Счет ГК* заполняется соответствующим поставщиком.

В дополнение к сопоставлению со счетом поставщика или другими счетами ГК, также возможно сопоставление текста с банковским счетом. Этот вариант удобен, например, для электронных документов для расходов, которые уже оплачены, и для который требуется создать строку финансового журнала, которая готова к учету на банковском счете.

1. Выберите соответствующую строку входящего документа, а затем выберите действие **Определить соответствие текста счетам**. Откроется страница **Сопоставление текста со счетами**.
2. В поле **Текст сопоставления** введите текст, который присутствует на счетах поставщика, для которых вы хотите создавать документы покупки или строки журнала. Можно ввести до 50-ти символов.
3. В поле **Номер поставщика** введите поставщика, для которого будет создаваться документ покупки или строка журнала.
4. В поле **Номер дебетового счета** введите дебетовый счет ГК, который будет вставляться в создаваемый документ покупки или строку журнала типа "Счет ГК".
5. В поле **Номер кредитового счета** введите кредитовый счет ГК, который будет вставляться в создаваемый документ покупки или строку журнала типа "Счет ГК".

   > [!NOTE]
   > Поля **Тип источника сальдо** и **Номер источника сальдо** в связи с входящими документами не используются. Они используются только для автоматической выверки платежей. Дополнительные сведения см. в разделе [Сопоставление текста на типовых платежах со счетами для автоматической выверки](receivables-how-map-text-recurring-payments-accounts-auto-reconcilliation.md).
6. Повторите шаги 2–5 для всего текста во входящих документах, для которых вы хотите автоматически создавать документы.

## <a name="to-handle-errors-when-receiving-electronic-documents" />Обработка ошибок при получении электронных документов

1. На странице **Входящие документы** выберите строку, для электронного документа, полученного из службы OCR с ошибками, обозначаемыми значением *Ошибка* в поле **Состояние OCR**.
2. Выберите действие **Правка**, чтобы открыть страницу **Входящие документы**.
3. На экспресс-вкладке **Ошибки и предупреждения** выберите сообщение, затем выберите действие **Открыть связанную запись**.
4. Откроется страница, содержащая неверные или отсутствующие данные — например, карточка клиента с отсутствующим значением поля.
5. Исправьте ошибку или ошибки, как описано в каждом сообщении об ошибке.
6. Продолжите обработку входящего электронного документа, повторно выбрав действие **Создать вручную**.
7. Повторите шаги 5 и 6 для всех оставшихся ошибок, пока электронный документ не будет получен успешно.

## <a name="to-train-the-ocr-service-to-avoid-errors" />Обучение службы OCR для предотвращения ошибок

Поскольку процесс сканирования основан на оптическом распознавании, служба OCR может интерпретировать символы в ваших PDF-файлах или файлах изображений неправильно, например, при первой обработке документов от определенного поставщика. Он может не распознать логотип компании как наименование поставщика, или неправильно интерпретировать итоговую сумму в расходной квитанции из-за ее расположения. Чтобы избежать подобных ошибок в дальнейшем, можно исправить данные, полученные от службы распознавания, и отправить обратную связь в службу.

Страница **Корректировка данных OCR**, которое можно открыть со страницы **Входящий документ**, показывает поля экспресс-вкладки **Финансовая информация** в двух столбцах: один содержит редактируемые данные сканирования, а другой — данные сканирования, доступные только для чтения. При нажатии кнопки **Отправить отзыв OCR** содержимое страницы **Корректировка данных OCR** отправляется в службу сканирования. При следующей обработке службой PDF-файлов или файлов изображений, содержащих такие же данные, ваши исправления будут учтены, чтобы повысить качество распознавания документа.

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") введите **Входящие документы**, затем выберите связанную ссылку.
2. Откройте запись входящего документа, содержащую данные, полученные от службы OCR, которые необходимо исправить.
3. На странице **Входящий документ** выберите действие **Исправить данные OCR**.
4. На странице **Корректировка данных OCR** перезапишите данные в доступном для редактирования столбце для каждого поля с неправильным значением.
5. Чтобы отменить внесенных с момента открытия страницы **Корректировка данных OCR** исправления, выберите действие **Сбросить данные OCR**.
6. Для отправки исправлений в службу OCR выберите действие **Отправить отзыв OCR**.
7. Для сохранения исправлений закройте страницу **Корректировка данных OCR**.

Поля на экспресс-вкладке **Финансовые сведения** на странице **Входящий документ** будут обновлены с внесением новых значений, введенных на шаге 4.

## <a name="see-related-microsoft-trainingtrainingmodulesincoming-documents-dynamics--business-central" />См. соответствующее [обучение Microsoft](/training/modules/incoming-documents-dynamics-365-business-central/)

## <a name="see-also" />См. также

[Создание записей входящих документов](across-how-create-income-document-records.md)
[Создание записей входящих документов непосредственно из документов и операций](across-how-connect-disconnect-income-document-records.md)
[Входящие документы](across-income-documents.md)  
[Покупки](purchasing-manage-purchasing.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)  


[!INCLUDE[footer-include](includes/footer-banner.md)]
