---
title: Связывание и синхронизация (содержит видео)
description: Синхронизация сопоставления таблиц интеграции позволяет синхронизировать данные во всех записях в связанных таблицах в Business Central и в Dynamics 365 Sales.
author: brentholtorf
ms.author: bholtorf
ms.reviewer: bholtorf
ms.topic: conceptual
ms.date: 03/31/2023
ms.custom: bap-template
ms.search.keywords: 'crm, sales, couple, decouple, synchronize'
ms.search.form: '6250,'
ms.service: dynamics-365-business-central
---

# <a name="couple-and-synchronize-records-between-dataverse-and-business-central"></a>Связывание и синхронизация записей между Dataverse и Business Central

В этом разделе описана процедура связывания одной или нескольких записей [!INCLUDE[prod_short](includes/prod_short.md)] с записями в Dataverse или [!INCLUDE[crm_md](includes/crm_md.md)]. Связывание записей позволяет просматривать сведения Dataverse из [!INCLUDE[prod_short](includes/prod_short.md)] и наоборот. Связывание также позволяет синхронизировать данные между записями. Можно связать существующие записи или создать и связать новые записи.

> [!NOTE]
> Связывание и синхронизация данных доступны только в том случае, если системный администратор создал подключение между [!INCLUDE[prod_short](includes/prod_short.md)] и Dataverse или [!INCLUDE[crm_md](includes/crm_md.md)]. Быстрый способ проверить — это открыть карточку **Клиент** и найти действие **Настроить связывание**. Если действие доступно, приложения подключены.

## <a name="video-example"></a>Видео с примером

В этом видео показано связывание и синхронизация данных в контексте интеграции с [!INCLUDE[crm_md](includes/crm_md.md)].

> [!VIDEO https://go.microsoft.com/fwlink/?linkid=2098376]

## <a name="to-couple-a-record"></a>Связывание записи

1. В [!INCLUDE[prod_short](includes/prod_short.md)] откройте карточку для записи, которую требуется связать. Например, карточка клиента или контакта.  

    Можно также открыть страницу списка и выбрать запись, которую следует связать.  

2. Выберите действие **Настроить связывание**.  
3. Заполните поля, затем выберите **ОК**.  

## <a name="to-synchronize-a-single-record"></a>Синхронизация одной записи

1. В [!INCLUDE[prod_short](includes/prod_short.md)] откройте карточку для записи, которую требуется связать. Например, карточка клиента или контакта.  
2. Выберите действие **Синхронизировать сейчас**.  
3. Если запись можно синхронизировать в одном направлении, выберите параметр, определяющий направление обновления данных, затем выберите **ОК**.  

## <a name="to-synchronize-a-single-record-from-"></a>Синхронизация одной записи из [!INCLUDE[crm_md](includes/crm_md.md)]

1. В [!INCLUDE[crm_md](includes/crm_md.md)] откройте форму для записи, которую требуется связать. Например, форма карточки организации или карточки контакта.  
2. Выберите действие **[!INCLUDE[prod_short](includes/prod_short.md)]** на ленте, чтобы открыть и связать запись автоматически.

    > [!Note]
    > Вы можете синхронизировать одну запись из [!INCLUDE[crm_md](includes/crm_md.md)] автоматически, только когда параметр **Синхр. только связанные записи** отключен, и на странице **Сопоставление таблиц интеграции** для записи. установлено направление синхронизации **Двунаправленная** или **Из таблицы интеграции**. Дополнительные сведения см. в разделе [Сопоставление таблиц и полей для синхронизации](admin-how-to-modify-table-mappings-for-synchronization.md#create-new-records).

## <a name="to-couple-multiple-records-using-match-based-coupling"></a>Чтобы связать несколько записей с помощью связывания на основе совпадений

Укажите данные для синхронизации для объекта, такого как клиент или контакт, путем связывания записей на основе совпадений. Уточните совпадения, сделав поиск чувствительным к регистру и назначив приоритет для каждого совпадения. Если совпадений не найдено, вы также можете указать, что хотите создать объект в Dataverse. Дополнительную информацию см. в разделе [Настройка связывания на основе совпадений](admin-how-to-set-up-a-dynamics-crm-connection.md#customize-the-match-based-coupling).  

> [!NOTE]
> Процесс связывания на основе совпадений пропускает записи, которые уже сопоставлены. Чтобы включить эти записи при выполнении связывания на основе совпадений, разъедините записи и повторите попытку. Чтобы узнать больше о разъединении записей, перейдите в раздел [Разъединение записей](#uncoupling-records).

1. В [!INCLUDE[prod_short](includes/prod_short.md)] откройте страницу списка для записи, например страницы списка "Клиенты" или "Контакты".
2. Выберите действие **Связывание на основе совпадений**.
3. Заполните соответствующим образом поля. [!INCLUDE[tooltip-inline-tip](includes/tooltip-inline-tip_md.md)]

## <a name="to-synchronize-multiple-records"></a>Синхронизация нескольких записей

1. В [!INCLUDE[prod_short](includes/prod_short.md)] откройте страницу списка для записи, например страницы списка "Клиенты" или "Контакты".  
2. Выберите записи, который требуется синхронизировать, затем выберите действие **Синхронизировать сейчас**.  
3. Если записи можно синхронизировать в одном направлении, выберите параметр, определяющий направление, затем выберите **ОК**.  

## <a name="bulk-insert-and-couple-records"></a>Массовая вставка и связывание записей

Если у вас большое количество сущностей Dataverse, соответствующих записям в [!INCLUDE [prod_short](includes/prod_short.md)], вы можете вставлять и связывать их в пакетном режиме. Например, вставлять и связывать записи в пакетном режиме имеет смысл при настройке синхронизации в первый раз.

Для этого используется **Мастер импорта данных** в **Центре администрирования Microsoft Power Platform**.

В следующем примере показано, как массово вставить и связать клиентов с организациями в Dataverse. Аналогичная процедура используется для других типов сущностей, таких как поставщики, товары и ресурсы.

1. Выберите значок ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Клиенты**, а затем выберите связанную ссылку.
2. Выберите действие **Открыть в Excel** , чтобы открыть данные клиентов в Excel. <!--Don't they need to choose the customers that they want to import to Dataverse?-->
3. Чтобы сопоставить и импортировать данные в сущность **Организация** в Dataverse, выполните действия, описанные в разделе [Импорт данных (все типы записей ) из нескольких источников](/power-platform/admin/import-data-all-record-types).  

    Если сущность "Организация" имеет столбец **bcbi_companyid** , при сопоставлении столбцов данных убедитесь, что при импорте каждой импортируемой записи назначается соответствующий ИД организации в этом столбце. Чтобы найти идентификатор организации в [!INCLUDE [prod_short](includes/prod_short.md)], выполните следующие действия:

    1. Откройте страницу **Сопоставления таблиц интеграции**.
    2. Выберите сопоставление **КЛИЕНТ**, затем выберите **Изменить список**.
    3. Прокрутите вправо и нажмите кнопку "Помощь в редактировании" :::image type="icon" source="media/assist-edit-icon.png" border="false"::: в поле **Фильтр таблицы интеграции**. Отобразится фильтр по умолчанию для сопоставления клиента, который содержит ИД организации. ИД организации — это первая часть значения. Скопируйте только эту часть, не обращая внимания на нули. В следующем примере выделена часть, которую нужно скопировать.

    :::image type="content" source="media/dataverse-company-id-guid.png" alt-text="Иллюстрирует часть ИД организации, которую нужно скопировать.":::

    > [!NOTE]
    > Не все имена сущностей Dataverse и записей Business Central совпадают. В зависимости от того, что вы импортируете, проверьте, чтобы следующие столбцы имели следующие значения после импорта:
    >
    >* Для клиентов столбец **CustomerTypeCode** должен содержать значение **Клиент**.
    >* Для поставщиков столбец **CustomerTypeCode** должен содержать значение **Поставщики**. 
    >* Для товаров столбец  **ProductTypeCode** должен содержать значение **Запасы продаж**.
    >* Для ресурсов столбец **ProductTypeCode** должен содержать значение **Услуга**.
 
4. После импорта данных в среду Dataverse выполните в [!INCLUDE [prod_short](includes/prod_short.md)] действия, приведенные в разделе [Чтобы связать несколько записей с помощью связывания на основе совпадений](#to-couple-multiple-records-using-match-based-coupling), чтобы связать сущности Dataverse с записями [!INCLUDE [prod_short](includes/prod_short.md)]. 

## <a name="uncoupling-records"></a>Отмена связывания записей

Вы можете отменить связывание одной или нескольких записей со страниц списка или страницы **Ошибки синхронизации связанных данных**, выбрав одну или несколько строк и выбрав **Удалить связывание**. Вы также можете удалить все связывания для одного или нескольких сопоставлений таблиц на странице **Сопоставления таблиц интеграции**.

## <a name="see-also"></a>См. также

[Использование Dynamics 365 Sales из Business Central](marketing-integrate-dynamicscrm.md)


[!INCLUDE[footer-include](includes/footer-banner.md)]
