---
title: Подключение к Microsoft Dataverse
description: 'Настройка подключения между Business Central и Dataverse. Как правило, предприятия создают соединение для интеграции данных с другим бизнес-приложением Dynamics 365.'
author: brentholtorf
ms.author: bholtorf
ms.reviewer: bholtorf
ms.topic: conceptual
ms.search.keywords: null
ms.search.forms: '7200, 7201'
ms.date: 02/28/2024
ms.service: dynamics-365-business-central
---
# Подключение к Microsoft Dataverse

[!INCLUDE[azure-ad-to-microsoft-entra-id](~/../shared-content/shared/azure-ad-to-microsoft-entra-id.md)]

В этой статье описывается, как установить соединение между [!INCLUDE[prod_short](includes/prod_short.md)] и [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. Как правило, предприятия создают соединение для интеграции и синхронизации данных с другим бизнес-приложением Dynamics 365, например [!INCLUDE[crm_md](includes/crm_md.md)].  

## Перед началом работы

Перед тем, как создать соединение, необходимо подготовить несколько фрагментов информации:  

* URL-адрес для среды [!INCLUDE[cds_long_md](includes/cds_long_md.md)], к которой требуется подключиться. Если вы используете мастер настройки **Настройка подключения Dataverse** для создания подключения, мы найдем ваши среды. Вы также можете ввести URL-адрес другой среды в своем клиенте.  
* Имя пользователя и пароль учетной записи, которая имеет разрешения администратора в [!INCLUDE[prod_short](includes/prod_short.md)] и [!INCLUDE[cds_long_md](includes/cds_long_md.md)].  
* Если у вас есть локальная версия [!INCLUDE[prod_short](includes/prod_short.md)] выпуска 2020, волна 1, версия 16.5, ознакомьтесь со статьей [Некоторые известные проблемы](/dynamics365/business-central/dev-itpro/upgrade/known-issues#wrong-net-assemblies-for-external-connected-services). Вам нужно будет выполнить описанный обходной метод, прежде чем вы сможете создать подключение к [!INCLUDE[cds_long_md](includes/cds_long_md.md)].
* Местные валюты, которые использует каждая организация. Организации [!INCLUDE [prod_short](includes/prod_short.md)] могут подключаться к среде [!INCLUDE [cds_long_md](includes/cds_long_md.md)], базовая валюта в которой отличается от их местной валюты. Подробнее об управлении мультивалютными конфигурациями см. в разделе [Использование разных валют](#allow-for-different-currencies).

> [!IMPORTANT]
> Ваша среда [!INCLUDE[cds_long_md](includes/cds_long_md.md)] не должна находиться в режиме администрирования. Режим администрирования приведет к сбою подключения, поскольку у учетной записи пользователя интеграции для подключения нет прав администратора. Дополнительные сведения см. в разделе [Режим администрирования](/power-platform/admin/admin-mode).

> [!Note]
> Эти шаги описывают процедуру для [!INCLUDE[prod_short](includes/prod_short.md)] Online.
> Если вы используете локальную версию [!INCLUDE[prod_short](includes/prod_short.md)] и не используете учетную запись Microsoft Entra для подключения к [!INCLUDE [cds_long_md](includes/cds_long_md.md)], вы также должны указать имя пользователя и пароль учетной записи пользователя для интеграции. Эта учетная запись называется учетной записью "пользователя интеграции". Если вы используете учетную запись Microsoft Entra, учетная запись пользователя интеграции не требуется и не отображается. Пользователь интеграции будет настроен автоматически и не потребует лицензии.

## Связывание сред Business Central и Dataverse

Компании хотят, чтобы их данные были в безопасности и защищены в пределах своих границ конфиденциальности, особенно когда их приложение для управления бизнесом интегрируется с другими приложениями. Связывая среды [!INCLUDE [prod_short](includes/prod_short.md)] и [!INCLUDE[cds_long_md](includes/cds_long_md.md)], вы не только достигнете этих целей, но и предоставите своим администраторам более простой способ создания и поддержки вашей интеграции с другими приложениями Dynamics 365.

В центре администрирования [!INCLUDE [prod_short](includes/prod_short.md)] вы можете связать свою среду [!INCLUDE [prod_short](includes/prod_short.md)] со своей средой [!INCLUDE [cds_long_md](includes/cds_long_md.md)]. [!INCLUDE [prod_short](includes/prod_short.md)] может использовать информацию по ссылке, чтобы упростить и повысить безопасность интеграции с другими приложениями Dynamics 365, такими как Sales и Field Service. Например, URL-адрес связанной среды [!INCLUDE [cds_long_md](includes/cds_long_md.md)] доступен по умолчанию на странице **Настройка подключения Dataverse** и при запуске мастера настройки **Настройка подключения Dataverse**.

## Использование разных валют

Организации [!INCLUDE [prod_short](includes/prod_short.md)] могут подключаться к среде [!INCLUDE [cds_long_md](includes/cds_long_md.md)], базовая валюта в которой отличается от их местной валюты.

> [!NOTE]
> Синхронизация нескольких валют требует использования однонаправленной синхронизации — из [!INCLUDE [prod_short](includes/prod_short.md)] в [!INCLUDE [cds_long_md](includes/cds_long_md.md)].

Подробнее о базовой валюте в [!INCLUDE [cds_long_md](includes/cds_long_md.md)] см. в статье [Сущность валюты транзакции (валюта)](/powerapps/developer/data-platform/transaction-currency-currency-entity). 

Подробнее о валютах в [!INCLUDE [prod_short](includes/prod_short.md)] см. в статье [Валюты в Business Central](finance-currencies.md).

Чтобы разрешить использование разных валют, перед подключением убедитесь, что вы указали следующие параметры:

* Значение параметра базовой валюты транзакций в [!INCLUDE [cds_long_md](includes/cds_long_md.md)] соответствует коду валюты, указанному на странице **Валюты** в [!INCLUDE [prod_short](includes/prod_short.md)].
* Для валюты указан по крайней мере один обменный курс в [!INCLUDE [prod_short](includes/prod_short.md)] на странице **Валютные курсы**.

Когда вы включаете подключение к [!INCLUDE [cds_long_md](includes/cds_long_md.md)], [!INCLUDE [prod_short](includes/prod_short.md)] добавляет местную валюты этой системы в сущность **Валюта** в [!INCLUDE [cds_long_md](includes/cds_long_md.md)]. Для местной валюты используется обменный курс, указанный в поле **Коэффициент курса валюты** на странице **Валютные курсы**.

Поскольку синхронизация валют однонаправленная — из [!INCLUDE [prod_short](includes/prod_short.md)] в [!INCLUDE [cds_long_md](includes/cds_long_md.md)] — денежные суммы конвертируются и синхронизируются следующим образом:

* Суммы в базовой валюте [!INCLUDE [cds_long_md](includes/cds_long_md.md)] конвертируются в местную валюту [!INCLUDE [prod_short](includes/prod_short.md)] с использованием последнего обменного курса, синхронизированного с [!INCLUDE [prod_short](includes/prod_short.md)].
* Суммы в местной валюте [!INCLUDE [prod_short](includes/prod_short.md)] синхронизируются с местной валютой [!INCLUDE [prod_short](includes/prod_short.md)] в одной из дополнительных (не базовых) валют в [!INCLUDE [cds_long_md](includes/cds_long_md.md)].

## Настройка подключения к [!INCLUDE[cds_long_md](includes/cds_long_md.md)]

Для всех типов аутентификации, отличных от аутентификации Microsoft 365, вы настраиваете подключение к [!INCLUDE[cds_long_md](includes/cds_long_md.md)] на странице **Настройка подключения к Dataverse**. Для аутентификации Microsoft 365 рекомендуется использовать мастер настройки **Настройка подключения Dataverse**. Этот мастер позволяет проще настроить подключение и указать расширенные функции, такие как модель ответственности и начальной синхронизации.  

> [!IMPORTANT]
> Во время настройки подключения к [!INCLUDE[cds_long_md](includes/cds_long_md.md)] администратору будет предложено предоставить следующие разрешения зарегистрированному приложению Azure с именем "Интеграция [!INCLUDE[prod_short](includes/prod_short.md)]" в [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:
>
> * Требуется разрешение **доступ [!INCLUDE[cds_long_md](includes/cds_long_md.md)] как вы**, поэтому [!INCLUDE[prod_short](includes/prod_short.md)] может от имени администратора автоматически создавать нелицензионные неинтерактивные пользователи приложения интеграции [!INCLUDE[prod_short](includes/prod_short.md)], назначьте роли безопасности этому пользователю и разверните решение для интеграции [!INCLUDE[prod_short](includes/prod_short.md)] для [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. Это разрешение используется только один раз при настройке подключения к [!INCLUDE[cds_long_md](includes/cds_long_md.md)].  
> * Требуется разрешение **Полный доступ к Dynamics 365[!INCLUDE[prod_short](includes/prod_short.md)]**, поэтому автоматически создаваемый пользователь приложения интеграции [!INCLUDE[prod_short](includes/prod_short.md)] может получить доступ к данные [!INCLUDE[prod_short](includes/prod_short.md)], которые будут синхронизированы.  
> * Требуется разрешение **войдите и прочтите свой профиль**, чтобы убедиться, что пользователь, входящий в систему, на самом деле имеет роль администратора системы, назначенную в [!INCLUDE[cds_long_md](includes/cds_long_md.md)].  
>
> Предоставляя согласие от имени организации, администратор дает право зарегистрированному приложению Azure, которое называется Интеграция [!INCLUDE[prod_short](includes/prod_short.md)] в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] синхронизировать данные, используя автоматически созданные учетные данные пользователя приложения интеграции [!INCLUDE[prod_short](includes/prod_short.md)].

### Использование мастера настройки подключения Dataverse

Руководство по настройке подключения Dataverse может упростить подключение приложений и даже помочь вам выполнить первоначальную синхронизацию. Если вы выберете запуск начальной синхронизации, [!INCLUDE[prod_short](includes/prod_short.md)] проверит данные в обоих приложениях и предоставит рекомендации по подходу к начальной синхронизации. В следующей таблице описаны эти рекомендации.

|Рекомендация  |Описание  |
|---------|---------|
|**Полная синхронизация**|Данные существуют только в [!INCLUDE[prod_short](includes/prod_short.md)] или только в [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. Рекомендация: синхронизировать все данные из службы, в которой они есть, с другой службой.|
|**Без синхронизации**|Данные существуют в обоих приложениях, и выполнение полной синхронизации приведет к их дублированию. Рекомендуется связать записи.|
|**Зависимость не удовлетворена**|Данные существуют в обоих приложениях, но строка или таблица не могут быть синхронизированы, потому что она зависит от строки или таблицы, для которых есть рекомендация "Без синхронизации". Например, если клиенты не могут быть синхронизированы, то данные для контактов, которые зависят от данных клиентов, также не могут быть синхронизированы.|

> [!IMPORTANT]
> Обычно вы используете полную синхронизацию только тогда, когда интегрируете приложения впервые, и только одно приложение содержит данные. Полная синхронизация может быть полезна в демонстрационной среде, поскольку она автоматически создает и связывает записи в каждом приложении, что ускоряет начало работы с синхронизированными данными. Однако вам следует запускать полную синхронизацию только в том случае, если вам нужна одна строка в [!INCLUDE[prod_short](includes/prod_short.md)] для каждой строки в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] для сопоставления таблиц. В противном случае результатом могут быть повторяющиеся записи.

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Мастер настройки**, а затем выберите связанную ссылку.
2. Выберите пункт **Настройка подключения к Microsoft Dataverse**, чтобы запустить мастер настройки.
3. Заполните соответствующим образом поля.

> [!NOTE]
> Если вам не предлагается войти в систему с учетной записью администратора, возможно, это связано с блокировкой всплывающих окон. Чтобы войти, разрешите всплывающие окна от `https://login.microsoftonline.com`.

### Создание или ведение подключения вручную

Далее описан порядок настройки подключения вручную на странице **Настройка подключения Dataverse**. Страница **Настройка подключения Dataverse**, где вы управляете настройками интеграции.

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Настройка подключения Dataverse**, а затем выберите связанную ссылку.
2. Введите следующие сведения для подключения из [!INCLUDE[cds_long_md](includes/cds_long_md.md)] к [!INCLUDE[prod_short](includes/prod_short.md)].

    |Поле|Описание|
    |-----|-----|
    |**URL-адрес среды**|Если вы владеете средами в [!INCLUDE[cds_long_md](includes/cds_long_md.md)], мы найдем их для вас, когда вы запустите мастер настройки. Если вы хотите подключиться к другой среде в другом арендаторе, вы можете ввести учетные данные администратора для этой среды, и мы обнаружим их. |
    |**Включено**|Начните использовать интеграцию. Если выполнять подключение в данный момент не требуется, можно сохранить настройки подключения, однако пользователи не получат доступа к данным [!INCLUDE[cds_long_md](includes/cds_long_md.md)] из [!INCLUDE[prod_short](includes/prod_short.md)]. Позднее следует вернуться на эту страницу и выполнить подключение.  |

3. В поле **Модель ответственности** выберите, хотите ли вы, чтобы таблица рабочей группы в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] владела новыми записями, или чтобы ответственными были один или несколько конкретных пользователей. Если вы выбираете **Человек**, вы должны указать каждого пользователя. Если вы выбираете вариант **Рабочая группа**, бизнес-подразделение по умолчанию будет отображаться в поле **Связанный филиал**.

    <!--Need to verify the details in this table, are these specific to Sales maybe?  IK: No they are not and no longer relevant 
    Enter the following advanced settings.-->

    <!-- |Field|Description|
    |-----|-----|
    |**[!INCLUDE[prod_short](includes/prod_short.md)] Users Must Map to CDS Users**|If you're using the Person ownership model, specify whether [!INCLUDE[prod_short](includes/prod_short.md)] user accounts must have a matching user accounts in [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. The **Microsoft 365 Authentication Email** of the [!INCLUDE[prod_short](includes/prod_short.md)] user must be the same as the **Primary Email** of the [!INCLUDE[crm_md](includes/crm_md.md)] user.<br /><br /> If you set the value to **Yes**, [!INCLUDE[prod_short](includes/prod_short.md)] users who don't have a matching [!INCLUDE[crm_md](includes/crm_md.md)] user account won't have [!INCLUDE[prod_short](includes/prod_short.md)] integration capabilities in the user interface. Access to [!INCLUDE[crm_md](includes/crm_md.md)] data directly from [!INCLUDE[prod_short](includes/prod_short.md)] is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] user account.<br /><br /> If you set the value to **No**, all [!INCLUDE[prod_short](includes/prod_short.md)] users will have [!INCLUDE[crm_md](includes/crm_md.md)] integration capabilities in the user interface. Access to [!INCLUDE[crm_md](includes/crm_md.md)] data is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] connection (integration) user.|
    |**Current Business Central Salesperson is Mapped to a User**|Indicates whether your user account is mapped to an account in [!INCLUDE[crm_md](includes/crm_md.md)] double check the name of this field|-->
4. Для тестирования настроек подключения выберите **Подключение**, затем **Проверить подключение**.  

    > [!NOTE]  
    > Если шифрование данных не включено в [!INCLUDE[prod_short](includes/prod_short.md)], вы получите запрос, требуется ли его включить. Чтобы включить шифрование данных, выберите **Да** и предоставьте требуемую информацию. В противном случае выберите **Нет**. Шифрование данных можно включить позднее. Дополнительные сведения см. в разделе [Шифрование данных в Dynamics 365 Business Central](/dynamics365/business-central/dev-itpro/developer/devenv-encrypting-data) в справке для разработчика и администратора.  
5. Если синхронизация [!INCLUDE[cds_long_md](includes/cds_long_md.md)] еще не настроена, вы получите запрос, следует ли использовать настройки синхронизации по умолчанию. В зависимости от того, требуется ли соответствие записей в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] и [!INCLUDE[prod_short](includes/prod_short.md)], выберите **Да** или **Нет**.

<!--
## Show Me the Process

The following video shows the steps to connect [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. <br>
  
> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4ArlP]

-->

## Настройка связывания на основе совпадений

Начиная с волны 2 выпуска 2021 года администратор может вводить критерии, чтобы объединять записи на соответствий. Алгоритм сопоставления записей можно запустить из следующих мест в [!INCLUDE [prod_short](includes/prod_short.md)]:

* Список страниц, отображающих записи, синхронизированные с [!INCLUDE [cds_long_md](includes/cds_long_md.md)], например страницы "Клиенты" и "Товары".  

    Выберите несколько записей, а затем выберите действие **Связано**, выберите **Dataverse**, выберите **Связывание**, а затем выберите **Связывание на основе совпадений**.

    Когда процесс связывания на основе совпадений запускается из списка основных данных, задание связывания будет запланировано сразу после выбора критериев связывания.  
* Страница **Просмотр полной синхронизации Dataverse**.  

    Когда процесс полной синхронизации обнаруживает, что у вас есть несвязанные записи, как в [!INCLUDE [prod_short](includes/prod_short.md)], так и в [!INCLUDE [cds_long_md](includes/cds_long_md.md)], ссылка **Выбрать критерии связывания** появляется для таблицы интеграции.  

    Вы можете начать процесс **Запустить полную синхронизацию** на страницах **Настройка подключения Dataverse** и **Настройка подключения Dynamics 365**. Вы также можете запустить его в мастере настройки **Настроить подключение к Dataverse** после завершения настройки.  

    Когда процесс связывания на основе совпадений запускается со страницы **Просмотр полной синхронизации Dataverse**, задание связывания будет запланировано сразу после завершения настройки.  
* Список **Сопоставления таблиц интеграции**.  

    Выберите сопоставление, выберите действие **Связывание**, а затем выберите **Связывание на основе совпадений**.

    Когда процесс связывания на основе совпадений запускается из отображения таблицы интеграции, задание связывания запускается для всех несвязанных записей в этом сопоставлении. Вы также можете выбрать несвязанные записи в списке, чтобы выполнить задание только для этих записей.

Во всех трех случаях откроется страница **Выберите критерии связывание**, на которой вы можете определить соответствующие критерии связывания. На этой странице настройте связывание, выполнив следующие задачи:

* Выберите поля для сопоставления записей [!INCLUDE [prod_short](includes/prod_short.md)] с сущностями [!INCLUDE [cds_long_md](includes/cds_long_md.md)]. Вы можете указать, будет ли совпадение учитывать регистр.  

* Укажите, следует ли синхронизировать после соединения записей. Если в записях используется двунаправленное сопоставление, вы также можете указать, что произойдет, если конфликты будут перечислены в списке на странице **Разрешение конфликтов обновлений**.  

* Установите приоритет порядка, в котором выполняется поиск записей, указав *приоритет сопоставления* для соответствующих полей сопоставления. [!INCLUDE [prod_short](includes/prod_short.md)] будет искать совпадение в порядке возрастания на основе значения в поле **Приоритет соответствия**. Пустое значение в поле **Приоритет соответствия** равно приоритету 0, что является наивысшим приоритетом. Поля с приоритетом 0 считаются первыми.  

* Укажите, следует ли создавать новый экземпляр объекта в [!INCLUDE [cds_long_md](includes/cds_long_md.md)] в случае, если невозможно найти уникальное несвязанное сопоставление с использованием критериев сопоставления. Чтобы активировать эту возможность, выберите действие **Создать новую, если найти совпадение не удается**.  

### Посмотреть результаты задания соединения

Чтобы просмотреть результаты задания соединения, откройте страницу **Сопоставления таблиц интеграции**, выберите соответствующее сопоставление, выберите действие **Связывание**, а затем выберите действие **Журнал заданий связывания интеграции**.  

Если записи не удалось соединить, вы можете выбрать значение в столбце **Ошибка**, чтобы открыть список ошибок, описывающих, почему это произошло.  

Как правило, связывание выходит из строя по следующим причинам:

* Критерии соответствия не определены

    Запустите связывание на основе совпадений, но не забудьте определить критерии связывания.

* Не найдено совпадений для полей, указанных в критериях соответствия

    Повторите связывание, используя разные поля.

* Для нескольких записей найдено несколько совпадений на основе полей, указанных в критериях соответствия  

    Повторите связывание, используя разные поля.

* Обнаружено совпадение, но соответствующая запись уже связана с другой записью в [!INCLUDE [prod_short](includes/prod_short.md)]  

    Повторите связывание, используя разные поля, или узнайте, почему эта сущность [!INCLUDE [cds_long_md](includes/cds_long_md.md)] связана с записью в [!INCLUDE [prod_short](includes/prod_short.md)].

> [!TIP]
> Чтобы дать обзор хода связывания, в поле **Связано с Dataverse** показано, связана ли конкретная запись с объектом [!INCLUDE [cds_long_md](includes/cds_long_md.md)]. Вы можете использовать поле **Связано с Dataverse** для фильтрации списка записей, которые вы синхронизируете.

## Обновление подключений к Business Central Online для использования аутентификации на основе сертификатов

> [!NOTE]
> Этот раздел актуален только для клиентов [!INCLUDE[prod_short](includes/prod_short.md)] Online, размещенных на сервере Microsoft. Онлайн-клиенты, размещенные у независимых поставщиков программного обеспечения, и локальные установки не затронуты.

В апреле 2022 г. в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] отменена поддержка типа проверки подлинности Office365 (имя пользователя/пароль). Для получения дополнительной информации см. [Прекращение поддержки типа проверки подлинности Office365](/power-platform/important-changes-coming#deprecation-of-office365-authentication-type-and-organizationserviceproxy-class-for-connecting-to-dataverse). Кроме того, в марте 2022 г. [!INCLUDE[prod_short](includes/prod_short.md)] не рекомендует использование проверки подлинности между службами на основе секрета клиента для онлайн-клиентов. Для подключений к [!INCLUDE[cds_long_md](includes/cds_long_md.md)] следует использовать аутентификацию между службы с сертификатами. Клиенты [!INCLUDE[prod_short](includes/prod_short.md)] Online, размещенные независимыми поставщиками программного обеспечения, и локальные установки могут продолжать использовать секреты клиента для аутентификации.

Чтобы не нарушать интеграцию, _вы должны обновить_ подключение для использования проверки подлинности на основе сертификатов. Хотя изменение запланировано на март 2022 года, мы настоятельно рекомендуем выполнить обновление как можно скорее. Следующие шаги описывают, как перейти на аутентификацию на основе сертификатов. 

### Обновление подключения Business Central Online для использования аутентификации на основе сертификатов

1. В зависимости от того, интегрируете ли вы с Dynamics 365 Sales, выполните одно из следующих действий:
   * Если да, откройте страницу **Настройка подключения Microsoft Dynamics 365**.
   * Если нет, откройте страницу **Настройка подключения Dataverse**.
2. Выберите **Подключение**, а потом **Использовать проверку подлинности на основе сертификатов** для обновления подключения для использования проверки подлинности на основе сертификата.
3. Войдите в систему с учетными данными администратора для Dataverse. Вход в систему должен занять меньше минуты.

> [!NOTE]
> Вы должны повторять эти шаги в каждой среде [!INCLUDE[prod_short](includes/prod_short.md)], включая рабочую среду и среду песочницы, и в каждой компании, в которой у вас есть подключение к [!INCLUDE[cds_long_md](includes/cds_long_md.md)].

## Подключение локальных версий

Чтобы подключить локальную версию [!INCLUDE[prod_short](includes/prod_short.md)] [!INCLUDE[cds_long_md](includes/cds_long_md.md)], необходимо указать некоторую информацию на странице **Настройка подключения Dataverse**.

Для подключения с использованием учетной записи Microsoft Entra необходимо зарегистрировать приложение в Microsoft Entra ID. Вам нужно будет указать идентификатор приложения, секрет хранилища ключей и URL-адрес перенаправления для использования. URL-адрес перенаправления предварительно заполнен и должен работать для большинства установок. Вы должны настроить вашу установку на использование HTTPS. Для получения дополнительной информации см. [Настройка SSL для защиты подключения веб-клиента Business Central](/dynamics365/business-central/dev-itpro/deployment/configure-ssl-web-client-connection). Если вы настраиваете на своем сервере другую начальную страницу, вы можете изменить URL-адрес. Секрет клиента будет сохранен как зашифрованная строка в вашей базе данных. 

### Регистрация приложения в Microsoft Entra ID для подключения из Business Central к Dataverse

Следующие шаги предполагают, что вы используете Microsoft Entra ID для управления удостоверениями и доступом. Дополнительные сведения о регистрации приложения в Microsoft Entra ID см. в статье [Краткое руководство. Регистрация приложения с помощью платформы удостоверений Майкрософт](/azure/active-directory/develop/quickstart-register-app). 

1. В Azure Portal, в **управлять** на панели навигации выберите **Аутентификация**.  
2. В **URL-адреса перенаправления** добавьте URL-адрес перенаправления, который предлагается на страница **Настройка подключения Dataverse** в [!INCLUDE[prod_short](includes/prod_short.md)].
3. В **управлять** выберите **Разрешения API**.
4. В **Настроенные разрешения** выберите **Добавить разрешение** и затем добавьте делегированные разрешения на вкладке **API-интерфейсы Microsoft** следующим образом:
    * Для Business Central добавьте разрешения **Financials.ReadWrite.All**.
    * Для Dynamics CRM, добавить разрешения **user_impersonation**.  

    > [!NOTE]
    > Имя API Dynamics CRM может измениться.

5. В **управлять** выберите **Сертификаты и секреты**, а затем создайте новый секрет для вашего приложения. Вы будете использовать секрет либо в [!INCLUDE[prod_short](includes/prod_short.md)], в поле **Секрет клиента** на **Настройка подключения Dataverse** или сохраните в защищенном хранилище и предоставьте его подписчику события, как описано ранее в этом разделе.
6. Выберите **обзор**, а затем найдите значение **Код приложения (клиента)**. Этот код — код клиента вашего приложения. Вы должны ввести его либо на страница **Настройка подключения Dataverse** в **Код клиента**или сохраните его в безопасном хранилище и предоставьте его подписчику события.
7. В [!INCLUDE[prod_short](includes/prod_short.md)], на страница **Настройка подключения Dataverse**, в поле **URL-адрес среды** введите URL-адрес для вашей среды [!INCLUDE[cds_long_md](includes/cds_long_md.md)].
8. Чтобы включить подключение к [!INCLUDE[cds_long_md](includes/cds_long_md.md)] включите переключатель **Включено**.
9. Войдите в систему с учетной записью администратора для Microsoft Entra ID (эта учетная запись должна иметь действующую лицензию на [!INCLUDE[cds_long_md](includes/cds_long_md.md)] и быть администратором в вашей среде [!INCLUDE[cds_long_md](includes/cds_long_md.md)]). После входа в систему вам будет предложено разрешить зарегистрированному приложению войти в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] от имени организации. Вы должны дать согласие на завершение установки.

   > [!NOTE]
   > Если вам не предлагается войти в систему с учетной записью администратора, возможно, это связано с блокировкой всплывающих окон. Чтобы войти, разрешите всплывающие окна от `https://login.microsoftonline.com`.

### Отключение от [!INCLUDE[cds_long_md](includes/cds_long_md.md)]

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Настройка подключения Dataverse**, а затем выберите связанную ссылку.
2. На странице **Настройка подключения Dataverse** выключите переключатель **Включено**.  

## См. также

[Просмотр статуса синхронизации](admin-how-to-view-synchronization-status.md)  

[!INCLUDE[footer-include](includes/footer-banner.md)]
