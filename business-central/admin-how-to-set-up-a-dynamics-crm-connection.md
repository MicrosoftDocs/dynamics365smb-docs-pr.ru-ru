---
title: Подключение к Microsoft Dataverse
description: Вы можете интегрировать другие приложения с Business Central через Microsoft Dataverse. В этой статье представлены советы и рекомендации по настройке подключений.
author: bholtorf
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 04/26/2021
ms.author: bholtorf
ms.openlocfilehash: 00034e8f1be2f88074fb33b53a1c048f81f69ede
ms.sourcegitcommit: 57e8ab70d70849752567eecf29529efe2dcdf3af
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2021
ms.locfileid: "5941667"
---
# <a name="connect-to-microsoft-dataverse"></a><span data-ttu-id="6007a-104">Подключение к Microsoft Dataverse</span><span class="sxs-lookup"><span data-stu-id="6007a-104">Connect to Microsoft Dataverse</span></span>

[!INCLUDE[prod_short](includes/cc_data_platform_banner.md)]

<span data-ttu-id="6007a-105">В этом разделе описывается, как установить соединение между [!INCLUDE[prod_short](includes/prod_short.md)] и [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-105">This topic describes how to set up a connection between [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="6007a-106">Как правило, предприятия создают соединение для интеграции и синхронизации данных с другим бизнес-приложением Dynamics 365, например [!INCLUDE[crm_md](includes/crm_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-106">Typically, businesses create the connection to integrate and synchronize data with another Dynamics 365 business app, such as [!INCLUDE[crm_md](includes/crm_md.md)].</span></span>  

## <a name="before-you-start"></a><span data-ttu-id="6007a-107">Перед началом работы</span><span class="sxs-lookup"><span data-stu-id="6007a-107">Before You Start</span></span>

<span data-ttu-id="6007a-108">Перед тем, как создать соединение, необходимо подготовить несколько фрагментов информации:</span><span class="sxs-lookup"><span data-stu-id="6007a-108">There are a few pieces of information to have ready before you create the connection:</span></span>  

* <span data-ttu-id="6007a-109">URL-адрес для среды [!INCLUDE[cds_long_md](includes/cds_long_md.md)], к которой требуется подключиться.</span><span class="sxs-lookup"><span data-stu-id="6007a-109">The URL for the [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment that you want to connect to.</span></span> <span data-ttu-id="6007a-110">Если вы используете мастер настройки **Настройка подключения Dataverse**, чтобы создать соединение, мы обнаружим ваши среды, но вы также можете ввести URL-адрес другой среды в своем клиенте.</span><span class="sxs-lookup"><span data-stu-id="6007a-110">If you use the **Dataverse Connection Setup** assisted setup guide to create the connection we will discover your environments, but you can also enter the URL of another environment in your tenant.</span></span>  
* <span data-ttu-id="6007a-111">Имя пользователя и пароль учетной записи, которая имеет разрешения администратора в [!INCLUDE[prod_short](includes/prod_short.md)] и [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-111">The user name and password of an account that has administrator permissions in [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
* <span data-ttu-id="6007a-112">Если у вас есть локальная версия [!INCLUDE[prod_short](includes/prod_short.md)] выпуска 2020, волна 1, версия 16.5, ознакомьтесь со статьей [Некоторые известные проблемы](/dynamics365/business-central/dev-itpro/upgrade/known-issues#wrong-net-assemblies-for-external-connected-services).</span><span class="sxs-lookup"><span data-stu-id="6007a-112">If you have an on-premises [!INCLUDE[prod_short](includes/prod_short.md)] 2020 release wave 1, version 16.5, read the [Some Known Issues](/dynamics365/business-central/dev-itpro/upgrade/known-issues#wrong-net-assemblies-for-external-connected-services) article.</span></span> <span data-ttu-id="6007a-113">Вам нужно будет выполнить описанный обходной метод, прежде чем вы сможете создать подключение к [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-113">You'll have to complete the described workaround before you can create your connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>
* <span data-ttu-id="6007a-114">Местная валюта компании в [!INCLUDE[prod_short](includes/prod_short.md)] должна быть такой же, как и базовая валюта транзакции в [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-114">The local currency for the company in [!INCLUDE[prod_short](includes/prod_short.md)] must be the same as the base transaction currency in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="6007a-115">После того, как базовая транзакция установлена в [!INCLUDE[cds_long_md](includes/cds_long_md.md)], это не может быть изменено.</span><span class="sxs-lookup"><span data-stu-id="6007a-115">After a base transaction is set in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] it cannot be changed.</span></span> <span data-ttu-id="6007a-116">Для получения дополнительной информации см. [Сущность валюты транзакции (валюта)](/powerapps/developer/data-platform/transaction-currency-currency-entity).</span><span class="sxs-lookup"><span data-stu-id="6007a-116">For more information, see [Transaction Currency (currency) entity](/powerapps/developer/data-platform/transaction-currency-currency-entity).</span></span> <span data-ttu-id="6007a-117">Это означает, что у всех компаний [!INCLUDE[prod_short](includes/prod_short.md)], которые вы подключаете к организации [!INCLUDE[cds_long_md](includes/cds_long_md.md)], должна использоваться та же валюта.</span><span class="sxs-lookup"><span data-stu-id="6007a-117">This means that all [!INCLUDE[prod_short](includes/prod_short.md)] companies you connect to a [!INCLUDE[cds_long_md](includes/cds_long_md.md)] organization must use the same currency.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6007a-118">Ваша среда [!INCLUDE[cds_long_md](includes/cds_long_md.md)] не должна находиться в режиме администрирования.</span><span class="sxs-lookup"><span data-stu-id="6007a-118">Your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment must not be in Administration mode.</span></span> <span data-ttu-id="6007a-119">Режим администрирования приведет к сбою подключения, поскольку у учетной записи пользователя интеграции для подключения нет прав администратора.</span><span class="sxs-lookup"><span data-stu-id="6007a-119">Administration mode will cause the connection to fail because the integration user account for the connection does not have administrator permissions.</span></span> <span data-ttu-id="6007a-120">Дополнительные сведения см. в разделе [Режим администрирования](/power-platform/admin/admin-mode).</span><span class="sxs-lookup"><span data-stu-id="6007a-120">For more information, see [Administration mode](/power-platform/admin/admin-mode).</span></span>

> [!Note]
> <span data-ttu-id="6007a-121">Эти шаги описывают процедуру для [!INCLUDE[prod_short](includes/prod_short.md)] Online.</span><span class="sxs-lookup"><span data-stu-id="6007a-121">These steps describe the procedure for [!INCLUDE[prod_short](includes/prod_short.md)] online.</span></span>
> <span data-ttu-id="6007a-122">Если вы используете локальную версию [!INCLUDE[prod_short](includes/prod_short.md)] и не используете учетную запись Azure Active Directory для подключения [!INCLUDE [cds_long_md](includes/cds_long_md.md)], вы также должны указать имя пользователя и пароль учетной записи пользователя для интеграции.</span><span class="sxs-lookup"><span data-stu-id="6007a-122">If you are using [!INCLUDE[prod_short](includes/prod_short.md)] on-premises and are not using Azure Active Directory account to connect to [!INCLUDE [cds_long_md](includes/cds_long_md.md)], you must also specify a user name and password of a user account for the integration.</span></span> <span data-ttu-id="6007a-123">Эта учетная запись называется учетной записью "пользователя интеграции".</span><span class="sxs-lookup"><span data-stu-id="6007a-123">This account is referred to as the "integration user" account.</span></span> <span data-ttu-id="6007a-124">Если вы используете учетная запись Azure Active Directory интеграция учетной записи пользователя не требуется или не отображается.</span><span class="sxs-lookup"><span data-stu-id="6007a-124">If you are using an Azure Active Directory account the integration user account is not required or displayed.</span></span> <span data-ttu-id="6007a-125">Пользователь интеграции будет настроен автоматически и не потребует лицензии.</span><span class="sxs-lookup"><span data-stu-id="6007a-125">The integration user will be set up automatically and does not require a license.</span></span>

## <a name="set-up-a-connection-to-cds_long_md"></a><span data-ttu-id="6007a-126">Настройка подключения к [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span><span class="sxs-lookup"><span data-stu-id="6007a-126">Set Up a Connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span></span>

<span data-ttu-id="6007a-127">Для всех типов проверки подлинности, отличных от проверки подлинности Microsoft 365, вы настраиваете подключение к [!INCLUDE[cds_long_md](includes/cds_long_md.md)] на странице **Настройка подключения Dataverse**.</span><span class="sxs-lookup"><span data-stu-id="6007a-127">For all authentication types other than Microsoft 365 authentication, you set up your connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on the **Dataverse Connection Setup** page.</span></span> <span data-ttu-id="6007a-128">Для аутентификации Microsoft 365 рекомендуется использовать мастер настройки **Настройка подключения Dataverse**.</span><span class="sxs-lookup"><span data-stu-id="6007a-128">For Microsoft 365 authentication, we recommend that you use the **Dataverse Connection Setup** assisted setup guide.</span></span> <span data-ttu-id="6007a-129">Этот мастер позволяет проще настроить подключение и указать расширенные функции, такие как модель ответственности и начальной синхронизации.</span><span class="sxs-lookup"><span data-stu-id="6007a-129">The guide makes it easier to set up the connection and specify advanced features, such as the ownership model and initial synchronization.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="6007a-130">Во время настройки подключения к [!INCLUDE[cds_long_md](includes/cds_long_md.md)] администратору будет предложено предоставить следующие разрешения зарегистрированному приложению Azure с именем "Интеграция [!INCLUDE[prod_short](includes/prod_short.md)]" в [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:</span><span class="sxs-lookup"><span data-stu-id="6007a-130">During the setup of the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], the administrator will be asked to give following permissions to a registered Azure application named [!INCLUDE[prod_short](includes/prod_short.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:</span></span>
>
> * <span data-ttu-id="6007a-131">Требуется разрешение **доступ [!INCLUDE[cds_long_md](includes/cds_long_md.md)] как вы**, поэтому [!INCLUDE[prod_short](includes/prod_short.md)] может от имени администратора автоматически создавать нелицензионные неинтерактивные пользователи приложения интеграции [!INCLUDE[prod_short](includes/prod_short.md)], назначьте роли безопасности этому пользователю и разверните решение для интеграции [!INCLUDE[prod_short](includes/prod_short.md)] для [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-131">**Access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] as you** permission is needed so [!INCLUDE[prod_short](includes/prod_short.md)] can, on behalf of administrator, automatically create non-licensed non-interactive [!INCLUDE[prod_short](includes/prod_short.md)] Integration application user, assign security roles to this user and to deploy [!INCLUDE[prod_short](includes/prod_short.md)] Integration Solution to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="6007a-132">Это разрешение используется только один раз при настройке подключения к [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-132">This permission is used only once during set up of connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
> * <span data-ttu-id="6007a-133">Требуется разрешение **Полный доступ к Dynamics 365[!INCLUDE[prod_short](includes/prod_short.md)]**, поэтому автоматически создаваемый пользователь приложения интеграции [!INCLUDE[prod_short](includes/prod_short.md)] может получить доступ к данные [!INCLUDE[prod_short](includes/prod_short.md)], которые будут синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="6007a-133">**Have full access to Dynamics 365 [!INCLUDE[prod_short](includes/prod_short.md)]** permission is needed so automatically created [!INCLUDE[prod_short](includes/prod_short.md)] Integration application user can access [!INCLUDE[prod_short](includes/prod_short.md)] data that will be synchronized.</span></span>  
> * <span data-ttu-id="6007a-134">Требуется разрешение **войдите и прочтите свой профиль**, чтобы убедиться, что пользователь, входящий в систему, на самом деле имеет роль администратора системы, назначенную в [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-134">**Sign in and read your profile** permission is needed to verify user logging in actually has System Administrator security role assigned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
>
> <span data-ttu-id="6007a-135">Предоставляя согласие от имени организации, администратор дает право зарегистрированному приложению Azure, которое называется Интеграция [!INCLUDE[prod_short](includes/prod_short.md)] в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] синхронизировать данные, используя автоматически созданные учетные данные пользователя приложения интеграции [!INCLUDE[prod_short](includes/prod_short.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-135">By giving consent on behalf of organization, the administrator is entitling the registered Azure application called [!INCLUDE[prod_short](includes/prod_short.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to synchronize data using automatically created [!INCLUDE[prod_short](includes/prod_short.md)] Integration application user's credentials.</span></span>

### <a name="to-use-the-dataverse-connection-setup-assisted-setup-guide"></a><span data-ttu-id="6007a-136">Использование мастера настройки подключения Dataverse</span><span class="sxs-lookup"><span data-stu-id="6007a-136">To use the Dataverse Connection Setup assisted setup guide</span></span>
<span data-ttu-id="6007a-137">Руководство по настройке подключения Dataverse может упростить подключение приложений и даже помочь вам выполнить первоначальную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="6007a-137">The Dataverse Connection Setup guide can make it easier to connect the applications, and can even help you run an initial synchronization.</span></span> <span data-ttu-id="6007a-138">Если вы выберете запуск начальной синхронизации, [!INCLUDE[prod_short](includes/prod_short.md)] проверит данные в обоих приложениях и предоставит рекомендации по подходу к начальной синхронизации.</span><span class="sxs-lookup"><span data-stu-id="6007a-138">If you choose to run initial synchronization, [!INCLUDE[prod_short](includes/prod_short.md)] will review the data in both applications and provide recommendations for how to approach initial synchronization.</span></span> <span data-ttu-id="6007a-139">В следующей таблице описаны эти рекомендации.</span><span class="sxs-lookup"><span data-stu-id="6007a-139">The following table describes the recommendations.</span></span>

|<span data-ttu-id="6007a-140">Рекомендация</span><span class="sxs-lookup"><span data-stu-id="6007a-140">Recommendation</span></span>  |<span data-ttu-id="6007a-141">Описание</span><span class="sxs-lookup"><span data-stu-id="6007a-141">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="6007a-142">**Полная синхронизация**</span><span class="sxs-lookup"><span data-stu-id="6007a-142">**Full synchronization**</span></span>|<span data-ttu-id="6007a-143">Данные существуют только в [!INCLUDE[prod_short](includes/prod_short.md)] или только в [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-143">Data exists only in [!INCLUDE[prod_short](includes/prod_short.md)], or only in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="6007a-144">Рекомендация: синхронизировать все данные из службы, в которой они есть, с другой службой.</span><span class="sxs-lookup"><span data-stu-id="6007a-144">The recommendation is to synchronize all data from the service that has it to the other service.</span></span>|
|<span data-ttu-id="6007a-145">**Без синхронизации**</span><span class="sxs-lookup"><span data-stu-id="6007a-145">**No synchronization**</span></span>|<span data-ttu-id="6007a-146">Данные существуют в обоих приложениях, и выполнение полной синхронизации приведет к их дублированию.</span><span class="sxs-lookup"><span data-stu-id="6007a-146">Data exists in both applications, and running full synchronization would duplicate the data.</span></span> <span data-ttu-id="6007a-147">Рекомендуется связать записи.</span><span class="sxs-lookup"><span data-stu-id="6007a-147">The recommendation is to couple records.</span></span>|
|<span data-ttu-id="6007a-148">**Зависимость не удовлетворена**</span><span class="sxs-lookup"><span data-stu-id="6007a-148">**Dependency not satisfied**</span></span>|<span data-ttu-id="6007a-149">Данные существуют в обоих приложениях, но строка или таблица не могут быть синхронизированы, потому что она зависит от строки или таблицы, для которых есть рекомендация "Без синхронизации".</span><span class="sxs-lookup"><span data-stu-id="6007a-149">Data exists in both applications, but the row or table cannot be synchronized because it depends on a row or table that has the No synchronization recommendation.</span></span> <span data-ttu-id="6007a-150">Например, если клиенты не могут быть синхронизированы, то данные для контактов, которые зависят от данных клиентов, также не могут быть синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="6007a-150">For example, if customers cannot be synchronized, then data for contacts that depends on the customer data cannot be synchronized either.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="6007a-151">Обычно вы используете полную синхронизацию только тогда, когда интегрируете приложения впервые, и только одно приложение содержит данные.</span><span class="sxs-lookup"><span data-stu-id="6007a-151">Typically, you only use full synchronization when you're integrating the applications for the first time, and only one application contains data.</span></span> <span data-ttu-id="6007a-152">Полная синхронизация может быть полезна в демонстрационной среде, поскольку она автоматически создает и связывает записи в каждом приложении, что ускоряет начало работы с синхронизированными данными.</span><span class="sxs-lookup"><span data-stu-id="6007a-152">Full synchronization can be useful in a demonstration environment because it automatically creates and couples records in each application, which makes it faster to start working with synchronized data.</span></span> <span data-ttu-id="6007a-153">Однако вам следует запускать полную синхронизацию только в том случае, если вам нужна одна строка в [!INCLUDE[prod_short](includes/prod_short.md)] для каждой строки в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] для сопоставления таблиц.</span><span class="sxs-lookup"><span data-stu-id="6007a-153">However, you should only run full synchronization if you want one row in [!INCLUDE[prod_short](includes/prod_short.md)] for each row in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] for the table mappings.</span></span> <span data-ttu-id="6007a-154">В противном случае результатом могут быть повторяющиеся записи.</span><span class="sxs-lookup"><span data-stu-id="6007a-154">Otherwise, the result can be duplicate records.</span></span>

1. <span data-ttu-id="6007a-155">Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Мастер настройки**, затем выберите соответствующую ссылку.</span><span class="sxs-lookup"><span data-stu-id="6007a-155">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Assisted Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="6007a-156">Выберите пункт **Настройка подключения к Microsoft Dataverse**, чтобы запустить мастер настройки.</span><span class="sxs-lookup"><span data-stu-id="6007a-156">Choose **Set up a connection to Microsoft Dataverse** to start the assisted setup guide.</span></span>
3. <span data-ttu-id="6007a-157">Заполните соответствующим образом поля.</span><span class="sxs-lookup"><span data-stu-id="6007a-157">Fill in the fields as necessary.</span></span>

> [!NOTE]
> <span data-ttu-id="6007a-158">Если вам не предлагается войти в систему с учетной записью администратора, возможно, это связано с блокировкой всплывающих окон.</span><span class="sxs-lookup"><span data-stu-id="6007a-158">If you are not prompted to sign in with your administrator account, it is probably because pop-ups are blocked.</span></span> <span data-ttu-id="6007a-159">Чтобы войти, разрешите всплывающие окна от `https://login.microsoftonline.com`.</span><span class="sxs-lookup"><span data-stu-id="6007a-159">To sign in, allow pop-ups from `https://login.microsoftonline.com`.</span></span>

### <a name="to-create-or-maintain-the-connection-manually"></a><span data-ttu-id="6007a-160">Создание или ведение подключения вручную</span><span class="sxs-lookup"><span data-stu-id="6007a-160">To create or maintain the connection manually</span></span>

<span data-ttu-id="6007a-161">Далее описан порядок настройки подключения вручную на странице **Настройка подключения Dataverse**.</span><span class="sxs-lookup"><span data-stu-id="6007a-161">The following procedure describes how to set up the connection manually on the **Dataverse Connection Setup** page.</span></span> <span data-ttu-id="6007a-162">Это также страница, на которой можно управлять настройками для интеграции.</span><span class="sxs-lookup"><span data-stu-id="6007a-162">This is also the page where you manage settings for the integration.</span></span>

1. <span data-ttu-id="6007a-163">Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Настройка подключения к Dataverse**, затем выберите соответствующую ссылку.</span><span class="sxs-lookup"><span data-stu-id="6007a-163">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Dataverse Connection Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="6007a-164">Введите следующие сведения для подключения из [!INCLUDE[cds_long_md](includes/cds_long_md.md)] к [!INCLUDE[prod_short](includes/prod_short.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-164">Enter the following information for the connection from [!INCLUDE[prod_short](includes/prod_short.md)] to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>

    |<span data-ttu-id="6007a-165">Поле</span><span class="sxs-lookup"><span data-stu-id="6007a-165">Field</span></span>|<span data-ttu-id="6007a-166">Описание</span><span class="sxs-lookup"><span data-stu-id="6007a-166">Description</span></span>|
    |-----|-----|
    |<span data-ttu-id="6007a-167">**URL-адрес среды**</span><span class="sxs-lookup"><span data-stu-id="6007a-167">**Environment URL**</span></span>|<span data-ttu-id="6007a-168">Если вы владеете средами в [!INCLUDE[cds_long_md](includes/cds_long_md.md)], мы найдем их для вас, когда вы запустите мастер настройки.</span><span class="sxs-lookup"><span data-stu-id="6007a-168">If you own environments in [!INCLUDE[cds_long_md](includes/cds_long_md.md)], we will find those for you when you run the setup guide.</span></span> <span data-ttu-id="6007a-169">Если вы хотите подключиться к другой среде в другом арендаторе, вы можете ввести учетные данные администратора для этой среды, и мы обнаружим их.</span><span class="sxs-lookup"><span data-stu-id="6007a-169">If you want to connect to a different environment in another tenant, you can enter the administrator credentials for the environment and we will discover those.</span></span> |
    |<span data-ttu-id="6007a-170">**Включено**</span><span class="sxs-lookup"><span data-stu-id="6007a-170">**Enabled**</span></span>|<span data-ttu-id="6007a-171">Начните использовать интеграцию.</span><span class="sxs-lookup"><span data-stu-id="6007a-171">Start using the integration.</span></span> <span data-ttu-id="6007a-172">Если выполнять подключение в данный момент не требуется, можно сохранить настройки подключения, однако пользователи не получат доступа к данным [!INCLUDE[cds_long_md](includes/cds_long_md.md)] из [!INCLUDE[prod_short](includes/prod_short.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-172">If you do not enable the connection now, the connection settings will be saved but users will not be able to access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] data from [!INCLUDE[prod_short](includes/prod_short.md)].</span></span> <span data-ttu-id="6007a-173">Позднее следует вернуться на эту страницу и выполнить подключение.</span><span class="sxs-lookup"><span data-stu-id="6007a-173">You can return to this page and enable the connection later.</span></span>  |

3. <span data-ttu-id="6007a-174">В поле **Модель ответственности** выберите, хотите ли вы, чтобы таблица рабочей группы в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] владела новыми записями, или чтобы ответственными были один или несколько конкретных пользователей.</span><span class="sxs-lookup"><span data-stu-id="6007a-174">In the **Ownership Model** field, choose whether you want a team table in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to own new records, or one or more specific users.</span></span> <span data-ttu-id="6007a-175">Если вы выбираете **Человек**, вы должны указать каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="6007a-175">If you choose **Person**, you must specify each user.</span></span> <span data-ttu-id="6007a-176">Если вы выбираете вариант **Рабочая группа**, бизнес-подразделение по умолчанию будет отображаться в поле **Связанный филиал**.</span><span class="sxs-lookup"><span data-stu-id="6007a-176">If you choose **Team**, the default business unit will display in the **Coupled Business Unit** field.</span></span>

    <!--Need to verify the details in this table, are these specific to Sales maybe?  IK: No they are not and no longer relevant 
    Enter the following advanced settings.-->

    <!-- |Field|Description|
    |-----|-----|
    |**[!INCLUDE[prod_short](includes/prod_short.md)] Users Must Map to CDS Users**|If you are using the Person ownership model, specify whether [!INCLUDE[prod_short](includes/prod_short.md)] user accounts must have a matching user accounts in [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. The **Microsoft 365 Authentication Email** of the [!INCLUDE[prod_short](includes/prod_short.md)] user must be the same as the **Primary Email** of the [!INCLUDE[crm_md](includes/crm_md.md)] user.<br /><br /> If you set the value to **Yes**, [!INCLUDE[prod_short](includes/prod_short.md)] users who do not have a matching [!INCLUDE[crm_md](includes/crm_md.md)] user account will not have [!INCLUDE[prod_short](includes/prod_short.md)] integration capabilities in the user interface. Access to [!INCLUDE[crm_md](includes/crm_md.md)] data directly from [!INCLUDE[prod_short](includes/prod_short.md)] is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] user account.<br /><br /> If you set the value to **No**, all [!INCLUDE[prod_short](includes/prod_short.md)] users will have [!INCLUDE[crm_md](includes/crm_md.md)] integration capabilities in the user interface. Access to [!INCLUDE[crm_md](includes/crm_md.md)] data is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] connection (integration) user.|
    |**Current Business Central Salesperson is Mapped to a User**|Indicates whether your user account is mapped to an account in [!INCLUDE[crm_md](includes/crm_md.md)] double check the name of this field-->|
4. <span data-ttu-id="6007a-177">Для тестирования настроек подключения выберите **Подключение**, затем **Проверить подключение**.</span><span class="sxs-lookup"><span data-stu-id="6007a-177">To test the connection settings, choose **Connection**, and then **Test Connection**.</span></span>  

    > [!NOTE]  
    > <span data-ttu-id="6007a-178">Если шифрование данных не включено в [!INCLUDE[prod_short](includes/prod_short.md)], вы получите запрос, требуется ли его включить.</span><span class="sxs-lookup"><span data-stu-id="6007a-178">If data encryption is not enabled in [!INCLUDE[prod_short](includes/prod_short.md)], you will be asked whether you want to enable it.</span></span> <span data-ttu-id="6007a-179">Чтобы включить шифрование данных, выберите **Да** и предоставьте требуемую информацию.</span><span class="sxs-lookup"><span data-stu-id="6007a-179">To enable data encryption, choose **Yes** and provide the required information.</span></span> <span data-ttu-id="6007a-180">В противном случае выберите **Нет**.</span><span class="sxs-lookup"><span data-stu-id="6007a-180">Otherwise, choose **No**.</span></span> <span data-ttu-id="6007a-181">Шифрование данных можно включить позднее.</span><span class="sxs-lookup"><span data-stu-id="6007a-181">You can enable data encryption later.</span></span> <span data-ttu-id="6007a-182">Дополнительные сведения см. в разделе [Шифрование данных в Dynamics 365 Business Central](/dynamics365/business-central/dev-itpro/developer/devenv-encrypting-data) в справке для разработчика и администратора.</span><span class="sxs-lookup"><span data-stu-id="6007a-182">For more information, see [Encrypting Data in Dynamics 365 Business Central](/dynamics365/business-central/dev-itpro/developer/devenv-encrypting-data) in the developer and administration help.</span></span>  
5. <span data-ttu-id="6007a-183">Если синхронизация [!INCLUDE[cds_long_md](includes/cds_long_md.md)] еще не настроена, вы получите запрос, следует ли использовать настройки синхронизации по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="6007a-183">If [!INCLUDE[cds_long_md](includes/cds_long_md.md)] synchronization is not already set up, you will be asked whether you want to use the default synchronization setup.</span></span> <span data-ttu-id="6007a-184">В зависимости от того, требуется ли соответствие записей в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] и [!INCLUDE[prod_short](includes/prod_short.md)], выберите **Да** или **Нет**.</span><span class="sxs-lookup"><span data-stu-id="6007a-184">Depending on whether you want to keep records aligned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and [!INCLUDE[prod_short](includes/prod_short.md)], choose **Yes** or **No**.</span></span>

<!--
## Show Me the Process

The following video shows the steps to connect [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. <br>
  
> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4ArlP]

-->

## <a name="connecting-on-premises-versions"></a><span data-ttu-id="6007a-185">Подключение локальных версий</span><span class="sxs-lookup"><span data-stu-id="6007a-185">Connecting On-Premises Versions</span></span>

<span data-ttu-id="6007a-186">Чтобы подключить локальную версию [!INCLUDE[prod_short](includes/prod_short.md)] [!INCLUDE[cds_long_md](includes/cds_long_md.md)], необходимо указать некоторую информацию на странице **Настройка подключения Dataverse**.</span><span class="sxs-lookup"><span data-stu-id="6007a-186">To connect [!INCLUDE[prod_short](includes/prod_short.md)] on-premises to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], you must specify some information on the **Dataverse Connection Setup** page.</span></span>

<span data-ttu-id="6007a-187">Если вы хотите подключиться с помощью учетной записи Azure Active Directory ( Azure AD), вы должны зарегистрировать заявку в Azure AD и укажите идентификатор приложения, секретный ключ хранилища и используемый URL-адрес перенаправления.</span><span class="sxs-lookup"><span data-stu-id="6007a-187">If you want to connect using an Azure Active Directory (Azure AD) account, you must register an application in Azure AD, and provide the application ID, key vault secret, and the redirect URL to use.</span></span> <span data-ttu-id="6007a-188">URL-адрес перенаправления предварительно заполнен и должен работать для большинства установок.</span><span class="sxs-lookup"><span data-stu-id="6007a-188">The redirect URL is pre-populated and should work for most installations.</span></span> <span data-ttu-id="6007a-189">Вы должны настроить вашу установку на использование HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6007a-189">You must set up your installation to use HTTPS.</span></span> <span data-ttu-id="6007a-190">Для получения дополнительной информации см. [Настройка SSL для защиты подключения веб-клиента Business Central](/dynamics365/business-central/dev-itpro/deployment/configure-ssl-web-client-connection).</span><span class="sxs-lookup"><span data-stu-id="6007a-190">For more information, see [Configuring SSL to Secure the Business Central Web Client Connection](/dynamics365/business-central/dev-itpro/deployment/configure-ssl-web-client-connection).</span></span> <span data-ttu-id="6007a-191">Если вы настраиваете на своем сервере другую начальную страницу, вы всегда можете изменить URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="6007a-191">If you are setting up your server to have a different home page, you can always change the URL.</span></span> <span data-ttu-id="6007a-192">Секрет клиента будет сохранен как зашифрованная строка в вашей базе данных.</span><span class="sxs-lookup"><span data-stu-id="6007a-192">The client secret will be saved as an encrypted string in your database.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="6007a-193">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="6007a-193">Prerequisites</span></span>

<span data-ttu-id="6007a-194">Dataverse должна использовать один из следующих типов аутентификации:</span><span class="sxs-lookup"><span data-stu-id="6007a-194">Dataverse must use one of the following authentication types:</span></span>

* <span data-ttu-id="6007a-195">Office365 (устаревшая версия)</span><span class="sxs-lookup"><span data-stu-id="6007a-195">Office365 (legacy)</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="6007a-196">С апреля 2022 года поддержка Office365 (устаревшая версия) будет прекращена.</span><span class="sxs-lookup"><span data-stu-id="6007a-196">Effective April 2022, Office365 (legacy) will no longer be supported.</span></span> <span data-ttu-id="6007a-197">Дополнительные сведения см. в разделе [Запланированные важные изменения (устаревания) в Power Apps, Power Automate и приложениях для взаимодействия с клиентами](/power-platform/important-changes-coming#deprecation-of-office365-authentication-type-and-organizationserviceproxy-class-for-connecting-to-dataverse).</span><span class="sxs-lookup"><span data-stu-id="6007a-197">For more information, see [Important changes (deprecations) coming in Power Apps, Power Automate and customer engagement apps](/power-platform/important-changes-coming#deprecation-of-office365-authentication-type-and-organizationserviceproxy-class-for-connecting-to-dataverse).</span></span>
* <span data-ttu-id="6007a-198">Office365 (современный, на основе секрета клиента OAuth2)</span><span class="sxs-lookup"><span data-stu-id="6007a-198">Office365 (modern, OAuth2 client secret based)</span></span>
* <span data-ttu-id="6007a-199">OAuth</span><span class="sxs-lookup"><span data-stu-id="6007a-199">OAuth</span></span>

### <a name="to-register-an-application-in-azure-ad-for-connecting-from-business-central-to-dataverse"></a><span data-ttu-id="6007a-200">Чтобы зарегистрировать заявку в Azure AD для подключения из Business Central к Dataverse</span><span class="sxs-lookup"><span data-stu-id="6007a-200">To register an application in Azure AD for connecting from Business Central to Dataverse</span></span>

<span data-ttu-id="6007a-201">Следующие шаги предполагают, что вы используете Azure AD, чтобы управлять удостоверениями и доступом.</span><span class="sxs-lookup"><span data-stu-id="6007a-201">The following steps assume that you use Azure AD to manage identities and access.</span></span> <span data-ttu-id="6007a-202">Дополнительные сведения о регистрации приложения в Azure AD, см. в [Быстрый старт: зарегистрируйте приложение на платформе идентификации Microsoft](/azure/active-directory/develop/quickstart-register-app).</span><span class="sxs-lookup"><span data-stu-id="6007a-202">For more information about registering an application in Azure AD, see [Quickstart: Register an application with the Microsoft identity platform](/azure/active-directory/develop/quickstart-register-app).</span></span> <span data-ttu-id="6007a-203">Если вы не используете Azure AD, см. [Использование другой службы управления удостоверениями и доступом](admin-how-to-set-up-a-dynamics-crm-connection.md#using-another-identity-and-access-management-service).</span><span class="sxs-lookup"><span data-stu-id="6007a-203">If you do not use Azure AD, see [Using Another Identity and Access Management Service](admin-how-to-set-up-a-dynamics-crm-connection.md#using-another-identity-and-access-management-service).</span></span>  

1. <span data-ttu-id="6007a-204">В Azure Portal, в **управлять** на панели навигации выберите **Аутентификация**.</span><span class="sxs-lookup"><span data-stu-id="6007a-204">In the Azure Portal, under **Manage** on the Navigation Pane, choose **Authentication**.</span></span>  
2. <span data-ttu-id="6007a-205">В **URL-адреса перенаправления** добавьте URL-адрес перенаправления, который предлагается на страница **Настройка подключения Dataverse** в [!INCLUDE[prod_short](includes/prod_short.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-205">Under **Redirect URLs**, add the redirect URL that is suggested on the **Dataverse Connection Setup** page in [!INCLUDE[prod_short](includes/prod_short.md)].</span></span>
3. <span data-ttu-id="6007a-206">В **управлять** выберите **Разрешения API**.</span><span class="sxs-lookup"><span data-stu-id="6007a-206">Under **Manage**, choose **API permissions**.</span></span>
4. <span data-ttu-id="6007a-207">В **Настроенные разрешения** выберите **Добавить разрешение** и затем добавьте делегированные разрешения на вкладке **API-интерфейсы Microsoft** следующим образом:</span><span class="sxs-lookup"><span data-stu-id="6007a-207">Under **Configured permissions**, choose **Add a permission**, and then add delegated permissions on the **Microsoft APIs** tab as follows:</span></span>
    * <span data-ttu-id="6007a-208">Для Business Central добавьте разрешения **Financials.ReadWrite.All**.</span><span class="sxs-lookup"><span data-stu-id="6007a-208">For Business Central, add the **Financials.ReadWrite.All** permissions.</span></span>
    * <span data-ttu-id="6007a-209">Для Dynamics CRM, добавить разрешения **user_impersonation**.</span><span class="sxs-lookup"><span data-stu-id="6007a-209">For Dynamics CRM, add the **user_impersonation** permissions.</span></span>  

    > [!NOTE]
    > <span data-ttu-id="6007a-210">Имя API Dynamics CRM может измениться.</span><span class="sxs-lookup"><span data-stu-id="6007a-210">The name of the Dynamics CRM API might change.</span></span>

5. <span data-ttu-id="6007a-211">В **управлять** выберите **Сертификаты и секреты**, а затем создайте новый секрет для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="6007a-211">Under **Manage**, choose **Certificates & Secrets**, and then create a new secret for your app.</span></span> <span data-ttu-id="6007a-212">Вы будете использовать секрет либо в [!INCLUDE[prod_short](includes/prod_short.md)], в поле **Секрет клиента** на **Настройка подключения Dataverse** или сохраните в защищенном хранилище и предоставьте его подписчику события, как описано ранее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="6007a-212">You will use the secret either in [!INCLUDE[prod_short](includes/prod_short.md)], in the **Client Secret** field on the **Dataverse Connection Setup** page, or store in a secure storage and provide it in an event subscriber as described earlier in this topic.</span></span>
6. <span data-ttu-id="6007a-213">Выберите **обзор**, а затем найдите значение **Код приложения (клиента)**.</span><span class="sxs-lookup"><span data-stu-id="6007a-213">Choose **Overview**, and then find the **Application (client) ID** value.</span></span> <span data-ttu-id="6007a-214">Это код клиента вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="6007a-214">This is the Client ID of your application.</span></span> <span data-ttu-id="6007a-215">Вы должны ввести его либо на страница **Настройка подключения Dataverse** в **Код клиента** или сохраните его в безопасном хранилище и предоставьте его подписчику события.</span><span class="sxs-lookup"><span data-stu-id="6007a-215">You must enter it either on the **Dataverse Connection Setup** page in the **Client ID** field, or store it in a secure storage and provide it in an event subscriber.</span></span>
7. <span data-ttu-id="6007a-216">В [!INCLUDE[prod_short](includes/prod_short.md)], на страница **Настройка подключения Dataverse**, в поле **URL-адрес среды** введите URL-адрес для вашей среды [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="6007a-216">In [!INCLUDE[prod_short](includes/prod_short.md)], on the **Dataverse Connection Setup** page, in the **Environment URL** field, enter the URL for your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment.</span></span>
8. <span data-ttu-id="6007a-217">Чтобы включить подключение к [!INCLUDE[cds_long_md](includes/cds_long_md.md)] включите переключатель **Включено**.</span><span class="sxs-lookup"><span data-stu-id="6007a-217">To enable the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], turn on the **Enabled** toggle.</span></span>
9. <span data-ttu-id="6007a-218">Войдите в систему с учетной записью администратора для Azure Active Directory (эта учетная запись должна иметь действующую лицензию для [!INCLUDE[cds_long_md](includes/cds_long_md.md)] и быть администратором в вашей среде [!INCLUDE[cds_long_md](includes/cds_long_md.md)]).</span><span class="sxs-lookup"><span data-stu-id="6007a-218">Sign in with your administrator account for Azure Active Directory (this account must have a valid license for [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and be an administrator in your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment).</span></span> <span data-ttu-id="6007a-219">После входа в систему вам будет предложено разрешить зарегистрированному приложению войти в [!INCLUDE[cds_long_md](includes/cds_long_md.md)] от имени организации.</span><span class="sxs-lookup"><span data-stu-id="6007a-219">After you sign in you will be prompted to allow your registered application to sign in to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on behalf of the organization.</span></span> <span data-ttu-id="6007a-220">Вы должны дать согласие на завершение установки.</span><span class="sxs-lookup"><span data-stu-id="6007a-220">You must give consent to complete the setup.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6007a-221">Если вам не предлагается войти в систему с учетной записью администратора, возможно, это связано с блокировкой всплывающих окон.</span><span class="sxs-lookup"><span data-stu-id="6007a-221">If you are not prompted to sign in with your administrator account, it is probably because pop ups are blocked.</span></span> <span data-ttu-id="6007a-222">Чтобы войти, разрешите всплывающие окна от `https://login.microsoftonline.com`.</span><span class="sxs-lookup"><span data-stu-id="6007a-222">To sign in, allow pop-ups from `https://login.microsoftonline.com`.</span></span>

#### <a name="using-another-identity-and-access-management-service"></a><span data-ttu-id="6007a-223">Использование другой службы управления удостоверениями и доступом</span><span class="sxs-lookup"><span data-stu-id="6007a-223">Using Another Identity and Access Management Service</span></span>

<span data-ttu-id="6007a-224">Если вы не используете Azure Active Directory для управления удостоверениями и доступом, вам потребуется помощь разработчика.</span><span class="sxs-lookup"><span data-stu-id="6007a-224">If you are not using Azure Active Directory to manage identities and access, you will need some help from a developer.</span></span> <span data-ttu-id="6007a-225">Если вы предпочитаете хранить код приложения и секрет в другом месте, вы можете оставить поля «Код клиента» и «Секрет клиента» пустыми и написать расширение для получения кода и секрета из местоположения.</span><span class="sxs-lookup"><span data-stu-id="6007a-225">If you prefer to store the app ID and secret in a different location, you can leave the Client ID and Client Secret fields blank and write an extension to fetch the ID and secret from the location.</span></span> <span data-ttu-id="6007a-226">Вы можете предоставить секрет во время выполнения, подписавшись на события `OnGetCDSConnectionClientId` и `OnGetCDSConnectionClientSecret` в codeunit 7201 `CDS Integration Impl.`.</span><span class="sxs-lookup"><span data-stu-id="6007a-226">You can provide the secret at runtime by subscribing to the `OnGetCDSConnectionClientId` and `OnGetCDSConnectionClientSecret` events in codeunit 7201 `CDS Integration Impl.`.</span></span>

### <a name="to-disconnect-from-cds_long_md"></a><span data-ttu-id="6007a-227">Отключение от [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span><span class="sxs-lookup"><span data-stu-id="6007a-227">To disconnect from [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span></span>

1. <span data-ttu-id="6007a-228">Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Настройка подключения к Dataverse**, затем выберите соответствующую ссылку.</span><span class="sxs-lookup"><span data-stu-id="6007a-228">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Dataverse Connection Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="6007a-229">На странице **Настройка подключения Dataverse** выключите переключатель **Включено**.</span><span class="sxs-lookup"><span data-stu-id="6007a-229">On the **Dataverse Connection Setup** page, turn off the **Enabled** toggle.</span></span>  

## <a name="see-also"></a><span data-ttu-id="6007a-230">См. также</span><span class="sxs-lookup"><span data-stu-id="6007a-230">See Also</span></span>

[<span data-ttu-id="6007a-231">Просмотр статуса синхронизации</span><span class="sxs-lookup"><span data-stu-id="6007a-231">View the Status of a Synchronization</span></span>](admin-how-to-view-synchronization-status.md)  

[!INCLUDE[footer-include](includes/footer-banner.md)]