---
title: Управление хранилищем путем удаления документов или сжатия данных
description: Узнайте, как сохранить исторические данные, сжав записи в бухгалтерской книге или удалив их.
author: edupont04
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.date: 10/01/2020
ms.author: edupont
ms.openlocfilehash: b17e4df039ef713bf5c0048d258aefd175157ba4
ms.sourcegitcommit: a9d48272ce61e5d512a30417412b5363e56abf30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "5493051"
---
# <a name="manage-storage-by-deleting-documents-or-compressing-data"></a><span data-ttu-id="e3611-103">Управление хранилищем путем удаления документов или сжатия данных</span><span class="sxs-lookup"><span data-stu-id="e3611-103">Manage Storage by Deleting Documents or Compressing Data</span></span>

<span data-ttu-id="e3611-104">Исполнителю главной роли, например администратору приложения, приходится постоянно иметь дело с накапливающимися архивными документами (удалять или сжимать их).</span><span class="sxs-lookup"><span data-stu-id="e3611-104">A central role, such as the application administrator, must regularly deal with accumulating historic documents by deleting or compressing them.</span></span>  

> [!TIP]
> <span data-ttu-id="e3611-105">Сведения о других способах уменьшения объема данных, хранящихся в базе данных, см. раздел [Сокращение объема данных, хранящихся в базах данных Business Central](/dynamics365/business-central/dev-itpro/administration/database-reduce-data) в справке для разработчиков и ИТ-специалистов.</span><span class="sxs-lookup"><span data-stu-id="e3611-105">For information about other ways to reduce the amount of data stored in a database, see [Reducing Data Stored in Business Central Databases](/dynamics365/business-central/dev-itpro/administration/database-reduce-data) in the Developer and IT pro help.</span></span>

## <a name="delete-documents"></a><span data-ttu-id="e3611-106">Удаление документов</span><span class="sxs-lookup"><span data-stu-id="e3611-106">Delete Documents</span></span>

<span data-ttu-id="e3611-107">В определенных ситуациях может возникнуть потребность в удалении заказов на покупку с уже выставленными счетами, которые ещё не были удалены.</span><span class="sxs-lookup"><span data-stu-id="e3611-107">In certain situations, you may need to delete invoiced purchase orders that have not been deleted.</span></span> <span data-ttu-id="e3611-108">В [!INCLUDE[prod_short](includes/prod_short.md)] выполняется проверка наличия для удаленных заказов на покупку полностью выставленных счетов.</span><span class="sxs-lookup"><span data-stu-id="e3611-108">[!INCLUDE[prod_short](includes/prod_short.md)] checks that you have fully invoiced the deleted purchase orders.</span></span> <span data-ttu-id="e3611-109">Невозможно удалить заказы, на которые не полностью выставлены счета и которые не полностью получены.</span><span class="sxs-lookup"><span data-stu-id="e3611-109">You cannot delete orders that you have not fully invoiced and received.</span></span>  

<span data-ttu-id="e3611-110">Возвраты обычно удаляются после выставления по ним счета.</span><span class="sxs-lookup"><span data-stu-id="e3611-110">Return orders are usually deleted after they are invoiced.</span></span> <span data-ttu-id="e3611-111">Когда счет учтен, он переносится на страницу **Учтенная кредит-нота покупки**.</span><span class="sxs-lookup"><span data-stu-id="e3611-111">When you post an invoice, it is transferred to the **Posted Purchase Credit Memo** page.</span></span> <span data-ttu-id="e3611-112">Если установлен флажок **Возврат поставки по кредит-ноте** на странице **Настройка модуля покупок**, счет переносится на страницу **Учтенный возврат поставки**.</span><span class="sxs-lookup"><span data-stu-id="e3611-112">If you selected the **Return Shipment on Credit Memo** check box on the **Purchases & Payable Setup** page, then the invoice is transferred to the **Posted Return Shipment** page.</span></span> <span data-ttu-id="e3611-113">Можно удалить документы с помощью пакетного задания **Удаление занесенных на счет возвратов покупки**.</span><span class="sxs-lookup"><span data-stu-id="e3611-113">You can delete the documents using the **Delete Invd Purch. Ret. Orders** batch job.</span></span> <span data-ttu-id="e3611-114">Перед удалением пакетное задание проверяет, полностью ли отгружены заказы на возврат покупки и выставлены ли по ним счета.</span><span class="sxs-lookup"><span data-stu-id="e3611-114">Before deleting, the batch job checks if the purchase return orders are fully shipped and invoiced.</span></span>  

<span data-ttu-id="e3611-115">Общие заказы на покупку не удаляются после обработки и выставления счёта по всем связанным заказам на покупку.</span><span class="sxs-lookup"><span data-stu-id="e3611-115">Blanket purchase orders are not deleted after you have processed and invoiced all the related purchase orders.</span></span> <span data-ttu-id="e3611-116">Можно удалить подобные заказы с помощью пакетного задания **Удалить общие заказы на покупку, по которым выставлены счета**.</span><span class="sxs-lookup"><span data-stu-id="e3611-116">You can delete blanket orders with the **Delete Invoiced Blanket Purchase Orders** batch job.</span></span>  

<span data-ttu-id="e3611-117">Сервисные заказы, учтенные в счетах, обычно удаляются автоматически после выставления по ним счетов в полном объеме.</span><span class="sxs-lookup"><span data-stu-id="e3611-117">Invoiced service orders are usually deleted automatically after having been fully invoiced.</span></span> <span data-ttu-id="e3611-118">Во время учета счета на странице **Учтенные сервисные счета** создается соответствующая запись.</span><span class="sxs-lookup"><span data-stu-id="e3611-118">When an invoice is posted, a corresponding entry is created on the **Posted Service Invoices** page.</span></span> <span data-ttu-id="e3611-119">Учтенный документ можно просматривать на странице **Учтенный сервисный счет**.</span><span class="sxs-lookup"><span data-stu-id="e3611-119">The posted document can be viewed on the **Posted Service Invoice** page.</span></span>  

<span data-ttu-id="e3611-120">Однако сервисные заказы не удаляются автоматически, если общее количество по заказу было учтено не из самого заказа, а со страницы **Сервисный счет**.</span><span class="sxs-lookup"><span data-stu-id="e3611-120">Service orders are not deleted automatically, however, if the total quantity on the order has been posted not from the service order itself, but from the **Service Invoice** page.</span></span> <span data-ttu-id="e3611-121">В этом случае может понадобиться удалить вручную заказы, по которым выставлены счета и которые не были удалены программой.</span><span class="sxs-lookup"><span data-stu-id="e3611-121">Then you may need to delete invoiced orders that were not deleted.</span></span> <span data-ttu-id="e3611-122">Это можно выполнить путем запуска пакетного задания **Удалить серв. заказы, по кот. выст. сч.**.</span><span class="sxs-lookup"><span data-stu-id="e3611-122">You can do this by running the **Delete Invoiced Service Orders** batch job.</span></span>  

## <a name="compress-data-with-date-compression"></a><span data-ttu-id="e3611-123">Сжатие данных со сжатием даты</span><span class="sxs-lookup"><span data-stu-id="e3611-123">Compress Data with Date Compression</span></span>

<span data-ttu-id="e3611-124">Вы можете сжать данные в [!INCLUDE [prod_short](includes/prod_short.md)] так, что вы сэкономите место в базе данных, которая в [!INCLUDE [prod_short](includes/prod_short.md)] (онлайн) может даже сэкономить ваши деньги.</span><span class="sxs-lookup"><span data-stu-id="e3611-124">You can compress data in [!INCLUDE [prod_short](includes/prod_short.md)] so that you save space in the database, which in [!INCLUDE [prod_short](includes/prod_short.md)] online can even save you money.</span></span> <span data-ttu-id="e3611-125">Сжатие основано на датах и заданиях путем объединения нескольких старых записей в одну новую.</span><span class="sxs-lookup"><span data-stu-id="e3611-125">The compression is based on dates and works by combining several old entries into one new entry.</span></span> <span data-ttu-id="e3611-126">Можно сжимать только операции закрытого финансового года и только те операции в книге поставщиков, для которых поле **Открыть** задано как *Нет*.</span><span class="sxs-lookup"><span data-stu-id="e3611-126">You can compress entries from closed fiscal years only, and only vendor ledger entries where the **Open** field is set to *No*.</span></span>  

<span data-ttu-id="e3611-127">Например, операции книги поставщика из предыдущего финансового года могут быть сжаты до одной кредитовой и дебетовой операции в месяц.</span><span class="sxs-lookup"><span data-stu-id="e3611-127">For example, vendor ledger entries from previous fiscal years can be compressed so that there is only one credit and one debit entry per account per month.</span></span> <span data-ttu-id="e3611-128">Сумма в новой операции равна общей сумме всех компрессированных операций.</span><span class="sxs-lookup"><span data-stu-id="e3611-128">The amount in the new entry is the sum of all the compressed entries.</span></span> <span data-ttu-id="e3611-129">Дата операции является начальной датой периода компрессии, например, первый день месяца (если операции компрессируются по месяцам).</span><span class="sxs-lookup"><span data-stu-id="e3611-129">The date assigned is the starting date for the period that is compressed, such as the first day of the month (if the entries are compressed by month).</span></span> <span data-ttu-id="e3611-130">После компрессии продолжает отображаться оборот по каждому финансовому счету за предыдущий финансовый год.</span><span class="sxs-lookup"><span data-stu-id="e3611-130">After the compression, you can still see the net change for each account in the previous fiscal year.</span></span>

<span data-ttu-id="e3611-131">Количество операций, которые получаются после компрессии даты, зависит от количества установленных фильтров, объединяемых полей и длины выбранного периода.</span><span class="sxs-lookup"><span data-stu-id="e3611-131">The number of entries that result from a date compression depends on how many filters you set, which fields are combined, and which period length you choose.</span></span> <span data-ttu-id="e3611-132">В любом случае создается по меньшей мере одна операция.</span><span class="sxs-lookup"><span data-stu-id="e3611-132">There will always be at least one entry.</span></span> <span data-ttu-id="e3611-133">После завершения пакетного задания его результат можно просмотреть на странице **Регистры сжатия**.</span><span class="sxs-lookup"><span data-stu-id="e3611-133">When the batch job is finished, you can see the result in the **Date Compr. Registers** page.</span></span>

<span data-ttu-id="e3611-134">Вы можете сжать следующие типы данных в [!INCLUDE [prod_short](includes/prod_short.md)] с использованием пакетных заданий:</span><span class="sxs-lookup"><span data-stu-id="e3611-134">You can compress the following types of data in [!INCLUDE [prod_short](includes/prod_short.md)] using batch jobs:</span></span>

* <span data-ttu-id="e3611-135">Записи книги операций по банку/кассе</span><span class="sxs-lookup"><span data-stu-id="e3611-135">Bank account ledger entries</span></span>

  <span data-ttu-id="e3611-136">После сжатия с помощью функции **Сохранить содержимое полей** можно сохранить содержимое полей **Номер документа, Наш контакт**, **Код глобального измерения 1** и **Код глобального измерения 2**.</span><span class="sxs-lookup"><span data-stu-id="e3611-136">After the compression, with the **Retain Field Contents** facility, you can retain the contents of the **Document No., Our Contact**, **Global Dimension 1 Code**, and **Global Dimension 2 Code** fields.</span></span>
* <span data-ttu-id="e3611-137">Книга операций по поставщикам</span><span class="sxs-lookup"><span data-stu-id="e3611-137">Vendor ledger entries</span></span>

> [!NOTE]
> <span data-ttu-id="e3611-138">Сжатые записи для клиентов, поставщиков, банка и вспомогательных книг FA разносятся немного иначе, чем стандартная разноска.</span><span class="sxs-lookup"><span data-stu-id="e3611-138">Compressed entries for customers, vendors, bank, and FA subledgers are posted slightly differently than standard posting.</span></span> <span data-ttu-id="e3611-139">Это сделано для уменьшения количества новых записей в главной книге, создаваемых сжатием по дате, и особенно важно, когда вы храните такую информацию, как аналитики и номера документов.</span><span class="sxs-lookup"><span data-stu-id="e3611-139">This is to reduce the number of new general ledger entries created by date compression, and is especially important when you keep information such as dimensions and document numbers.</span></span> <span data-ttu-id="e3611-140">Сжатие по дате создает новые записи следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e3611-140">Date compression creates new entries as follows:</span></span>
>* <span data-ttu-id="e3611-141">На странице **Операции главной книги** создаются новые записи с новыми номерами записей для сжатых записей.</span><span class="sxs-lookup"><span data-stu-id="e3611-141">On the **General Ledger Entries** page, new entries are created with new entry numbers for the compressed entries.</span></span> <span data-ttu-id="e3611-142">В поле **Описание** содержится **Сжатие по дате**, так что сжатые записи легко идентифицировать.</span><span class="sxs-lookup"><span data-stu-id="e3611-142">The **Description** field contains **Date Compressed** so that the compressed entries are easy to identify.</span></span> 
>* <span data-ttu-id="e3611-143">На страницах главной книги, таких как страница **Книга операций по клиентам**, создается одна или несколько записей с новыми номерами записей.</span><span class="sxs-lookup"><span data-stu-id="e3611-143">On ledger pages, such as the **Customer Ledger Entries** page, one or more entries are created with new entry numbers.</span></span> 
> <span data-ttu-id="e3611-144">Процесс разноски создает пропуски в серии номеров для записей на странице **Операции главной книги**.</span><span class="sxs-lookup"><span data-stu-id="e3611-144">The posting process creates gaps in the number series for entries on the **General Ledger Entries** page.</span></span> <span data-ttu-id="e3611-145">Эти номера присваиваются только записям на страницах главной книги.</span><span class="sxs-lookup"><span data-stu-id="e3611-145">Those numbers are assigned to the entries on the ledger pages only.</span></span> <span data-ttu-id="e3611-146">Диапазон номеров, который был присвоен записям, доступен на странице **Регистр ГК** в полях **От номера операции** и **До номера операции**.</span><span class="sxs-lookup"><span data-stu-id="e3611-146">The number range that was assigned to the entries is available on the **G/L Register page**  in the **From Entry No.** and **To Entry No.** fields.</span></span> 

<span data-ttu-id="e3611-147">После сжатия всегда сохраняется содержимое следующих полей: **Дата учета**, **Код поставщика**, **Тип документа**, **Код валюты**, **Учетная группа**, **Сумма**, **Сумма остатка**, **Исход. сумма (руб.)**, **Сумма остатка (руб.)**, **Сумма (руб.)**, **Покупка (руб.)**, **Скидка счета (руб.)**, **Скидка оплаты выдана (руб.)** и **Возможная скидка оплаты**.</span><span class="sxs-lookup"><span data-stu-id="e3611-147">After the compression, the contents of the following fields are always retained: **Posting Date**, **Vendor No.**, **Document Type**, **Currency Code**, **Posting Group**, **Amount**, **Remaining Amount**, **Original Amt. (LCY)**, **Remaining Amt. (LCY)**, **Amount (LCY)**, **Purchase (LCY)**, **Inv. Discount (LCY)**, **Pmt. Disc. Given (LCY)**, and **Pmt. Disc. Possible**.</span></span>

  <span data-ttu-id="e3611-148">При помощи функции **Сохранить содержимое полей** можно также сохранить содержимое следующих дополнительных полей: **Номер документа**, **Код поставщика**, **Код менеджера**, **Код глобального измерения 1** и **Код глобального измерения 2**.</span><span class="sxs-lookup"><span data-stu-id="e3611-148">With the **Retain Field Contents** facility, you can also retain the contents of these additional fields: **Document No.**, **Buy-from Vendor No.**, **Purchaser Code**, **Global Dimension 1 Code**, and **Global Dimension 2 Code**.</span></span>

> [!NOTE]
> <span data-ttu-id="e3611-149">После запуска сжатия данных все счета в бухгалтерской книге блокируются.</span><span class="sxs-lookup"><span data-stu-id="e3611-149">After you run date compression, all accounts in the ledger are locked.</span></span> <span data-ttu-id="e3611-150">Например, вы не можете отменить применение записей книги поставщиков или банковской книги для любых счетов в течение периода, для которого данные сжаты.</span><span class="sxs-lookup"><span data-stu-id="e3611-150">For example, you cannot un-apply vendor or bank ledger entries for any accounts during the period for which dates are compressed.</span></span>

<!--* General ledger entries
* Customer ledger entries-->
<!--* Fixed asset ledger entries
* G/L budget entries
* VAT entries

  After the compression the contents of the following fields are always retained: **Posting Date**, **Type**, **Closed**, **Gen. Bus. Posting Group**, **Gen. Prod. Posting Group**, **VAT Calculation Type**, **Base**, and **Amount**.

  With the **Retain Field Contents** facility, you can also retain the contents of the following additional fields: **Document No.**, **Bill-to/Pay-to No.**, **EU 3-Party Trade**, **Country/Region Code**, and **Internal Ref. No.**.
* Insurance ledger entries
* Maintenance ledger entries
* Resource ledger entries

  After the compression, the contents of the following fields are retained: **Posting Date**, **Resource No.**, **Resource Group No.**, **Entry Type**, **Quantity**, **Total Cost**, **Total Price**, and **Chargeable**.

  With the **Retain Field Contents** facility, you can also retain the contents of the following additional fields: **Document No.**, **Work Type Code**, **Job No.**, **Unit of Measure Code**, **Source Type**, **Source No.**. **Chargeable**, **
* Warehouse entries

  After the compression the contents of the following fields are always retained: **Registering Date**, **Location Code**, **Zone Code**, **Bin Code**, **Item No.**, **Quantity**, **Qty. (Base)**, **Bin Type Code**, **Entry Type**, **Variant Code**, **Qty. per Unit of Measure**, **Unit of Measure Code**, **Warranty Date**, **Expiration Date**, **Cubage**, and **Weight**.

  With the **Retain Field Contents** facility, you can also retain the contents of the **Serial No.** and **Lot No.** fields. -->

<span data-ttu-id="e3611-151">Количество операций, которые получаются после компрессии, зависит от количества установленных фильтров, объединяемых полей и длины выбранного периода.</span><span class="sxs-lookup"><span data-stu-id="e3611-151">The number of entries that result from a Date Compress batch job depends on how many filters you set, which fields are combined, and which period length you choose.</span></span> <span data-ttu-id="e3611-152">В любом случае создается по меньшей мере одна операция.</span><span class="sxs-lookup"><span data-stu-id="e3611-152">There will always be at least one entry.</span></span> 

> [!WARNING]
> <span data-ttu-id="e3611-153">Компрессия удаляет операции, поэтому следует всегда сохранять резервную копию данных перед запуском пакетного задания.</span><span class="sxs-lookup"><span data-stu-id="e3611-153">Date Compression deletes entries, so you should always make a backup copy of the database before you run the batch job.</span></span>

<span data-ttu-id="e3611-154">В следующей таблице перечислены поля на экспресс-вкладке **Параметры**, доступные для всех пакетных заданий.</span><span class="sxs-lookup"><span data-stu-id="e3611-154">The following table lists the fields on the **Options** FastTab that are available on all batch jobs.</span></span> <span data-ttu-id="e3611-155">В разделе **Сохранить содержимое полей** есть дополнительные поля, описанные выше.</span><span class="sxs-lookup"><span data-stu-id="e3611-155">The **Retain Field Contents** section includes additional fields are described above.</span></span>

|<span data-ttu-id="e3611-156">Поле</span><span class="sxs-lookup"><span data-stu-id="e3611-156">Field</span></span>  |<span data-ttu-id="e3611-157">Описание</span><span class="sxs-lookup"><span data-stu-id="e3611-157">Description</span></span>  |
|-------|-------------|
|<span data-ttu-id="e3611-158">Дата начала</span><span class="sxs-lookup"><span data-stu-id="e3611-158">Starting Date</span></span>     |<span data-ttu-id="e3611-159">Введите первую дату, которую необходимо включить в сжатие.</span><span class="sxs-lookup"><span data-stu-id="e3611-159">Enter the first date to be included in the date compression.</span></span> <span data-ttu-id="e3611-160">Компрессия будет влиять на все операции от этой даты до даты конца.</span><span class="sxs-lookup"><span data-stu-id="e3611-160">The compression will affect all entries from this date to the Ending Date.</span></span>|
|<span data-ttu-id="e3611-161">Дата окончания</span><span class="sxs-lookup"><span data-stu-id="e3611-161">Ending Date</span></span>     |<span data-ttu-id="e3611-162">Введите последнюю дату, которую необходимо включить в сжатие.</span><span class="sxs-lookup"><span data-stu-id="e3611-162">Enter the last date to be included in the date compression.</span></span> <span data-ttu-id="e3611-163">Компрессия затронет все операции, начиная с «Даты начала» и вплоть до этой даты включительно.</span><span class="sxs-lookup"><span data-stu-id="e3611-163">The compression will affect all entries from the Starting Date to this date.</span></span>|
|<span data-ttu-id="e3611-164">Длина периода</span><span class="sxs-lookup"><span data-stu-id="e3611-164">Period Length</span></span> |<span data-ttu-id="e3611-165">Выберите продолжительность периода, за который будут объединены операции.</span><span class="sxs-lookup"><span data-stu-id="e3611-165">Select the length of the period whose entries will be combined.</span></span> <span data-ttu-id="e3611-166">Выберите поле, чтобы просмотреть параметры.</span><span class="sxs-lookup"><span data-stu-id="e3611-166">Choose the field to see the options.</span></span> <span data-ttu-id="e3611-167">Если был выбран период *Квартал*, *Месяц* или *Неделя*, то будут сжаты только операции входящие в учетный период.</span><span class="sxs-lookup"><span data-stu-id="e3611-167">If you selected the period length *Quarter*, *Month*, or *Week*, only entries with a common accounting period are compressed.</span></span>|
|<span data-ttu-id="e3611-168">Сохранить содержимое полей</span><span class="sxs-lookup"><span data-stu-id="e3611-168">Retain Field Contents</span></span>     |<span data-ttu-id="e3611-169">Поместите флажок в соответствующих окошках, если после компрессии операций требуется сохранить содержимое определенных полей.</span><span class="sxs-lookup"><span data-stu-id="e3611-169">Place check marks in the boxes if you want to retain the contents of certain fields even though the entries are compressed.</span></span> <span data-ttu-id="e3611-170">По мере увеличения количества выбранных полей увеличивается степень подробности компрессируемых операций.</span><span class="sxs-lookup"><span data-stu-id="e3611-170">The more fields you select, the more detailed the compressed entries will be.</span></span> <span data-ttu-id="e3611-171">Если не выбрано ни одного из этих полей, пакетным заданием будет создана по одной операции для дня, недели, или другого периода, согласно интервалу, выбранному в поле **Длина периода**.</span><span class="sxs-lookup"><span data-stu-id="e3611-171">If you do not select any of these fields, the batch job will create one entry per day, week, or another period, according to the period selected in the **Period Length** field.</span></span> |

## <a name="see-also"></a><span data-ttu-id="e3611-172">См. также</span><span class="sxs-lookup"><span data-stu-id="e3611-172">See Also</span></span>

[<span data-ttu-id="e3611-173">Администрация</span><span class="sxs-lookup"><span data-stu-id="e3611-173">Administration</span></span>](admin-setup-and-administration.md)  


[!INCLUDE[footer-include](includes/footer-banner.md)]