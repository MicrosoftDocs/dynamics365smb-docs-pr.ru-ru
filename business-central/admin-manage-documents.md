---
title: Управление хранилищем путем удаления документов или сжатия данных
description: Узнайте, как сохранить исторические данные, сжав записи в бухгалтерской книге или удалив их.
author: edupont04
ms.service: dynamics365-business-central
ms.topic: article
ms.date: 10/01/2020
ms.author: edupont
ms.openlocfilehash: 05e5078253d63fac61039d26cc0d700e96c7d21a
ms.sourcegitcommit: ddbb5cede750df1baba4b3eab8fbed6744b5b9d6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/01/2020
ms.locfileid: "3911284"
---
# <a name="manage-storage-by-deleting-documents-or-compressing-data"></a>Управление хранилищем путем удаления документов или сжатия данных

Исполнителю главной роли, например администратору приложения, приходится постоянно иметь дело с накапливающимися архивными документами (удалять или сжимать их).  

## <a name="delete-documents"></a>Удаление документов

В определенных ситуациях может возникнуть потребность в удалении заказов на покупку с уже выставленными счетами, которые ещё не были удалены. В [!INCLUDE[d365fin](includes/d365fin_md.md)] выполняется проверка наличия для удаленных заказов на покупку полностью выставленных счетов. Невозможно удалить заказы, на которые не полностью выставлены счета и которые не полностью получены.  

Возвраты обычно удаляются после выставления по ним счета. Когда счет учтен, он переносится на страницу **Учтенная кредит-нота покупки**. Если установлен флажок **Возврат поставки по кредит-ноте** на странице **Настройка модуля покупок**, счет переносится на страницу **Учтенный возврат поставки**. Можно удалить документы с помощью пакетного задания **Удаление занесенных на счет возвратов покупки**. Перед удалением пакетное задание проверяет, полностью ли отгружены заказы на возврат покупки и выставлены ли по ним счета.  

Общие заказы на покупку не удаляются после обработки и выставления счёта по всем связанным заказам на покупку. Можно удалить подобные заказы с помощью пакетного задания **Удалить общие заказы на покупку, по которым выставлены счета**.  

Сервисные заказы, учтенные в счетах, обычно удаляются автоматически после выставления по ним счетов в полном объеме. Во время учета счета на странице **Учтенные сервисные счета** создается соответствующая запись. Учтенный документ можно просматривать на странице **Учтенный сервисный счет**.  

Однако сервисные заказы не удаляются автоматически, если общее количество по заказу было учтено не из самого заказа, а со страницы **Сервисный счет**. В этом случае может понадобиться удалить вручную заказы, по которым выставлены счета и которые не были удалены программой. Это можно выполнить путем запуска пакетного задания **Удалить серв. заказы, по кот. выст. сч.**.  

## <a name="compress-data-with-date-compression"></a>Сжатие данных со сжатием даты

Вы можете сжать данные в [!INCLUDE [prodshort](includes/prodshort.md)] так, что вы сэкономите место в базе данных, которая в [!INCLUDE [prodshort](includes/prodshort.md)] (онлайн) может даже сэкономить ваши деньги. Сжатие основано на датах и заданиях путем объединения нескольких старых записей в одну новую. Можно сжимать только операции закрытого финансового года и только те операции в книге поставщиков, для которых поле **Открыть** задано как *Нет*.  

Например, операции книги поставщика из предыдущего финансового года могут быть сжаты до одной кредитовой и дебетовой операции в месяц. Сумма в новой операции равна общей сумме всех компрессированных операций. Дата операции является начальной датой периода компрессии, например, первый день месяца (если операции компрессируются по месяцам). После компрессии продолжает отображаться оборот по каждому финансовому счету за предыдущий финансовый год.

Количество операций, которые получаются после компрессии даты, зависит от количества установленных фильтров, объединяемых полей и длины выбранного периода. В любом случае создается по меньшей мере одна операция. После завершения пакетного задания его результат можно просмотреть на странице **Регистры сжатия**.

Вы можете сжать следующие типы данных в [!INCLUDE [prodshort](includes/prodshort.md)] с использованием пакетных заданий:

* Записи книги операций по банку/кассе

  После сжатия с помощью функции **Сохранить содержимое полей** можно сохранить содержимое полей **Номер документа, Наш контакт**, **Код глобального измерения 1** и **Код глобального измерения 2**.
* Книга операций по поставщикам

  После сжатия всегда сохраняется содержимое следующих полей: **Дата учета**, **Код поставщика**, **Тип документа**, **Код валюты**, **Учетная группа**, **Сумма**, **Сумма остатка**, **Исход. сумма (руб.)**, **Сумма остатка (руб.)**, **Сумма (руб.)**, **Покупка (руб.)**, **Скидка счета (руб.)**, **Скидка оплаты выдана (руб.)** и **Возможная скидка оплаты**.

  При помощи функции **Сохранить содержимое полей** можно также сохранить содержимое следующих дополнительных полей: **Номер документа**, **Код поставщика**, **Код менеджера**, **Код глобального измерения 1** и **Код глобального измерения 2**.

<!--* General ledger entries
* Customer ledger entries-->
<!--* Fixed asset ledger entries
* G/L budget entries
* VAT entries

  After the compression the contents of the following fields are always retained: **Posting Date**, **Type**, **Closed**, **Gen. Bus. Posting Group**, **Gen. Prod. Posting Group**, **VAT Calculation Type**, **Base**, and **Amount**.

  With the **Retain Field Contents** facility, you can also retain the contents of the following additional fields: **Document No.**, **Bill-to/Pay-to No.**, **EU 3-Party Trade**, **Country/Region Code**, and **Internal Ref. No.**.
* Insurance ledger entries
* Maintenance ledger entries
* Resource ledger entries

  After the compression, the contents of the following fields are retained: **Posting Date**, **Resource No.**, **Resource Group No.**, **Entry Type**, **Quantity**, **Total Cost**, **Total Price**, and **Chargeable**.

  With the **Retain Field Contents** facility, you can also retain the contents of the following additional fields: **Document No.**, **Work Type Code**, **Job No.**, **Unit of Measure Code**, **Source Type**, **Source No.**. **Chargeable**, **
* Warehouse entries

  After the compression the contents of the following fields are always retained: **Registering Date**, **Location Code**, **Zone Code**, **Bin Code**, **Item No.**, **Quantity**, **Qty. (Base)**, **Bin Type Code**, **Entry Type**, **Variant Code**, **Qty. per Unit of Measure**, **Unit of Measure Code**, **Warranty Date**, **Expiration Date**, **Cubage**, and **Weight**.

  With the **Retain Field Contents** facility, you can also retain the contents of the **Serial No.** and **Lot No.** fields. -->

Количество операций, которые получаются после компрессии, зависит от количества установленных фильтров, объединяемых полей и длины выбранного периода. В любом случае создается по меньшей мере одна операция. 

> [!WARNING]
> Компрессия удаляет операции, поэтому следует всегда сохранять резервную копию данных перед запуском пакетного задания.

В следующей таблице перечислены поля на экспресс-вкладке **Параметры**, доступные для всех пакетных заданий. В разделе **Сохранить содержимое полей** есть дополнительные поля, описанные выше.

|Поле  |Описание  |
|-------|-------------|
|Дата начала     |Введите первую дату, которую необходимо включить в сжатие. Компрессия будет влиять на все операции от этой даты до даты конца.|
|Дата окончания     |Введите последнюю дату, которую необходимо включить в сжатие. Компрессия затронет все операции, начиная с «Даты начала» и вплоть до этой даты включительно.|
|Длина периода |Выберите продолжительность периода, за который будут объединены операции. Выберите поле, чтобы просмотреть параметры. Если был выбран период *Квартал*, *Месяц* или *Неделя*, то будут сжаты только операции входящие в учетный период.|
|Сохранить содержимое полей     |Поместите флажок в соответствующих окошках, если после компрессии операций требуется сохранить содержимое определенных полей. По мере увеличения количества выбранных полей увеличивается степень подробности компрессируемых операций. Если не выбрано ни одного из этих полей, пакетным заданием будет создана по одной операции для дня, недели, или другого периода, согласно интервалу, выбранному в поле **Длина периода**. |

## <a name="see-also"></a>См. также

[Администрация](admin-setup-and-administration.md)  
