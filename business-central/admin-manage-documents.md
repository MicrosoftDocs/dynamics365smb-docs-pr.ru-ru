---
title: Управление хранилищем путем удаления документов или сжатия данных
description: Узнайте, как работать с накоплением исторических документов (и уменьшить объем данных, хранящихся в базе данных), удаляя или сжимая их.
author: edupont04
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.date: 06/14/2021
ms.author: edupont
ms.openlocfilehash: 149f035dfd6b1abd2e00048bb1af4059e00c976f
ms.sourcegitcommit: 04055135ff13db551dc74a2467a1f79d2953b8ed
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/08/2021
ms.locfileid: "7482174"
---
# <a name="manage-storage-by-deleting-documents-or-compressing-data"></a>Управление хранилищем путем удаления документов или сжатия данных

Исполнителю главной роли, например администратору приложения, приходится постоянно иметь дело с накапливающимися архивными документами (удалять или сжимать их).  

> [!TIP]
> Сведения о других способах уменьшения объема данных, хранящихся в базе данных, см. раздел [Сокращение объема данных, хранящихся в базах данных Business Central](/dynamics365/business-central/dev-itpro/administration/database-reduce-data) в нашей документации для разработчиков и ИТ-специалистов.

## <a name="delete-documents"></a>Удаление документов

В определенных ситуациях может возникнуть потребность в удалении заказов на покупку с уже выставленными счетами, которые ещё не были удалены. В [!INCLUDE[prod_short](includes/prod_short.md)] выполняется проверка наличия для удаленных заказов на покупку полностью выставленных счетов. Невозможно удалить заказы, на которые не полностью выставлены счета и которые не полностью получены.  

Возвраты обычно удаляются после выставления по ним счета. Когда счет учтен, он переносится на страницу **Учтенная кредит-нота покупки**. Если установлен флажок **Возврат поставки по кредит-ноте** на странице **Настройка модуля покупок**, счет переносится на страницу **Учтенный возврат поставки**. Можно удалить документы с помощью пакетного задания **Удаление занесенных на счет возвратов покупки**. Перед удалением пакетное задание проверяет, полностью ли отгружены заказы на возврат покупки и выставлены ли по ним счета.  

Общие заказы на покупку не удаляются после обработки и выставления счёта по всем связанным заказам на покупку. Можно удалить подобные заказы с помощью пакетного задания **Удалить общие заказы на покупку, по которым выставлены счета**.  

Сервисные заказы, учтенные в счетах, обычно удаляются автоматически после выставления по ним счетов в полном объеме. Во время учета счета на странице **Учтенные сервисные счета** создается соответствующая запись. Учтенный документ можно просматривать на странице **Учтенный сервисный счет**.  

Однако сервисные заказы не удаляются автоматически, если общее количество по заказу было учтено не из самого заказа, а со страницы **Сервисный счет**. В этом случае может понадобиться удалить вручную заказы, по которым выставлены счета и которые не были удалены программой. Это можно выполнить путем запуска пакетного задания **Удалить серв. заказы, по кот. выст. сч.**.  

## <a name="compress-data-with-date-compression"></a>Сжатие данных со сжатием даты

Вы можете сжать данные в [!INCLUDE [prod_short](includes/prod_short.md)], чтобы сэкономить место в базе данных, которая в [!INCLUDE [prod_short](includes/prod_short.md)] Online может даже сэкономить ваши деньги. Сжатие основано на датах и заданиях путем объединения нескольких старых записей в одну новую. 

Вы можете сжимать записи при следующих условиях:

* Они из закрытых финансовых лет
* Поле **Открыть** задано как **Нет** 
* Им как минимум пять лет. Если вы хотите сжать данные, которым меньше пяти лет, обратитесь к партнеру Microsoft.

Например, операции книги поставщика из предыдущего финансового года могут быть сжаты до одной кредитовой и дебетовой операции в месяц. Сумма в новой операции равна общей сумме всех компрессированных операций. Дата операции является начальной датой периода компрессии, например, первый день месяца (если операции компрессируются по месяцам). После компрессии продолжает отображаться оборот по каждому финансовому счету за предыдущий финансовый год.

Количество операций, которые получаются после компрессии даты, зависит от количества установленных фильтров, объединяемых полей и длины выбранного периода. В любом случае создается по меньшей мере одна операция. После завершения пакетного задания его результат можно просмотреть на странице **Регистры сжатия**.

Вы можете сжать следующие типы данных с использованием пакетных заданий. Для каждого типа данных существует пакетное задание.

* Финансовые записи — записи в главной книге, записи по НДС, записи в книге банковских счетов, записи в главной книге, записи в книге клиентов, записи в книге поставщиков.
* Складские операции 
* Записи о ресурсах
* Операции товарного бюджета
* Основные средства — записи в книге учета основных средств, записи в журнале технического обслуживания FA, записи в книге страхования FA.

Когда вы определяете критерии для сжатия, вы можете использовать параметры в **Сохранить содержимое полей**, чтобы сохранить содержимое определенных полей. Доступные поля зависят от данных, которые вы сжимаете.

> [!NOTE]
> Прежде чем вы сможете запустить сжатие данных, ваши аналитические представления должны быть актуальными. Для получения дополнительной информации прочитайте [Обновление аналитического отчета](/dynamics365/business-central/bi-how-analyze-data-dimension.md#to-update-an-analysis-view).

После сжатия всегда сохраняется содержимое следующих полей: **Дата учета**, **Код поставщика**, **Тип документа**, **Код валюты**, **Учетная группа**, **Сумма**, **Сумма остатка**, **Исход. сумма (руб.)**, **Сумма остатка (руб.)**, **Сумма (руб.)**, **Покупка (руб.)**, **Скидка счета (руб.)**, **Скидка оплаты выдана (руб.)** и **Возможная скидка оплаты**.

## <a name="posting-compressed-entries"></a>Публикация сжатых записей
Сжатые записи разносятся немного иначе, чем стандартные. Это сделано для уменьшения количества новых записей в главной книге, создаваемых сжатием по дате, и особенно важно, когда вы храните такую информацию, как аналитики и номера документов. Сжатие по дате создает новые записи следующим образом:
* На странице **Операции главной книги** создаются новые записи с новыми номерами записей для сжатых записей. В поле **Описание** содержится **Сжатие по дате**, так что сжатые записи легко идентифицировать. 
* На страницах главной книги, таких как страница **Книга операций по клиентам**, создается одна или несколько записей с новыми номерами записей. 

Процесс разноски создает пропуски в серии номеров для записей на странице **Операции главной книги**. Эти номера присваиваются только записям на страницах главной книги. Диапазон номеров, который был присвоен записям, доступен на странице **Регистр ГК** в полях **От номера операции** и **До номера операции**. 

> [!NOTE]
> После запуска сжатия данных все счета в бухгалтерской книге блокируются. Например, вы не можете отменить применение записей книги поставщиков или банковской книги для любых счетов в течение периода, для которого данные сжаты.

Количество операций, которые получаются после компрессии даты, зависит от количества установленных фильтров, объединяемых полей и длины выбранного периода. В любом случае создается по меньшей мере одна операция. 

> [!WARNING]
> Компрессия данных удаляет записи, поэтому следует всегда сохранять резервную копию данных перед запуском пакетного задания.

### <a name="to-run-a-date-compression"></a>Запуск сжатия данных
1. Выберите значок ![Поиск страницы или отчета](media/ui-search/search_small.png "Значок поиска страницы или отчета"), введите **Администрирование данных**, а затем выберите соответствующую ссылку.
2. Выполните одно из следующих действий:
    * Чтобы использовать руководство по мастеру настройки для настройки сжатия данных одного или нескольких типов данных, выберите **Мастер администрирования данных**.
    * Чтобы настроить сжатие для отдельного типа данных, выберите **Сжатие данных**, **Сжать операции**, а затем выберите данные для сжатия.

   > [!NOTE]
   > Вы можете сжимать только данные старше пяти лет. Если вы хотите сжать данные, которым меньше пяти лет, обратитесь к партнеру Microsoft.

## <a name="see-also"></a>См. также

[Администрация](admin-setup-and-administration.md)  


[!INCLUDE[footer-include](includes/footer-banner.md)]