---
title: Настройка электронных документов
description: 'Узнайте, как настроить функциональность электронных документов.'
author: altotovi
ms.topic: conceptual
ms.devlang: al
ms.search.keywords: 'electronic document, electronic invoice, e-document, e-invoice'
ms.search.form: '359, 360, 6103, 6133'
ms.date: 05/02/2024
ms.author: altotovi
ms.service: dynamics-365-business-central
---

# <a name="set-up-e-documents"></a>Настройка электронных документов

> [!IMPORTANT]
> Базовый модуль «Электронные документы» представляет собой платформу. По умолчанию поля **Интеграция службы** нет. Если вы обнаружите параметры **Формат документа** по умолчанию, имейте в виду, что они предлагаются в качестве примера и что детальный формат должна обеспечивать локализация. Эти детали входят в состав приложений локализации, поскольку зависят от требований, существующих в конкретном регионе.

> [!NOTE]
> Начиная с версии 23.2 стандартный формат документа PEPPOL добавлен в качестве глобального формата в поле **Формат документов**. Помните, что вы, вероятно, не сможете использовать этот формат как есть. Это формат W1, предназначенный для демонстрации использования этой функции. Мы рекомендуем вам протестировать существующий формат PEPPOL, прежде чем начинать его использовать.

Первым шагом в настройке электронных документов является настройка службы электронных документов, в ходе которой вы настраиваете все поведение своей системы в части передачи электронных документов.

## <a name="set-up-the-e-document-service"></a>Настройка службы электронных документов

Выполните следующие действия, чтобы настроить службу электронных документов.

1. Выберите значок ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Службы электронных документов**, а затем выберите соответствующую ссылку.
2. Выберите **Создать**, а затем на странице **Службы электронных документов** на экспресс-вкладке **Общие сведения** настройте поля, как описано в следующей таблице.

    | Поле | Описанием |
    |-------|-------------|
    | Код | Выберите код настройки электронного экспорта. |
    | Описанием | Введите краткое описание настройки электронного экспорта. |
    | Формат документов | <p>Формат экспорта для настройки электронного экспорта.</p><p>По умолчанию в этом поле два варианта значений. Вы можете выбрать **PEPPOL BIS 3** в качестве универсального формата на основе кода или **Обмен данными**, если вам нужно настроить предварительные документы или определенные форматы на экспресс-вкладке **Определение обмена данными**.</p> |
    | Интеграция службы | Выберите код интеграции для настройки электронного экспорта. В волне 1 единственным вариантом является **Нет интеграции**. |
    | Использовать пакетную обработку | Укажите, использует ли служба пакетную обработку для экспорта. |

3. На экспресс-вкладке **Параметры импорта** заполните поля, как описано в следующей таблице.

    | Поле | Описанием |
    |-------|-------------|
    | Проверять организацию-получателя | Укажите, следует ли во время импорта проверять информацию об организации-получателе. |
    | Разрешать единицу измерения | Укажите, следует ли во время импорта разрешать единицу измерения. |
    | Подставлять ссылку на товар | Укажите, следует ли во время импорта выполнять поиск товара по ссылке на товар. |
    | Подставлять код GTIN товара | Укажите, следует ли во время импорта выполнять поиск товара по коду глобальный номер товарной продукции (GTIN). |
    | Подстановка сопоставления счетов | Укажите, следует ли во время импорта выполнять поиск счета в таблице **Сопоставление счетов** по входящему тексту. |
    | Проверять скидку по строке | Укажите, следует ли во время импорта проверять скидку по строке. |
    | Применять скидку по счету | Укажите, следует ли во время импорта применять скидку по счету. |
    | Проверять итоги | Укажите, следует ли во время импорта проверять итоги по счету. |
    | Обновить заказ | Укажите, следует ли обновить соответствующий заказ на покупку. |
    | Создать строки журнала | Укажите, следует ли создавать строку журнала вместо документа покупки. Выбирайте этот вариант, если вы хотите использовать журналы в качестве места назначения для своих счетов. |
    | Название шаблона финансового журнала | Укажите имя шаблона финансового журнала, используемого для создания строк журнала. Это поле применимо, если вы хотите использовать журналы в качестве места назначения для своих счетов. |
    | Название раздела финансового журнала | Укажите код раздела финансового журнала, используемого для создания строк журнала. Это поле применимо, если вы хотите использовать журналы в качестве места назначения для своих счетов. |
    | Автоматический импорт | Укажите, должны ли документы автоматически импортироваться из службы. |
    | Время начала пакета | Укажите время начала для заданий импорта. |
    | Минут между запусками | Укажите количество минут между запусками заданий импорта. |

4. Если вы выбрали **Обмен данными** в поле **Формат документа** на экспресс-вкладке **Общие**, используйте экспресс-вкладку **Определение обмена данными**, чтобы задать следующие поля.

    | Поле | Описанием |
    |-------|-------------|
    | Тип документа | Укажите тип документа, для импорта и экспорта данных которого используется обмен данными. Примеры — **Счет продажи**, **Кредит-нота продажи** и **Счет покупки**. |
    | Код определения обмена данными (импорт) | Укажите код обмена данными, используемый для импорта данных. Используйте это поле только для получения документа в процессе покупки. |
    | Код определения обмена данными (экспорт) | Укажите код обмена данными, используемый для экспорта данных. Используйте это поле только для доставки документов в процессе продажи. |

> [!NOTE]
> В системе имеются подготовленные определения обмена данными для формата PEPPOL, относящиеся к стандартному документу купли-продажи. Однако вы, скорее всего, не сможете использовать эти определения как есть. Все они имеют формат W1, предназначенный для демонстрации использования этой функции. Мы рекомендуем вам протестировать существующий формат PEPPOL, прежде чем начинать их использовать.

Если вы настроили формат **Определение обмена данными** в своей локализации, вы можете добавить по строке для каждого типа документа, который вам нужен. Добавьте строки, соответствующие примеру обмена данными по умолчанию для формата W1 PEPPOL. Однако сначала выберите значение параметра **Тип документа** для каждой необходимой вам строки. Для каждого типа данных выберите **Код определения обмена данными (импорт)** или **Код определения обмена данными (экспорт)**, который вы хотите использовать.

Если вы не используете формат **Определение обмена данными**, вы можете создавать и настраивать форматы с помощью [интерфейса](/dynamics365/business-central/dev-itpro/developer/devenv-extend-edocuments). Скорректируйте информацию в строках **Сопоставление экспорта** и **Сопоставление импорта**, где вы найдете таблицы и поля для настройки правил преобразования. В этом случае вам нужно будет добавить в поле **Формат документа** новый вариант значения, связанный с вашим форматом.  

### <a name="supported-document-types"></a>Поддерживаемые типы документов

Поддерживаемые типы документов зависят от выбранного **формата документа**. Чтобы проверить, какие типы документов поддерживаются, на странице **Службы электронных документов** выберите действие **Поддерживаемые типы документов**. Откроется окно **Типы исходных документов, поддерживаемые службой электронных документов**. В столбце **Тип исходного документа** можно выбирать различные типы документов, чтобы сделать их поддерживаемыми для формата, который вы планируете использовать. Не используйте документы, тип которых не выбран на этой странице.   

## <a name="set-up-a-document-sending-profile"></a>Настройка профиля отправки документов

Вы можете настроить предпочтительный способ отправки документов продажи для каждого клиента. Так вам не придется выбирать вариант отправки каждый раз, когда вы выбираете действие **Учесть и отправить**. На странице **Профили отправки документов** можно настроить различные профили отправки, которые затем можно будет выбирать в поле **Профиль отправки документов** в карточке клиента. Вы можете установить флажок **По умолчанию**, чтобы указать, что профиль отправки документа является профилем по умолчанию для всех клиентов, кроме тех, у которых в поле **Профиль отправки документов** указан другой профиль.

Данная функциональность используется для настройки автоматизации электронного выставления счетов. При выборе действия **Учесть и отправить** в документе продажи появляется диалоговое окно **Подтверждение учета и отправки**, в котором отображается используемый профиль отправки — либо установленный для данного клиента, либо профиль по умолчанию, используемый для всех клиентов.

Чтобы настроить профиль отправки документов, выполните следующие действия.

1. Выберите значок ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Профиль отправки документов**, а затем выберите соответствующую ссылку.
2. На странице **Профили отправки документов** выберите **Создать**.
3. На экспресс-вкладке **Общие сведения** введите необходимую информацию в полях.
4. На экспресс-вкладке **Параметры отправки** настройте поля, как описано в следующей таблице.

    | Поле | Описанием |
    |-------|-------------|
    | Электронный документ | Укажите, следует ли при нажатии кнопки **Учесть и отправить** отправлять документ в виде электронного документа, который клиент сможет импортировать в свою систему. Чтобы использовать этот вариант, необходимо также задать значение в поле **Формат** или **Код потока службы электронных документов**. Также можно сохранять файл на диск. |
    | Формат | Укажите формат, который будет использоваться для отправки электронного документа. Это поле является обязательным, если в поле **Электронный документ** выбран вариант **Через службу обмена документами**. |
    | Код потока службы электронных документов | Укажите поток электронной службы, используемый для отправки документов. Это поле является обязательным, если в поле **Электронный документ** выбран вариант **Расширенный поток службы электронных документов**. |

    > [!NOTE]
    > При выборе варианта **Расширенный поток службы электронных документов** в поле **Электронный документ** у вас должен быть уже настроен рабочий процесс для ваших электронных документов.

## <a name="set-up-the-workflow"></a>Настройка рабочего процесса

Выполните следующие действия, чтобы настроить рабочий процесс, используемый в функциональности электронных документов.

1. Выберите значок ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Шаблоны рабочих процессов**, а затем выберите соответствующую ссылку.
2. Если вы не можете найти раздел **Шаблоны рабочих процессов электронных документов** на странице **Шаблоны рабочих процессов**, выберите **Сбросить шаблоны Майкрософт**. После этого раздел **Шаблоны рабочих процессов электронных документов** должен появиться. Закрытие страницы.
3. Выберите значок ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Рабочие процессы**, а затем выберите соответствующую ссылку.
4. Выберите действие **Создать рабочий процесс из шаблона**, чтобы выбрать шаблон для процесса обработки электронных документов. Доступные шаблоны — **Отправка в одну службу** и **Отправка в несколько служб**.
5. Нажмите **ОК**, чтобы завершить настройку рабочего процесса.
6. В поле **Отклик "то"** выберите **Отправить электронный документ с использованием настройки**, чтобы настроить отклики рабочего процесса.
7. Выберите созданную вами службу электронных документов, выберите **ОК**, а затем включите рабочий процесс.

> [!NOTE]
> Вы можете создать свой собственный рабочий процесс для электронных документов без использования предопределенных шаблонов рабочих процессов. Если у вас несколько служб, вы можете использовать разные рабочие процессы.

Для использования других рабочих процессов настройте их с помощью профилей отправки документов для разных клиентов. При настройке рабочего процесса укажите профиль отправки документов в столбце **При условии** на экспресс-вкладке **Шаги рабочего процесса**, поскольку в рабочих процессах не может быть двух служб, использующих один и тот же профиль отправки документов.

Настраивая рабочий процесс на странице **Рабочие процессы**, наведите указатель мыши на поле **При условии** на экспресс-вкладке **Шаги рабочего процесса**. На странице **Условия события** в поле **Фильтр** выберите профиль отправки документов, который вы хотите использовать.

## <a name="set-up-a-retention-policy-for-e-documents"></a>Настройка политики хранения электронных документов

Электронные документы могут подпадать под действие различных местных норм, касающихся срока хранения электронных документов. Поэтому мы добавили возможность настройки политики хранения для всей важной информации, связанной с электронными документами. Администраторы могут задавать политики хранения, определяющие, как часто Dynamics 365 Business Central удаляют устаревшие записи, связанные с электронными документами. Подробнее о политиках хранения можно узнать в статье [Определение политик хранения](admin-data-retention-policies.md).

Чтобы настроить политики хранения электронных документов, выполните следующие действия.

1. На странице **Службы электронных документов** выберите действие **Политика хранения**.
2. После завершения действия выберите одну из следующих политик хранения для настройки:

    - Журнал электронных документов
    - Журнал интеграции электронных документов
    - Журнал сопоставления электронных документов
    - Хранение данных электронных документов

## <a name="e-documents-demo-data"></a>Демонстрационные данные электронных документов

> [!NOTE]
> Начиная с версии Business Central 24.0 можно настроить демонстрационные данные для электронных документов.

Чтобы упростить тестирование и демонстрацию возможностей функциональности **Электронные документы**, корпорация Майкрософт создала новый демонстрационный модуль для электронных документов. Чтобы включить этот модуль, выполните следующие действия:  

1.  Выберите значок ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Демонстрационные данные Contoso**, а затем выберите соответствующую ссылку.  
2.  Прежде чем включать **Модуль электронных документов Contoso**, из-за зависимостей необходимо включить следующие модули: **Общий модуль** и **Складской модуль**. 
3.  После включения этих модулей выберите **Модуль электронных документов Contoso**, а затем выберите действие **Создать**. 
4.  Следуйте инструкциям на экране.  
5.  Закрытие страницы.   

После включения модуля у вас будут созданы новые демонстрационные элементы, будет импортировано шесть электронных документов (на базе Peppol BIS 3), а также будут настроены **Службы электронных документов** с созданными рабочими процессами.  

## <a name="see-also"></a>См. также

[Как использовать электронные документы в процессе продаж](finance-how-use-edocuments.md)    
[Как использовать электронные документы в процессе покупок](finance-how-use-edocuments-purchase.md)  
[Как расширять электронные документы в Business Central](/dynamics365/business-central/dev-itpro/developer/devenv-extend-edocuments)    
[Финансовый менеджмент](finance.md)    
[Выставление счетов продажи](sales-how-invoice-sales.md)    
[Регистрация покупок с использованием счетов покупки и заказов на покупку](purchasing-how-record-purchases.md)    
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)  

[!INCLUDE[footer-include](includes/footer-banner.md)]
