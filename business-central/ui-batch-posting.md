---
title: Одновременный учет нескольких документов
description: 'Узнайте, как выбрать несколько неучтенных документов в списке для немедленного или запланированного пакетного учета в Business Central.'
author: SorenGP
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.form: null
ms.reviewer: edupont
ms.date: 06/25/2021
ms.author: edupont
---
# <a name="post-multiple-documents-at-the-same-time"></a><a name="post-multiple-documents-at-the-same-time"></a><a name="post-multiple-documents-at-the-same-time"></a>Одновременный учет нескольких документов

Вместо того чтобы учитывать отдельные документы по одному, вы можете выбрать несколько неучтенных документов в списке для немедленного учета или для пакетного учета по расписанию (например, в конце дня). Это имеет смысл делать, если только контролер может учитывать документы, созданные другими пользователями, или во избежание проблем с быстродействием системы из-за учета документов в рабочие часы.

## <a name="to-post-multiple-purchase-orders-immediately"></a><a name="to-post-multiple-purchase-orders-immediately"></a><a name="to-post-multiple-purchase-orders-immediately"></a>Немедленный одновременный учет нескольких заказов на покупку

В следующей процедуре рассматривается, как немедленно учесть несколько заказов на покупку. Действия для всех остальных документов продажи и покупки аналогичны.

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок введите **Заказы на покупку**, а затем выберите связанную ссылку.
2. На странице **Заказы** выберите все заказы для учета:
3. В поле **Номер** выберите три вертикальные точки, чтобы открыть контекстное меню, а затем выберите действие **Выбрать больше**.
4. Установите флажки для всех строк, представляющих заказы, которые вы хотите одновременно учесть.
5. Выберите действие **Учет**, а затем выберите действие **Учет**.
6. Нажмите кнопку **Да** в сообщении подтверждения.

## <a name="to-batch-post-multiple-purchase-orders"></a><a name="to-batch-post-multiple-purchase-orders"></a><a name="to-batch-post-multiple-purchase-orders"></a>Пакетный учет нескольких заказов на покупку

В следующей процедуре рассматривается пакетный учет заказов на покупку. Действия для всех остальных документов покупки и продажи, где доступно действие **Пакетный учет**, аналогичны.

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок введите **Заказы на покупку**, а затем выберите связанную ссылку.  
2. На странице **Заказы** выберите все заказы для учета:
3. В поле **Номер** выберите три вертикальные точки, чтобы открыть контекстное меню, а затем выберите действие **Выбрать больше**.
4. Установите флажки для всех строк, представляющих заказы, которые вы хотите одновременно учесть.
5. Выберите действие **Учет**, а затем выберите действие **Пакетный учет**.
6. На странице **Пакет. учет заказов на покупку** заполните поля требуемым образом. [!INCLUDE[tooltip-inline-tip](includes/tooltip-inline-tip_md.md)]
7. Нажмите кнопку **ОК**.
8. Для просмотра потенциальных проблем, возникших во время пакетного учета документов, откройте страницу **Регистр сообщений об ошибках**.

> [!NOTE]
> Учет нескольких документов может занять некоторое время и заблокировать других пользователей. Рассмотрите возможность включения фонового учета. Дополнительные сведения см. в разделе [Использование очередей работ для планирования задач](admin-job-queues-schedule-tasks.md).

## <a name="to-set-up-background-posting-with-job-queues"></a><a name="to-set-up-background-posting-with-job-queues"></a><a name="to-set-up-background-posting-with-job-queues"></a>Настройка фонового учета с очередями работ
Очереди заданий — это эффективный инструмент для фонового планирования хода бизнес-процессов, например когда несколько пользователей пытаются выполнить учет заказов на продажу, но только один заказ может обрабатываться одновременно.  

В следующей процедуре объясняется, как настроить фоновый учет для заказов на продажу. Действия для покупки аналогичны.  

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок введите **Настройка модуля "Продажи и дебиторская задолженность"**, а затем выберите связанную ссылку.
2. На странице **Пакетный учет возвратов продажи** установите флажок **Разнести в очереди работ**.
3. Выберите поле **Код категории очереди работ** и укажите код **SALESPOST**.

    > [!NOTE]
    > Некоторые задания изменяют одни и те же данные и не должны выполняться одновременно, поскольку это может привести к конфликтам. Например, фоновые задания для документов продаж будут пытаться изменить одни и те же данные одновременно. Категории очередей заданий помогают предотвратить подобные конфликты, чтобы при выполнении одного задания другое задание, принадлежащее к той же категории, не запускалось до завершения первого. Например, задание, принадлежащее к категории очереди заданий продаж, будет ожидать завершения всех остальных заданий, связанных с продажами. Категория очереди заданий указывается на экспресс-вкладке **Фоновый учет** на странице **Настройка модуля "Продажи и дебитор. задолж."**.
    >
    > [!INCLUDE[prod_short](includes/prod_short.md)] предоставляет категории очереди заданий для продаж, закупок и учета в главной книге. Мы рекомендуем всегда указывать одну из них или ту, которую вы создадите. Если у вас возникли сбои из-за конфликтов, рассмотрите возможность установки категории для всех продаж, покупок и фонового учета в Главной книге.

    Если необходимо также печатать документы продажи при их учете, установите флажок **Разнести и распечатать в очереди работ** на странице **Настройка модуля "Продажи"**.  
    Если вы выберете **PDF** в поле **Тип вывода отчета**, успешно учтенные заказы на покупку будут доступны в части **Входящие отчеты** вашего ролевого центра.

    > [!IMPORTANT]  
    > Если настроена работа, которая будет учитывать и печатать документы, и при отправке документа на печать принтер открывает диалоговое окно, например запрос для учетных данных или предупреждение о низком уровне чернил, то данный документ учитывается, но не печатается. Соответствующая операция очереди работ в конечном итоге истекает, и в поле **Статус** задается **Ошибка**. Соответственно, рекомендуется не использовать настройку принтера, требующую взаимодействия с отображаемыми диалоговыми окнами печати в сочетании с фоновым учетом.

    В следующий раз при разноске торговых документов [!INCLUDE [prod_short](includes/prod_short.md)] автоматически создает запись в очереди заданий для каждого документа и запускает задания в фоновом режиме, одно за другим.

4. Чтобы убедиться, что очередь заданий работает как ожидалось, выполните учет заказа на продажу. Дополнительные сведения см. в разделе [Продажа продукции](sales-how-sell-products.md).
    Заказ на продажу теперь будет добавлен в отдельную операцию очереди работ, которая определяет, когда будут учтены документы. 

### <a name="to-view-status-from-a-sales-or-purchase-document"></a><a name="to-view-status-from-a-sales-or-purchase-document"></a><a name="to-view-status-from-a-sales-or-purchase-document"></a>Просмотр статуса из документа продажи или покупки
Если очередь заданий не может выполнить учет заказа на продажу, статус меняется на **Ошибка**, и заказ на продажу добавляется в список заказов, которые пользователь должен обработать вручную.
1. Из документа. который вы пытались учесть с помощью фонового учета, выберите поле **Статус очереди работ**, которое будет содержать значение **Ошибка**.
2. Просмотрите сообщение об ошибке и устраните проблему.

Также можно проверить на странице **Операции журнала очереди работ**, был ли заказ продажи учтен успешно. Дополнительные сведения см. в разделе [Отслеживание очереди заданий](#monitor-the-job-queue).

## <a name="to-create-a-job-queue-entry-for-batch-posting-of-sales-orders"></a><a name="to-create-a-job-queue-entry-for-batch-posting-of-sales-orders"></a><a name="to-create-a-job-queue-entry-for-batch-posting-of-sales-orders"></a>Создание записи очереди заданий для фонового учета заказов на продажу

Кроме того, можно отложить учет на время, удобное для вашей организации. Например, может иметь смысл для бизнеса выполнять некоторые процедуры после ввода большинства данных за день. Для этого настройте очередь работ для выполнения различных отчетов по пакетному учету, например **Пакет. учет заказов продажи**, **Пакет. учет счетов продажи** и аналогичные отчеты. [!INCLUDE[prod_short](includes/prod_short.md)] поддерживает фоновый учет для всех документов на продажи, покупки и сервис.

Ниже приводится процедура настройки отчета **Пакет. учет заказов продажи** для автоматического учета заказов на продажу в 16:00 по будним дням.  

1. Выберите ![Лампочка, которая открывает функцию Что вы хотите сделать.](media/ui-search/search_small.png "Что вы хотите сделать") значок, введите **Операции очереди работ**, а затем выберите связанную ссылку.  
2. Выберите действие **Создать**.  
3. В поле **Тип запускаемого объекта** выберите **Отчет**.  
4. В поле **Номер запускаемого объекта** выберите 296, **Пакет. учет заказов продажи**.

   При этом можно также пользоваться следующими отчетами:
  
   * 900 **Групповая разноска заказов на сборку**
   * 497 **Пакет. учет счетов покупки**
   * 496 **Пакет. учет заказов на покупку**
   * 498 **Пакет. учет кредит-нот покупки**
   * 6665 **Пакетный учет возвратов покупки**
   * 298 **Пакет. учет кредит-нот продажи**
   * 297 **Пакет. учет счетов продажи**
   * 296 **Пакет. учет заказов продажи**
   * 6655 **Пакетный учет возвратов продажи**
   * 6005 **Пакетный учет сервисных кредит-нот**
   * 6004 **Пакетный учет сервисных счетов**
   * 6001 **Пакетный учет сервисных заказов**

5. Установите флажок **Страница запроса отчета**.
6. На странице запроса **Пакет. учет заказов продажи** укажите, что включено в процессе автоматического учета заказов на продажу, затем нажмите кнопку **ОК**.

    > [!IMPORTANT]
    > Не забудьте установить строгие фильтры; в противном случае [!INCLUDE [prod_short](includes/prod_short.md)] учтет все документы, даже если они не готовы. Рассмотрите возможность установки фильтра по полю **Состояние** для значения *Выпущенные*, и фильтр по полу **Дата учета** для значения *..сегодня*. Дополнительные сведения см. в разделе [Сортировка, поиск и фильтрация](ui-enter-criteria-filters.md).
7. Установите все флажки от **Запускать по понедельникам** до **Запускать по пятницам**.
8. В поле **Время начала** введите 16:00.
9. Выберите действие **Установить статус "Готово"**.

Заказы на продажу, которые удовлетворяют заданным фильтрам, теперь будут учитываться каждый будний день в 16:00.

## <a name="monitor-the-job-queue"></a><a name="monitor-the-job-queue"></a><a name="monitor-the-job-queue"></a>Отслеживание очереди заданий

Если вы настроили фоновую публикацию с очередями заданий, сделайте регулярной задачей отслеживание очереди заданий для выявления любых проблем. Статус можно отслеживать на странице **Операции очереди работ**. Дополнительные сведения см. в разделе [Использование очередей работ для планирования задач](admin-job-queues-schedule-tasks.md).  

Как администратор вы можете использовать [Application Insights](/azure/azure-monitor/app/app-insights-overview) для сбора и анализа телеметрии, которую можно использовать для выявления проблем. Дополнительные сведения см. в разделе [Мониторинг и анализ телеметрии](/dynamics365/business-central/dev-itpro/administration/telemetry-overview) в материалах для разработчиков и администрирования.  

## <a name="see-also"></a><a name="see-also"></a><a name="see-also"></a>См. также

[Учет документов и журналов](ui-post-documents-journals.md)  
[Использование очередей работ для планирования задач](admin-job-queues-schedule-tasks.md)  
[Изменение учтенных документов](across-edit-posted-document.md)  
[Исправление или отмена неоплаченных счетов покупки](purchasing-how-correct-cancel-unpaid-purchase-invoices.md)  
[Поиск страниц и информации с помощью функции "Что вы хотите сделать"](ui-search.md)  
[Работа с [!INCLUDE[prod_short](includes/prod_short.md)]](ui-work-product.md)


[!INCLUDE[footer-include](includes/footer-banner.md)]
