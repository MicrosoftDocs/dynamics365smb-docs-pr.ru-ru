---
title: Перенос данных клиента | Документация Майкрософт
description: Можно перенести существующие данные клиента из существующей системы ERP в Business Central с помощью служб RapidStart Services. В качестве носителей информации можно использовать файлы Excel с расширением .xlsx. Также можно вручную данные, вводя их непосредственно в организацию.
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 10/01/2020
ms.author: edupont
ms.openlocfilehash: e25082286f53c5b0458359d5f5c895b03c6f6bcf
ms.sourcegitcommit: ddbb5cede750df1baba4b3eab8fbed6744b5b9d6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/01/2020
ms.locfileid: "3927126"
---
# <a name="migrate-customer-data"></a>Миграция данных клиента
Можно перенести существующие данные клиента из существующей системы ERP в [!INCLUDE[d365fin](includes/d365fin_md.md)] с помощью инструментов переноса данных RapidStart Services. В качестве носителей информации можно использовать файлы Excel. Также можно вручную данные, вводя их непосредственно в организацию.

> [!NOTE]
> Поля типа Blob не могут быть экспортированы/импортированы с использованием Excel.

Страницы **Обзор миграции** и **Журнал конфигураций** дают доступ к функциям и просмотрам, чтобы выполнить все задачи, относящиеся к миграции данных. Рекомендуется переносить одну таблицу одновременно, чтобы обработать зависимости в имеющихся данных. При миграции будут также затронуты таблицы основных данных, в которых содержится информация о клиентах, поставщиках, товарах, контактах и Главной книге.  

## <a name="to-import-configuration-packages"></a>Импорт пакетов конфигурации
При создании новой организации можно импортировать настройки организации для новой организации. Параметры импортируются из файла RAPIDSTART, который передает содержимое пакета в сжатом формате. Импортируется соответствующий набор таблиц данных миграции по умолчанию. Набор данных содержит таблицы основных данных и таблицы данных настроек. Ваша первая задача по миграции данных — оценить, удовлетворяет ли настройка миграции нужды новой организации.

> [!NOTE]  
>  Невозможно переименовать файл, который еще не добавлен в пакет конфигурации RapidStart Services в виде файла пакета конфигурации RAPIDSTART, а затем пытаться импортировать его. Если попытаться это сделать, то вы получите сообщение об ошибке.  

Прежде чем начать, вы должны убедиться, что у вас есть разрешение на запуск объектов RapidStart Services. Например, у вас могут быть наборы разрешений SUPER или D365 RAPIDSTART. Мы также рекомендуем вам открыть ролевой центр со ссылками на RapidStart Services, например ролевый центр администрирования. Дополнительные сведения см. в разделе [Изменение роли](ui-change-basic-settings.md#to-change-the-role).  

> [!IMPORTANT]  
> При экспорте и импорте пакетов конфигураций между двумя базами данных эти базы данных должны иметь одну и те же схему, чтобы гарантировать успешный перенос всех данных. Это означает, что базы данных должны иметь одинаковую структуру таблиц и полей, таблицы в ней должны иметь одни и те же первичные ключи, а поля – одинаковые идентификаторы и типы данных.  
>
>  Можно импортировать пакет конфигураций, который был экспортирован из базы данных с отличной от целевой базы данных схемой. Однако таблицы и поля пакета конфигураций, отсутствующие в целевой базе данных, импортированы не будут.
>
> Таблицы, имеющие разные первичные ключи, и поля, имеющие различные типы данных, также не будут успешно импортированы. Например, если пакет конфигураций содержит таблицу **50000 клиентов** с первичным ключом **Code20**, а база данных, в которую производится импорт, содержит таблицу **50000 банковских счетов клиентов** с первичным ключом **Code20 + Code 20**, данные не будут импортированы.  

1. Откройте новую организацию.  
2. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Пакеты конфигураций**, затем выберите соответствующую ссылку.  
3. Выберите действие **Импортировать пакет**. Перейдите к файлу пакета RAPIDSTART, который требуется импортировать, затем выберите действие **Открыть**. В процессе импорта содержимое пакета распаковывается и создается запись пакета.  

    После окончания импорта можно просмотреть количество таблиц конфигурации, которые были импортированы, в поле **Число таблиц**.  
4. Для просмотра списка таблиц конфигурации выберите действие **Вид**.  
5. Для применения пакета выберите действие **Применить пакет**.  

    > [!NOTE]  
    >  Сведения по миграции данных основаны на шаблонах конфигурации, если указан один из них. Сначала необходимо обновить шаблон, чтобы изменить список полей.  

6.  Для проверки выбора полей выберите таблицу, затем на вкладке **Строки** выберите действие **Поля**. Просмотрите и сравните количество полей, которые доступны, с количеством полей, данные которых применены.  

Если выбор таблиц не соответствует требованиям, можно создать один или несколько новых файлов миграции данных. Если файлов достаточно, можно продолжить миграцию данных с помощью файлов Excel или XML.

## <a name="to-create-a-data-migration-file"></a>Создание файла миграции данных

Можно создать новые файлы миграции данных и настроить их для поддержки вашего бизнеса.  

> [!TIP]
> Файл может использоваться только для миграции поля, в котором для свойства **Класс поля** установлено значение **Обычный**.  

1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Пакет конфигурации**, затем выберите соответствующую ссылку.  
2. Выберите и откройте пакет, который следует использовать для миграции данных, затем выберите действие **Получить таблицы**. Откроется страница **Получить таблицы пакетов**.  
3. В поле **TableID** введите номер таблицы или выберите таблицу из списка, например таблица 18 **Клиент**. Поле **Имя таблицы** заполняется автоматически.  
4. Выберите новую таблицу миграции, затем, на вкладке **Таблицы**, выберите действие **Поля**. Откроется страница **Поля переноса**.  
5. Снимите флажок **Включить поле** для всех полей, которые вы не хотите импортировать, затем выберите действие **Установить включенное** или **Очистить включенное**.  

> [!IMPORTANT]  
>  Если по умолчанию установлен флажок **Включить поле**, то оно является частью первичного ключа. Выбор не должен быть очищен, иначе появятся ошибки, и запись нельзя будет импортировать.  
>
>  Если включено поле, которое имеет связь с другой таблицей, автоматически устанавливается флажок **Проверить поле**. Проверка может привести к обновлению других полей в этой и других таблицах. Проверка выполняется в порядке номеров полей.  

Создается новая таблица миграции.  

## <a name="to-export-data-migration-files"></a>Экспорт файлов миграции данных
После определения таблиц, в которые требуется перенести данные клиента, выполняется экспортирование файлов.  

1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Пакеты конфигураций**, затем выберите соответствующую ссылку.  
2. Выберите и откройте пакет, который необходимо использовать для экспорта.
3. Выберите таблицу или таблицы, которые необходимо экспортировать, затем выберите действие **Экспорт в Excel**.
4. Сохраните экспортированный файл Excel.  
5. Повторите эту процедуру для всех соответствующих таблиц миграции данных. Если выбрано несколько таблиц одновременно, то экспорт данных осуществляется в общую книгу.  

Если таблица не заполнена, то итоговый файл миграции данных содержит пустые ячейки для выбранных полей при выборе или создании таблиц миграции для новой организации. Если выбранная таблица миграции данных содержит данные, то они будут экспортированы.  

## <a name="to-map-values-to-be-used-during-import"></a>Сопоставление значений для использования во время импорта
При применении данных, импортированных из Excel или пакета RapidStart, [!INCLUDE[d365fin](includes/d365fin_md.md)] рассматривает и обрабатывает сопоставление на основе отношений таблиц:  

- Если соответствие определяется непосредственно для поля в таблице, [!INCLUDE[d365fin](includes/d365fin_md.md)] использует его.  

- Если поле связано с другой таблицей, [!INCLUDE[d365fin](includes/d365fin_md.md)] выполняет поиск соответствия, определенного для первичного ключа в связанной таблице. Связанная таблица, однако, должна быть частью пакета конфигурации.  

- Если сведения соответствия определены в обоих местах: непосредственно для поля и для первичного ключа в связанной таблице, то [!INCLUDE[d365fin](includes/d365fin_md.md)] будет выполнять поиск соответствия в обоих местах.  

- Если одинаковые соответствия определены непосредственно для поля и в связанной таблице, но имеют различные новые значения, соответствие, определенное непосредственно для поля, имеет более высокий приоритет, чем соответствие, определенное для таблицы, на которую ссылается поле.  

В следующих процедурах нужно заранее проверить, какие значения следует сохранить в процессе миграции. Чтобы выполнить указанные ниже процедуры, необходимы файлы миграции данных (XLSX), экспортированные из [!INCLUDE[d365fin](includes/d365fin_md.md)]. Дополнительные сведения см. в разделе [Экспорт файлов миграции данных](admin-migrate-customer-data.md#to-export-data-migration-files).

1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Пакеты конфигураций**, затем выберите соответствующую ссылку.
2. Откройте пакет для требуемой компании.  
3. Выберите таблицу, в которой требуется сопоставить значения, затем, на вкладке **Таблицы** выберите действие **Поля**.  
4. Для каждого поля, которое требуется сопоставить, выберите действие выберите **Соответствие**.  
5. В поле **Старое значение** введите значение, которое следует изменить. В поле **Новое значение** введите значение, которым следует заменить прежнее. Нажмите кнопку **ОК**.  
6. Импортируйте клиентские данные. Дополнительные сведения см. в разделе [Импорт данных клиента](admin-migrate-customer-data.md#to-import-customer-data).
7. В поле **Число ошибок пакета** проверьте число сообщенных ошибок. Если такие имеются, выполните детализацию для просмотра ошибок. Откроется страница **Записи пакета конфигураций**.
8. Выберите действие **Показать ошибку**. Можно получить следующую ошибку: **XX не является допустимым параметром. Допустимые параметры: XX**. Нажмите кнопку **ОК**.  
9. Для применения настроенного сопоставления выберите действие **Применить данные**.  

### <a name="mapping-example"></a>Пример сопоставления  
В следующем примере показано, как [!INCLUDE[d365fin](includes/d365fin_md.md)] реализует определения соответствия.  

1. Создайте таблицу конфигурации, которая имеет таблицу **Менеджер по продажам/закупкам**. Определите сопоставление для поля **Код**.  
2. Добавьте дополнительные таблицы в пакет, например, **Клиент** и **Поставщик**. Обе эти таблицы ссылаются на таблицу **Менеджер по продажам/закупкам** через поля **Код менеджера** и **Код покупателя** соответственно.  
3. При применении данных сопоставление, предоставленное для поля **Код** в таблице **Менеджер по продажам/закупкам**, также будет учитываться во время обработки полей **Код менеджера** и **Код покупателя**.

## <a name="to-add-additional-values-to-d365fin"></a>Добавление дополнительных значений в [!INCLUDE[d365fin](includes/d365fin_md.md)]  
1. Выберите значок ![Лампочка, которая открывает функцию "Что вы хотите сделать"](media/ui-search/search_small.png "Что вы хотите сделать"), введите **Пакеты конфигураций**, затем выберите соответствующую ссылку.  
2. Выберите таблицу, в которую требуется добавить дополнительные значения, затем, на вкладке **Таблицы** выберите действие **Поля**.  
3. Для полей, для которых требуется, чтобы приложение [!INCLUDE[d365fin](includes/d365fin_md.md)] разрешило дополнительные значения во время миграции, установите флажок **Создать отсутствующие коды**.  
4. Импортируйте клиентские данные. Дополнительные сведения см. в разделе [Импорт данных клиента](admin-migrate-customer-data.md#to-import-customer-data).

## <a name="to-clean-up-and-process-data-before-applying-data"></a>Очистка и обработка данных до их применения
В некоторых случаях может потребоваться очистить данные клиента и обработать их перед применением к базе данных. Для этого можно использовать пакетное задание **Пакет конфигурации - Обработка** для исправления проблем, например:  

- Преобразование дат и десятичных знаков в формат, соответствующий региональным настройкам на компьютере пользователя.  
- Удалите начальные/конечные пробелы или специальные символы.  

После выполнения пакетного задания используйте следующую процедуру для обработки данных.  

1. Откройте пакет конфигурации для компании.  
2. Выберите действие **Обработать данные**.  
3. Для применения настроенного сопоставления выберите действие **Применить данные**.

## <a name="to-migrate-customer-data"></a>Миграция данных клиента
После экспорта таблицы миграции следующий шаг — ввод унаследованных данных клиента. Чтобы упростить задачи, можно воспользоваться преимуществами инструментов управления XML, которые встроены в Excel. Также можно воспользоваться встроенными функциями Excel, чтобы помочь с форматом данных и поместить данные в правильную ячейку.

Для помощи с XML включите вкладку **Разработчик** на ленте Excel, затем выберите действие **Источник**, чтобы посмотреть XML-схему вашей таблицы миграции, как она представлена в Excel.

Следующая процедура основана на листе Excel, который был создан для миграции. Дополнительные сведения см. в разделе [Экспорт файлов миграции данных](admin-migrate-customer-data.md#to-export-data-migration-files).

> [!IMPORTANT]  
> Не изменяйте столбцы в таблицах Excel. Если они перемещаются, изменяются или удаляются, то импортировать лист в [!INCLUDE[d365fin](includes/d365fin_md.md)] невозможно.

1. В Excel откройте экспортируемый файл данных. Существует журнал с таким названием таблицы.
2. Переименовать Лист1, чтобы обозначить, что журнал будет использован для преобразования данных. Скопируйте заголовок строки без его форматирования из экспортированной таблицы в новый журнал.
3. В третьем журнале скопируйте все данные клиента. Переименуйте лист, присвоив ему имя, например «Старые данные».
4. Создайте формулу Excel для сопоставления данных в журнале преобразования между полями в экспортированном журнале и старыми данными клиента.
5. После сопоставления всех данных скопируйте диапазон данных в табличный журнал.
6. Сохраните файл и убедитесь, что тип файла остался неизменным.

Теперь можно приступать к импорту файлов данных миграции в [!INCLUDE[d365fin](includes/d365fin_md.md)], которые содержат унаследованные данные клиента.

## <a name="to-import-customer-data"></a>Импорт данных клиента
После ввода данных клиента в файлы миграции данных в Excel вам следует импортировать файлы в [!INCLUDE[d365fin](includes/d365fin_md.md)].

1. Откройте страницу **Карта пакетов конфигурации**.
2. Выберите таблицу, для которой требуется импортировать данные, затем, на вкладке **Таблицы** выберите действие **Импорт из Excel**.
3. Найдите и откройте файл, из которого требуется импортировать данные.
4. На странице **Предварительный просмотр импорта пакетов конфигураций** просмотрите содержимое, которое будет импортировано.

    На странице **Предварительный просмотр импорта пакетов конфигураций** содержится обзор содержимого файла Excel, который будет импортироваться. На ней также указывается, создается ли новый пакет конфигурации или обновляется существующий, и создаются ли новые строки пакета конфигурации (таблицы) или обновляются существующие.    
5. Выберите действие **Импорт**.

Данные из файла импортируются в таблицы пакетов конфигурации. В поле **Число записей пакета** можно увидеть число записей, которые были импортированы. Кроме этого, можно увидеть количество ошибок миграции.

## <a name="to-validate-customer-data"></a>Проверка данных клиента
Перед применением записей к базе данных [!INCLUDE[d365fin](includes/d365fin_md.md)] необходимо проверить данные клиентов.  

> [!NOTE]  
>  В большинстве случаев недопустимые данные не создаются в базе данных. Иногда приложение может быть заблокировано, если импортированная таблица миграции содержит ошибки.  

1. На странице **Обзор миграции**, в поле **Число ошибок миграции** проверьте, что при миграции не возникли ошибки.  
2. Если имеются ошибки, выберите таблицу миграции, затем на вкладке **Таблицы** выберите действие **Ошибки**. Установлен флажок **Не корректно** для каждой записи с ошибкой.  
3. Чтобы просмотреть ошибки, выберите строку, затем выберите действие **Показать ошибку**.  

    В поле **Текст ошибки** указана причина ошибки. Поле **Метка поля** содержит метку поля, содержащего ошибку.  
4.  Чтобы исправить ошибку или другим образом сделать обновление, на странице **Обзор миграции** выберите действие **Запись миграции**, затем на странице **Запись миграции** исправьте запись, содержащую ошибку.  

После внесения исправления запись удаляется из списка записей на странице **Ошибки данных миграции**.  

Теперь можно приступать к применению данных клиента в базе данных.  

## <a name="to-apply-customer-data"></a>Применение данных клиента
После импорта всех записей миграции данных, которые являются допустимым и не имеют ошибок, можно применить записи к базе данных [!INCLUDE[d365fin](includes/d365fin_md.md)].  

1. Откройте страницу **Пакеты конфигураций**.  
2. Выберите таблицу для файла миграции данных, который требуется применить, затем выберите действие **Применить данные**.

В поле **Число записей базы данных** можно увидеть число созданных записей базы данных. Можно проверить, что были созданы правильные записи, выбрав ссылку в поле **Число записей базы данных**.  

База данных организации клиента настроена, и основные данные импортированы. Ваш следующий шаг в процессе внедрения — обучить пользователей, определить процессы, создать дополнительные данные, настроить отчеты и т. д.

## <a name="see-also"></a>См. также  
[Настройка организации со службами RapidStart Services](admin-set-up-a-company-with-rapidstart.md)  
[Администрация](admin-setup-and-administration.md)
